# Technical Context - Haskell Resources for Ampersand Development

## Ampersand Project Configuration
- **GHC Version**: 9.6.6
- **Stack LTS**: 22.39
- **Build Tool**: Stack (with Cabal as package format)
- **Language Extensions**: NoImplicitPrelude, OverloadedStrings
- **Code Quality**: HLint, extensive GHC warnings, IDE integration

## Essential Quick Reference Links

### Official Documentation
- **Haskell.org**: https://www.haskell.org/ - Main entry point, downloads, news
- **GHC User's Guide**: https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/ - Compiler documentation
- **Haskell Language Report**: https://www.haskell.org/onlinereport/haskell2010/ - Language specification
- **Stack Guide**: https://docs.haskellstack.org/ - Build tool documentation
- **Stackage**: https://www.stackage.org/ - Package versions and LTS snapshots
- **Hackage**: https://hackage.haskell.org/ - Package repository and documentation

### Core Language Resources
- **Language Extensions Guide**: https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/exts.html
- **Haskell Wiki**: https://wiki.haskell.org/ - Community knowledge base
- **GHC Error Index**: https://errors.haskell.org/ - Explanations of compiler errors

## Development Environment & Tooling

### Build System (Stack)
- **Stack Documentation**: https://docs.haskellstack.org/
- **LTS 22.39 Package Set**: https://www.stackage.org/lts-22.39
- **Stack Templates**: https://github.com/commercialhaskell/stack-templates
- **Why needed**: Setting up development environment, managing dependencies, building Ampersand

### IDE Integration
- **Haskell Language Server (HLS)**: https://haskell-language-server.readthedocs.io/
- **HIE Files**: Generated by -fwrite-ide-info flag (used in package.yaml)
- **HLint**: https://github.com/ndmitchell/hlint - Static analysis tool
- **Why needed**: Real-time error checking, code completion, refactoring support

### Package Management
- **Cabal User Guide**: https://cabal.readthedocs.io/
- **Package.yaml Format**: https://github.com/sol/hpack#readme
- **Why needed**: Understanding project configuration, adding dependencies

## Language Features Used in Ampersand

### Extensions (Ampersand uses NoImplicitPrelude, OverloadedStrings)
- **NoImplicitPrelude**: https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/exts.html#extension-NoImplicitPrelude
- **OverloadedStrings**: https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/exts.html#extension-OverloadedStrings
- **Extension Reference**: https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/exts.html
- **Why needed**: Understanding how these affect code writing and compilation

### Advanced Type System
- **Type Classes**: https://wiki.haskell.org/Typeclassopedia
- **GADTs**: https://wiki.haskell.org/GADTs_for_dummies
- **Type Families**: https://wiki.haskell.org/GHC/Type_families
- **Why needed**: Understanding complex type signatures in Ampersand codebase

## Core Libraries Used in Ampersand

### Data Processing & JSON
- **aeson**: https://hackage.haskell.org/package/aeson - JSON parsing/encoding
- **aeson-pretty**: https://hackage.haskell.org/package/aeson-pretty - Pretty JSON output
- **yaml**: https://hackage.haskell.org/package/yaml - YAML support
- **Why needed**: Data serialization, configuration files, API responses

### Text Processing
- **text**: https://hackage.haskell.org/package/text - Efficient Unicode text
- **text1**: https://hackage.haskell.org/package/text1 - Non-empty text
- **Why needed**: String manipulation, text processing in compiler

### Parsing (Critical for Ampersand's ADL parser)
- **parsec**: https://hackage.haskell.org/package/parsec - Parser combinator library
- **megaparsec**: https://hackage.haskell.org/package/megaparsec - Advanced parser combinators
- **simple-sql-parser**: https://hackage.haskell.org/package/simple-sql-parser - SQL parsing
- **Parsec Tutorial**: https://wiki.haskell.org/Parsec
- **Why needed**: Understanding ADL language parsing, debugging parser errors

### Monads & Control Flow
- **mtl**: https://hackage.haskell.org/package/mtl - Monad transformer library
- **transformers**: https://hackage.haskell.org/package/transformers - Monad transformers
- **rio**: https://hackage.haskell.org/package/rio - Standard library replacement
- **Why needed**: Understanding complex monad stacks, error handling

### Data Structures
- **containers**: https://hackage.haskell.org/package/containers - Standard data structures
- **lens**: https://hackage.haskell.org/package/lens - Functional references
- **hashable**: https://hackage.haskell.org/package/hashable - Hashing support
- **Why needed**: Efficient data manipulation, complex data structure access

### Document Generation (Ampersand generates documentation)
- **pandoc**: https://hackage.haskell.org/package/pandoc - Document conversion
- **pandoc-types**: https://hackage.haskell.org/package/pandoc-types - Document AST
- **pandoc-crossref**: https://hackage.haskell.org/package/pandoc-crossref - Cross-references
- **doctemplates**: https://hackage.haskell.org/package/doctemplates - Document templates
- **HStringTemplate**: https://hackage.haskell.org/package/HStringTemplate - String templating
- **Why needed**: Understanding document generation pipeline

### File Processing
- **xlsx**: https://hackage.haskell.org/package/xlsx - Excel file processing
- **zip-archive**: https://hackage.haskell.org/package/zip-archive - ZIP file handling
- **directory**: https://hackage.haskell.org/package/directory - File system operations
- **filepath**: https://hackage.haskell.org/package/filepath - File path manipulation
- **Why needed**: Processing input files, generating output files

### Graphics & Visualization
- **graphviz**: https://hackage.haskell.org/package/graphviz - GraphViz integration
- **Why needed**: Generating diagrams and visualizations

## Testing & Quality Assurance

### Property Testing
- **QuickCheck**: https://hackage.haskell.org/package/QuickCheck - Property-based testing
- **quickcheck-instances**: https://hackage.haskell.org/package/quickcheck-instances - Additional instances
- **QuickCheck Manual**: https://www.cse.chalmers.se/~rjmh/QuickCheck/manual.html
- **Why needed**: Writing property tests, understanding test failures

### Code Quality Tools
- **HLint**: https://github.com/ndmitchell/hlint - Style and correctness suggestions
- **Weeder**: https://github.com/ocharles/weeder - Dead code elimination
- **Why needed**: Maintaining code quality, removing unused code

## Debugging & Troubleshooting

### GHC Error Messages
- **GHC Error Index**: https://errors.haskell.org/ - Searchable error explanations
- **GHC User Guide - Using GHC**: https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/using.html
- **Why needed**: Understanding and resolving compiler errors

### Debugging Tools
- **GHCi**: https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/ghci.html - Interactive REPL
- **Debug.Trace**: https://hackage.haskell.org/package/base/docs/Debug-Trace.html - Debug output
- **GHC Profiling**: https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/profiling.html
- **Why needed**: Interactive debugging, performance analysis

### Stack Troubleshooting
- **Stack FAQ**: https://docs.haskellstack.org/en/stable/faq/
- **Stack Troubleshooting**: https://docs.haskellstack.org/en/stable/troubleshooting/
- **Why needed**: Resolving build issues, dependency conflicts

## Performance & Profiling

### Profiling Tools
- **GHC Profiling Guide**: https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/profiling.html
- **Criterion**: https://hackage.haskell.org/package/criterion - Benchmarking library
- **ThreadScope**: https://wiki.haskell.org/ThreadScope - Parallel performance analysis
- **Why needed**: Optimizing compiler performance, identifying bottlenecks

### Memory Management
- **GHC Memory Management**: https://wiki.haskell.org/GHC/Memory_Management
- **Space Leaks**: https://wiki.haskell.org/Memory_leak
- **Why needed**: Preventing memory leaks in long-running processes

## Learning & Community Resources

### Tutorials & Guides
- **Learn You a Haskell**: http://learnyouahaskell.com/ - Beginner tutorial
- **Real World Haskell**: http://book.realworldhaskell.org/ - Practical applications
- **Haskell Wikibook**: https://en.wikibooks.org/wiki/Haskell
- **Why needed**: Understanding advanced concepts, best practices

### Community
- **Haskell Discourse**: https://discourse.haskell.org/ - Community forum
- **r/haskell**: https://www.reddit.com/r/haskell/ - Reddit community
- **Haskell IRC**: #haskell on Libera.Chat
- **Stack Overflow**: https://stackoverflow.com/questions/tagged/haskell
- **Why needed**: Getting help, staying updated with ecosystem

### Advanced Topics
- **Category Theory**: https://wiki.haskell.org/Category_Theory - Mathematical foundations
- **Free Monads**: https://wiki.haskell.org/Free_monad - Advanced abstraction
- **Template Haskell**: https://wiki.haskell.org/Template_Haskell - Metaprogramming
- **Why needed**: Understanding theoretical foundations, advanced techniques

## Ampersand-Specific Considerations

### Parser Development
- **Parsec vs Megaparsec**: Understanding differences and migration paths
- **Error Messages**: Providing helpful parse error messages
- **Performance**: Parser performance for large ADL files

### Type Safety
- **GADTs for AST**: Type-safe abstract syntax trees
- **Phantom Types**: Encoding invariants in types
- **Smart Constructors**: Maintaining invariants

### Code Generation
- **Template Haskell**: Compile-time code generation
- **QuasiQuotes**: Embedding DSLs
- **Generic Programming**: Automatic derivation of functionality

### Compiler Architecture
- **Compiler Design**: Multi-pass compilation
- **Symbol Tables**: Managing scope and bindings
- **Type Checking**: Implementing type inference

## Emergency References

### Common Error Patterns in Ampersand
- **Orphan Instances**: When working with type classes across modules
- **Ambiguous Types**: Type inference failures with overloaded functions
- **Stack Overflow**: Infinite recursion in recursive definitions
- **Space Leaks**: Accumulating thunks in long computations

### Quick Fixes
- **Type Holes**: Use `_` to see inferred types
- **Type Annotations**: Add explicit types to resolve ambiguity
- **Strictness**: Use `!` patterns to avoid space leaks
- **LANGUAGE Pragmas**: Enable extensions when needed

This document serves as a comprehensive reference to avoid searches during development work on Ampersand.
