CONTEXT ARM20Test8 IN DUTCH
------------------------------------------------------------
{- Bugbeschrijving
Dit bestandje vertaalt netjes in de OUDE (werkende, naar men zegt) prototype generator. 
De gegenereerde SQL code die wordt gerbuikt om de bedrijfsfuncties in de interface 'Overzicht' te tonen, is echter fout.
Dit kun je in het gegenereerde prototype zien, omdat daar minder bedrijfsfuncties te zien zijn dan er bedrijfsfuncties bestaan.
Zo is de bedrijfsfunctie 'Servicebeheer' te zien bij Personen (Steven Stoomketel is er eigenaar van), maar niet bij Bedrijfsfuncties.
Dat dit aan de SQL code ligt zie je door de code die bedrijfsfuncties ophoest te vergelijken met de code die de Personen en criteria ophoest (in Generics.php) -- deze code heb ik achteraan dit bestand geplakt.

Je kunt eenvoudig vaststellen dat deze bug niet meer aanwezig is als:
- je de regel 'Criteria' verwijdert
- je de [UNI] bij critTAV verwijdert
- je de regel 'Criteria' overtreedbaar maakt
-}
------------------------------------------------------------
PATTERN ARM20Test8
bfEigenaar :: Bedrijfsfunctie * Persoon [UNI]
critTAV :: Criterium * Bedrijfsfunctie [UNI]
RULE "Criteria": I[Criterium] |- critTAV;critTAV~

ENDPATTERN
------------------------------------------------------------
INTERFACE "Overzicht" : I[ONE]
BOX[ "Personen"         : V[ONE*Persoon]
   BOX[ "Naam" : I
      , "Eigenaar van"  : bfEigenaar~
      ]
   , "Bedrijfsfuncties" : V[ONE*Bedrijfsfunctie]
   , "Critera"          : V[ONE*Criterium]
   ]

------------------------------------------------------------
POPULATION bfEigenaar CONTAINS [ ("Netwerkbeheer", "Neelie Nurks") ]
POPULATION bfEigenaar CONTAINS [ ("Servicebeheer", "Steven Stoomketel") ]
POPULATION bfEigenaar CONTAINS [ ("Finance", "Fieke Friemel") ]
------------------------------------------------------------
POPULATION critTAV           CONTAINS [ ("Obl:Netwerkbeheer:1", "Finance") ]

POPULATION critTAV           CONTAINS [ ("Obl:Servicebeheer:1", "Finance") ]

POPULATION critTAV           CONTAINS [ ("Exp:Netwerkbeheer:1", "Netwerkbeheer") ]

ENDCONTEXT
------------------------------------------------------------
{- Onderstaande stukjes tekst komen uit Generics.php
// module Generics.php generated by Generate.hs
// Prototype v2.2.0.1869, build time: 19-Mar-12 13:54.30 (lib: Ampersand v2.2.0.537, build time: 19-Mar-12 13:53.39)

$allInterfaceObjects =
  array
    ( // Top-level interface Overzicht for all roles:
      'Overzicht' => 
      array ( 'name' => 'Overzicht'
            // original term: I[ONE]
            , 'interfaceRoles' => array ()
            , 'editableConcepts' => array ()
            , 'relation' => ''
            , 'relationIsFlipped' => ''
            , 'srcConcept' => 'ONE'
            , 'tgtConcept' => 'ONE'
            , 'termSQL' => '/* case: ETyp x _
                                     ETyp ( \"I\" ) _ */
                                  /* I[ONE] */
                                  /* case: (ERel (V (Sign s t)))
                                     ERel [ \"V[ONE]\" ] */
                                  SELECT DISTINCT 1 AS src, 1 AS tgt
                                  FROM (SELECT 1) AS csnd'
            // Box
            , 'boxSubInterfaces' =>
                array
                  ( array ( 'name' => 'Personen'
                          // original term: V[ONE*Persoon]
                          , 'relation' => ''
                          , 'relationIsFlipped' => ''
                          , 'srcConcept' => 'ONE'
                          , 'tgtConcept' => 'Persoon'
                          , 'termSQL' => '/* case: ETyp x _
                                                   ETyp ( \"V\" ) _ */
                                                /* case: (ERel (V (Sign s t)))
                                                   ERel [ \"V[ONE*Persoon]\" ] */
                                                SELECT DISTINCT 1 AS src, `Persoon`.`Persoon` AS tgt
                                                FROM `Persoon` AS `Persoon`'
                          // Box
                          , 'boxSubInterfaces' =>
                              array
                                ( array ( 'name' => 'Naam'
                                        // original term: I
                                        , 'relation' => ''
                                        , 'relationIsFlipped' => ''
                                        , 'srcConcept' => 'Persoon'
                                        , 'tgtConcept' => 'Persoon'
                                        , 'termSQL' => 'SELECT DISTINCT `Persoon` AS src, `Persoon` AS tgt
                                                              FROM `Persoon`
                                                              WHERE `Persoon` IS NOT NULL AND `Persoon` IS NOT NULL'
                                        // No subinterfaces
                                        )
                                , array ( 'name' => 'Eigenaar van'
                                        // original term: bfEigenaar~
                                        , 'relation' => ''
                                        , 'relationIsFlipped' => ''
                                        , 'srcConcept' => 'Persoon'
                                        , 'tgtConcept' => 'Bedrijfsfunctie'
                                        , 'termSQL' => '/* case: EFlp x. */
                                                              SELECT DISTINCT `Bedrijfsfunctie` AS tgt, `bfEigenaar` AS src
                                                              FROM `Bedrijfsfunctie`
                                                              WHERE `Bedrijfsfunctie` IS NOT NULL AND `bfEigenaar` IS NOT NULL'
                                        // No subinterfaces
                                        )
                                )
                          )
                  , array ( 'name' => 'Bedrijfsfuncties'
                          // original term: V[ONE*Bedrijfsfunctie]
                          , 'relation' => ''
                          , 'relationIsFlipped' => ''
                          , 'srcConcept' => 'ONE'
                          , 'tgtConcept' => 'Bedrijfsfunctie'
                          , 'termSQL' => '/* case: ETyp x _
                                                   ETyp ( \"V\" ) _ */
                                                /* case: (ERel (V (Sign s t)))
                                                   ERel [ \"V[ONE*Bedrijfsfunctie]\" ] */
                                                SELECT DISTINCT 1 AS src, `Bedrijfsfunctie`.`critTAV` AS tgt
                                                FROM `Criterium` AS `Bedrijfsfunctie`'
                          // No subinterfaces
                          )
                  , array ( 'name' => 'Critera'
                          // original term: V[ONE*Criterium]
                          , 'relation' => ''
                          , 'relationIsFlipped' => ''
                          , 'srcConcept' => 'ONE'
                          , 'tgtConcept' => 'Criterium'
                          , 'termSQL' => '/* case: ETyp x _
                                                   ETyp ( \"V\" ) _ */
                                                /* case: (ERel (V (Sign s t)))
                                                   ERel [ \"V[ONE*Criterium]\" ] */
                                                SELECT DISTINCT 1 AS src, `Criterium`.`Criterium` AS tgt
                                                FROM `Criterium` AS `Criterium`'
                          // No subinterfaces
                          )
                  )
            )
    );
-}