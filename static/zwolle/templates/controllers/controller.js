/*
Controller for interface "$interfaceName$" (context: "$contextName$"). Generated code, edit with care.
$if(verbose)$Generated using template: $usedTemplate$
Generated by $ampersandVersionStr$

INTERFACE "$interfaceName$" : $expAdl$ :: $source$ * $target$  ($if(!isRoot)$non-$endif$root interface)
Roles: [$roles;separator=", "$]
$endif$*/
AmpersandApp.controller('$interfaceName$Controller', function (\$scope, \$rootScope, \$route, \$routeParams, Restangular, \$location, \$timeout, \$localStorage, \$sessionStorage, ResourceService) {
    const resourceType = '$source$';
    const ifcName = '$interfaceName$';
    
    if(\$routeParams['new'] && '$source$' == '$target$') resourceId = '_NEW'; // Set resourceId to special '_NEW' value in case new resource must be created 
    else if(resourceType == 'SESSION') resourceId = \$sessionStorage.session.id;
    else if (resourceType == 'ONE') resourceId = '1';
    else resourceId = \$routeParams.resourceId;
    
    \$scope.resource = {};
    \$scope.resource._path_ = '/resources/' + resourceType + '/' + resourceId;
    \$scope.resource._isRoot_ = true;
    \$scope.resource[ifcName] = {};
    
    
    /**********************************************************************************************
     * GET INTERFACE
     *********************************************************************************************/
    
    // Create new resource
    if(\$routeParams['new']){
        
        /*
        \$scope.createResource(\$scope.resource, ifcName)
        .then(function(data){
            \$location.url('/' + ifcName + '/'+ data.content._id_, false);
        },function(reason){
            \$rootScope.addError('Failed to create resource: ' + reason);
        });
        */
    
    // Get resource interface data
    }else{
        ResourceService.getResource(\$scope.resource, ifcName, \$scope.resource);
    }
    
});