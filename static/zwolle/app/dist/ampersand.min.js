angular.module("AmpersandApp",["ngResource","ngRoute","ngSanitize","restangular","ui.bootstrap","uiSwitch","cgBusy","siTable","ui.codemirror","ngStorage","angularFileUpload","ui.bootstrap.datetimepicker","hc.marked"]).config(["$routeProvider","$locationProvider",function(t,e){t.when("/",{controller:"",templateUrl:"app/src/shared/home.html",interfaceLabel:"Home"}).when("/admin/installer",{controller:"InstallerController",templateUrl:"app/src/admin/installer.html",interfaceLabel:"Installer"}).when("/404",{templateUrl:"app/src/shared/404.html",interfaceLabel:"404"}).otherwise({redirectTo:"/404"}),e.hashPrefix("")}]).config(["RestangularProvider",function(t){t.setBaseUrl("api/v1"),t.setDefaultHeaders({"Content-Type":"application/json"})}]).run(["Restangular","$rootScope","$location","$route","NotificationService","RoleService","NavigationBarService",function(t,e,n,r,a,i,o){t.addFullRequestInterceptor(function(t,e,n,r,a,i){return i}),t.addResponseInterceptor(function(t,e,r,a,i,s){return"get"!=e&&"getList"!=e&&t.sessionRefreshAdvice&&o.refreshNavBar(),null!=t.navTo&&n.url(t.navTo),t}),t.setErrorInterceptor(function(t,e,r){var o,s;return 401==t.status&&(i.deactivateAllRoles(),n.path("")),"object"==typeof t.data?(404==t.data.error?a.addInfo(t.data.msg||"Resource not found"):(o=t.data.msg||t.statusText,a.addError(o,t.status,!0,t.data.html)),void 0!==t.data.notifications&&a.updateNotifications(t.data.notifications)):(o=t.status+" "+t.statusText,s=t.data,a.addError(o,t.status,!0,s)),!0}),e.getCurrentDateTime=function(){return new Date};var s=n.url;n.url=function(t,a){if(!1===a)var i=r.current,o=e.$on("$locationChangeSuccess",function(){r.current=i,o()});return s.apply(n,[t])}}]).value("cgBusyDefaults",{message:"Loading...",backdrop:!0,minDuration:500}).directive("myShowonhoverBox",function(){return{link:function(t,e,n){e.closest(".box").hasClass("my-showonhover-box-show")||e.hide(),e.closest(".box").bind("mouseenter",function(){e.closest(".box").addClass("my-showonhover-box-show"),e.show()}),e.closest(".box").bind("mouseleave",function(){e.closest(".box").removeClass("my-showonhover-box-show"),e.hide()})}}}).directive("myBluronenter",function(){return function(t,e,n){e.bind("keydown keypress",function(t){13===t.which&&(t.target.blur(),t.preventDefault())})}}).filter("toArray",function(){return function(t,e){return t?Array.isArray(t)?t:!1===e?Object.keys(t).map(function(e){return t[e]}):Object.keys(t).map(function(e){return Object.defineProperty(t[e],"$key",{enumerable:!1,value:e})}):t}}).directive("myNavToInterfaces",function(){return{restrict:"E",scope:{resource:"=",target:"@"},templateUrl:"app/src/shared/partials/myNavToInterfaces.html",transclude:!0}}).directive("myNavToOtherInterfaces",function(){return{restrict:"E",scope:{resource:"=",target:"@"},templateUrl:"app/src/shared/partials/myNavToOtherInterfaces.html"}}).filter("unsafe",["$sce",function(t){return t.trustAsHtml}]),angular.module("AmpersandApp").controller("ExecEngineController",["$scope","Restangular","NotificationService",function(t,e,n){t.run=function(){e.one("admin/execengine/run").get().then(function(t){t=t.plain(),n.updateNotifications(t)})}}]),angular.module("AmpersandApp").controller("InstallerController",["$scope","Restangular","NotificationService","RoleService",function(t,e,n,r){t.installing=!1,t.installed=!1,t.install=function(a){t.installing=!0,t.installed=!1,e.one("admin/installer").get({defaultPop:a}).then(function(e){e=e.plain(),n.updateNotifications(e),r.deactivateAllRoles(),t.installing=!1,t.installed=!0},function(){t.installing=!1,t.installed=!1})}}]),angular.module("uiSwitch",[]).directive("switch",function(){return{restrict:"AE",replace:!0,transclude:!0,template:function(t,e){var n="";return n+='<a href=""',n+=e.ngModel&&!e.ngClick?' ng-click="'+e.ngModel+"=!"+e.ngModel+'"':"",n+=">",n+="<span",n+=' class="switch'+(e.class?" "+e.class:"")+'"',n+=' ng-class="{ checked:'+e.ngModel+' }"',n+=">",n+="<small></small>",n+="</span>",n+="<span ng-transclude></span>",n+="</a>"}}});var app=angular.module("AmpersandApp");app.requires[app.requires.length]="angularFileUpload",app.config(["$routeProvider",function(t){t.when("/ext/importer",{controller:"PopulationImportController",templateUrl:"app/src/importer/importer.html",interfaceLabel:"Population importer"})}]).service("ImportService",["FileUploader","NotificationService",function(t,e){let n=new t({url:"api/v1/admin/import"});return n.onSuccessItem=function(t,n,r,a){e.updateNotifications(n.notifications)},n.onErrorItem=function(t,n,r,a){let i,o;"object"==typeof n?(i=n.msg||"Error while importing",e.addError(i,r,!0),void 0!==n.notifications&&e.updateNotifications(n.notifications)):(i=r+" Error while importing",o=n,e.addError(i,r,!0,o))},{uploader:n}}]).controller("PopulationImportController",["$scope","ImportService",function(t,e){t.uploader=e.uploader}]),angular.module("AmpersandApp").controller("AtomicController",["$scope","ResourceService",function(t,e){t.selected={},t.saveItem=e.saveItem,t.addItem=e.addItem,t.removeItem=e.removeItem,t.remove=e.removeResource,t.delete=e.deleteResource}]),angular.module("AmpersandApp").controller("AtomicDateController",["$scope","ResourceService",function(t,e){function n(t){var e=String(t);return 1===e.length&&(e="0"+e),e}function r(t){null!==t&&(t.toJSON=function(){return this.getUTCFullYear()+"-"+n(this.getMonth()+1)+"-"+n(this.getDate())})}t.isOpen=!1,t.openDatepicker=function(e){e.preventDefault(),e.stopPropagation(),t.isOpen=!0},t.selected={value:""},t.saveDateItem=function(t,n,a){r(t[n]),e.saveItem(t,n,a)},t.addDateItem=function(t,n,a,i){""!==a.value?(r(a.value),e.addItem(t,n,a,i)):console.log("Empty date selected")}}]),angular.module("AmpersandApp").controller("AtomicTypeAheadController",["$scope","Restangular","ResourceService",function(t,e,n){t.selected={},t.hasNoResults=!1,t.getTypeahead=function(n,r){r=void 0!==r&&r,(void 0===t.typeahead[n]||r)&&(t.typeahead[n]=e.all("resource/"+n).getList().$object)},t.typeaheadOnSelect=function(e,r,a,i,o,s){void 0===e._id_?console.log("Resource id undefined"):""===e._id_?console.log("Empty resource id provided"):(Array.isArray(i[o])?(i[o].push(angular.copy(e)),patch=n.createPatch("add",i,s,o,e._id_),n.addPatches(s,[patch])):null===i[o]?(i[o]=angular.copy(e),patch=n.createPatch("replace",i,s,o,e._id_),n.addPatches(s,[patch])):console.log("Error: Property already set and/or not defined"),t.hasNoResults=!1),t.selected.value=""},t.typeAheadCreate=function(e,r,a,i,o){Array.isArray(e[r])?n.addItem(e,r,a,i).then(function(){t.getTypeahead(o,!0)}):null===e[r]?(e[r]=a.value,n.saveItem(e,r,i)):console.log("Error: Property already set and/or not defined")}}]),angular.module("AmpersandApp").controller("AtomicUploadFileController",["$scope","FileUploader","NotificationService",function(t,e,n){t.FileUploader=new e({alias:"file",formData:[],removeAfterUpload:!0,autoUpload:!0}),t.FileUploader.onSuccessItem=function(t,e,r,a){n.updateNotifications(e.notifications),t.resource[t.ifc].push(e.content)},t.FileUploader.onErrorItem=function(t,e,r,a){n.addError(e.error.message,e.error.code,!0)}}]),angular.module("AmpersandApp").controller("BoxController",["$scope","ResourceService",function(t,e){t.createResource=e.createResource,t.save=e.saveResource,t.cancel=e.cancelResource,t.remove=e.removeResource,t.delete=e.deleteResource}]),angular.module("AmpersandApp").controller("InterfaceController",["$scope","$location","ResourceService",function(t,e,n){t.typeahead={},t.$on("$locationChangeStart",function(t,e,r){n.checkRequired()&&(confirmed=confirm("You have unsaved edits. Do you wish to leave?"),t&&!confirmed?t.preventDefault():t&&confirmed?n.emptyUpdatedResources():console.log("Someting went wrong. Cannot determine action after locationChangeStart"))}),t.newResource=function(){e.url("/"+ifcName+"?new")},t.pendingPromises=n.pendingPromises}]),angular.module("AmpersandApp").service("ResourceService",["$localStorage","$timeout","$location","Restangular","NotificationService",function(t,e,n,r,a){let i=[],o={getResource:function(t,e,n){return promise=r.one(t._path_+"/"+e).get().then(function(n){try{n=n.plain()}catch(t){}return $.isEmptyObject(n)?a.addInfo("No results found"):null===t[e]||Array.isArray(t[e])?t[e]=n:angular.extend(t[e],n),o.initResourceMetaData(t),t}),Array.isArray(n._loading_)||(n._loading_=[]),n._loading_.push(promise),promise},saveResource:function(t){return promise=r.one(t._path_).patch(t._patchesCache_,{}).then(function(e){return e=e.plain(),t._isRoot_?t.get():t=angular.extend(t,e.content),o.processResponse(t,e),t}),Array.isArray(t._loading_)||(t._loading_=[]),t._loading_.push(promise),promise},cancelResource:function(t){return promise=r.one(t._path_).get().then(function(e){return e=e.plain(),$.isEmptyObject(e)?a.addInfo("No results found"):angular.extend(t,e),a.getNotifications(),o.initResourceMetaData(t),t}),Array.isArray(t._loading_)||(t._loading_=[]),t._loading_.push(promise),promise},createResource:function(t,e,a,i){return"undefined"===i&&(i=!1),promise=r.one(t._path_).all(e).post({},{}).then(function(r){return r=r.plain(),o.processResponse(a,r),newResource=r.content,Array.isArray(t[e])?i?t[e].unshift(newResource):t[e].push(newResource):t[e]=newResource,t._isRoot_&&"_NEW"==t._id_&&n.url("/"+e+"/"+newResource._id_,!1),newResource}),Array.isArray(a._loading_)||(a._loading_=[]),a._loading_.push(promise),promise},removeResource:function(t,e,n,r){return Array.isArray(t[e])?t[e].splice(t[e].indexOf(n),1):t[e]=null,patch=o.createPatch("remove",n,r),o.addPatches(r,[patch])},deleteResource:function(t,e,n){if(confirm("Are you sure?"))return promise=r.one(n._path_).remove({}).then(function(r){return r=r.plain(),a.updateNotifications(r.notifications),Array.isArray(t[e])?t[e].splice(t[e].indexOf(n),1):t[e]=null,t}),Array.isArray(n._loading_)||(n._loading_=[]),n._loading_.push(promise),promise},saveItem:function(t,e,n){return void 0===t[e]||""===t[e]?value=null:value=t[e],patch=o.createPatch("replace",t,n,e,value),o.addPatches(n,[patch])},addItem:function(t,e,n,r){return void 0===n.value?$q.reject("Value undefined"):""===n.value?$q.reject("Empty value selected"):Array.isArray(t[e])?(t[e].push(n.value),patch=o.createPatch("add",t,r,e,n.value),o.addPatches(r,[patch]).then(function(t){return delete n.value,t})):$q.reject("Error: trying to add item to non-array")},removeItem:function(t,e,n,r){return value=t[e][n],patch=o.createPatch("remove",t,r,e,value),t[e].splice(n,1),o.addPatches(r,[patch])},createPatch:function(t,e,n,r,a){return void 0===n&&(n=e),pathLength=n._path_.length,path=e._path_.substring(pathLength),void 0!==r&&(path=path+"/"+r),void 0===a?{op:t,path:path}:{op:t,path:path,value:a}},addPatches:function(e,n){return Array.isArray(e._patchesCache_)||(e._patchesCache_=[]),e._patchesCache_=e._patchesCache_.concat(n),-1===i.indexOf(e)&&i.push(e),t.switchAutoSave?o.saveResource(e):(o.setResourceStatus(e,"warning"),e._showButtons_={save:!0,cancel:!0},$q.resolve(e))},checkRequired:function(){i.reduce(function(t,e,n,r){return t||e._patchesCache_.length},!1)},emptyUpdatedResources:function(){i=[]},initResourceMetaData:function(t){t._showButtons_={save:!1,cancel:!1},t._patchesCache_=[],o.setResourceStatus(t,"default")},processResponse:function(t,n){return a.updateNotifications(n.notifications),n.invariantRulesHold?(t._showButtons_={save:!1,cancel:!1},t._patchesCache_=[],o.setResourceStatus(t,"success"),e(function(){o.setResourceStatus(t,"default")},3e3)):(t._showButtons_={save:!1,cancel:!0},o.setResourceStatus(t,"danger")),t},setResourceStatus:function(t,e){return t._status_={warning:!1,danger:!1,default:!1,success:!1},t._status_[e]=!0,t},pendingPromises:function(t){return!!Array.isArray(t._loading_)&&t._loading_.some(function(t){return 0===t.$$state.status})}};return o}]),angular.module("AmpersandApp").controller("NavigationBarController",["$scope","$route","Restangular","$localStorage","$sessionStorage","$timeout","$location","NotificationService","RoleService","NavigationBarService",function(t,e,n,r,a,i,o,s,l,c){t.$storage=r,t.$sessionStorage=a,t.defaultSettings=c.defaultSettings,t.loadingNavBar=[],t.navbar=c.navbar,t.reload=function(){t.loadingNavBar=[],t.loadingNavBar.push(c.refreshNavBar()),e.reload()},t.toggleRole=function(e,n){l.toggleRole(e,n),t.loadingNavBar=[],t.loadingNavBar.push(l.setActiveRoles().then(function(t){c.refreshNavBar()}))},t.checkAllRules=s.checkAllRules,t.createNewResource=function(t,e){n.one("resource").all(t).post({},{}).then(function(t){o.url(e+"/"+t._id_)})},t.resetSettings=function(){angular.forEach(t.$storage.notificationPrefs,function(t,e,n){n[e]=!1}),t.$storage.switchAutoSave=!1,i(function(){t.resetNotificationSettings(),t.resetSwitchAutoSave()},500)},t.resetNotificationSettings=function(){t.$storage.notificationPrefs=angular.extend(t.$storage.notificationPrefs,t.defaultSettings.notifications)},t.resetSwitchAutoSave=function(){t.$storage.switchAutoSave=t.defaultSettings.switchAutoSave},t.loadingNavBar.push(c.refreshNavBar())}]).directive("myNavbarResize",["$window","$timeout","NavigationBarService",function(t,e,n){return function(n,r){var a=angular.element(t),i=function(){e(function(){for(;$("#navbar-interfaces").width()<$("#navbar-wrapper").width()-$("#navbar-options").width()&&$("#navbar-interfaces-dropdown-menu").children().length>0;)$("#navbar-interfaces-dropdown-menu").children().first().appendTo("#navbar-interfaces");for(;$("#navbar-interfaces").width()>$("#navbar-wrapper").width()-$("#navbar-options").width();)$("#navbar-interfaces").children().last().prependTo("#navbar-interfaces-dropdown-menu"),$("#navbar-interfaces-dropdown").toggleClass("hidden",$("#navbar-interfaces-dropdown-menu").children().length<=0);$("#navbar-interfaces-dropdown").toggleClass("hidden",$("#navbar-interfaces-dropdown-menu").children().length<=0)})};n.$watch("NavigationBarService.navbar",function(){i()}),a.bind("resize",function(){i()}),i()}}]),angular.module("AmpersandApp").service("NavigationBarService",["Restangular","$localStorage","$sessionStorage","NotificationService",function(t,e,n,r){let a={},i={};return{navbar:a,defaultSettings:i,refreshNavBar:function(){return t.one("app/navbar").get().then(function(t){t=t.plain(),angular.extend(a,t),n.session=t.session,n.sessionRoles=t.sessionRoles,n.sessionVars=t.sessionVars,angular.extend(i,t.defaultSettings),void 0===e.notificationPrefs&&$scope.resetNotificationSettings(),void 0===e.switchAutoSave&&$scope.resetSwitchAutoSave(),r.updateNotifications(t.notifications)},function(t){})}}}]),angular.module("AmpersandApp").service("RoleService",["$sessionStorage","Restangular",function(t,e){return RoleService={selectRole:function(t){RoleService.toggleRole(t,!0)},selectRoleByLabel:function(e){angular.forEach(t.sessionRoles,function(t){if(t.label==e)return RoleService.selectRole(t.id)})},toggleRole:function(e,n){angular.forEach(t.sessionRoles,function(t){t.id==e&&(t.active=void 0===n?!t.active:n)})},getActiveRoleIds:function(){var e=[];return angular.forEach(t.sessionRoles,function(t){!0===t.active&&e.push(t.id)}),e},deactivateAllRoles:function(){angular.forEach(t.sessionRoles,function(t){t.active=!1})},setActiveRoles:function(){return e.all("app/roles").patch(t.sessionRoles)}},RoleService}]),angular.module("AmpersandApp").service("NotificationService",["$localStorage","$sessionStorage","$timeout","Restangular",function(t,e,n,r){let a={signals:[],invariants:[],infos:[],successes:[],warnings:[],errors:[]},i={notifications:a,getNotifications:function(){return r.one("app/notifications").get().then(function(t){t=t.plain(),i.updateNotifications(t)},function(){i.addError("Something went wrong while getting notifications")})},checkAllRules:function(){return r.one("admin/ruleengine/evaluate/all").get().then(function(t){t=t.plain(),i.addSuccess("Evaluated all rules."),i.updateNotifications(t)},function(){i.addError("Something went wrong while evaluating all rules")})},updateNotifications:function(e){void 0!==e&&(a.signals=e.signals,a.invariants=e.invariants,a.infos=a.infos.concat(e.infos),a.successes=a.successes.concat(e.successes),a.warnings=a.warnings.concat(e.warnings),a.errors=a.errors.concat(e.errors),t.notificationPrefs.switchAutoHideSuccesses&&n(function(){a.successes=[]},3e3))},addSuccess:function(t){a.successes.push({message:t,count:1})},addError:function(t,e,n,r){e=void 0!==typeof e?e:null,n=void 0!==typeof n&&n,r=void 0!==typeof r&&r;let i=!1,o=a.errors;for(let a=0;a<o.length;a++)o[a].message==t&&(o[a].count+=1,o[a].code=e,o[a].persistent=n,o[a].details=r,i=!0);i||a.errors.push({message:t,code:e,count:1,persistent:n,details:r})},addWarning:function(t){let e=!1,n=a.warnings;for(var r=0;r<n.length;r++)n[r].message==t&&(n[r].count+=1,e=!0);e||a.warnings.push({message:t,count:1})},addInfo:function(t){let e=!1,n=a.infos;for(var r=0;r<n.length;r++)n[r].message==t&&(n[r].count+=1,e=!0);e||a.infos.push({message:t,count:1})}};return i}]),angular.module("AmpersandApp").controller("NotificationCenterController",["$scope","$route","Restangular","$localStorage","NotificationService",function(t,e,n,r,a){t.localStorage=r,t.notifications=a.notifications,t.$on("$routeChangeSuccess",function(){t.notifications.successes=[],t.notifications.errors=t.notifications.errors.filter(function(t){return!!t.persistent&&(t.persistent=!1,!0)}),t.notifications.warnings=[],t.notifications.infos=[],t.notifications.invariants=[]}),t.closeAlert=function(t,e){t.splice(e,1)}}]),angular.module("AmpersandApp").run(["$templateCache",function(t){t.put("app/src/admin/check-rules-menu-item.html",'<a ng-click="checkAllRules()"><span class="glyphicon glyphicon-check"></span><span> (Re)evaluate all rules</span></a>'),t.put("app/src/admin/execengine-menu-item.html",'<a ng-controller="ExecEngineController" href="" ng-click="run()">\r\n\t<span class="glyphicon glyphicon-cog"></span><span> Run execution engine</span>\r\n</a>'),t.put("app/src/admin/exporter-menu-item.html",'<a ng-href="api/v1/admin/export/all">\r\n    <span class="glyphicon glyphicon-download"></span><span> Population export</span>\r\n</a>'),t.put("app/src/admin/installer-menu-item.html",'<a href="#/admin/installer">\r\n    <span class="glyphicon glyphicon-trash"></span><span> Reinstall database</span>\r\n</a>'),t.put("app/src/admin/installer.html",'<div class="container-fluid" id="Interface">\r\n    <div class="jumbotron">\r\n        <h1>Installer</h1>\r\n        <p>This action will reinstall the application and delete all content.</p>\r\n        <p>If provided, the initial population will be installed.</p>\r\n        <div class="btn-group">\r\n            <button type="button" ng-click="install(true)" class="btn btn-lg" ng-class="{\'btn-danger\' : (!installing && !installed), \'btn-warning\' : installing, \'btn-success\' : installed}" ng-disabled="installing">\r\n                <span ng-if="!installed && ! installing">Reinstall application  </span>\r\n                <span ng-if="installing">Application installing  </span>\r\n                <span ng-if="installed">Application reinstalled  </span>\r\n                <img ng-if="installing" ng-src="app/images/loading.gif" style="height:20px;"/>\r\n            </button>\r\n            <button type="button" class="btn btn-lg dropdown-toggle" ng-class="{\'btn-danger\' : (!installing && !installed), \'btn-warning\' : installing, \'btn-success\' : installed}" ng-disabled="installing" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\r\n                <span class="caret"></span>\r\n            </button>\r\n            <ul class="dropdown-menu">\r\n                <li><a href="" ng-click="install(true)">Reinstall application</a></li>\r\n                <li><a href="" ng-click="install(false)">Reinstall application (without default population)</a></li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>'),t.put("app/src/importer/importer.html",'<style>\r\n.my-drop-zone { \r\nborder: dotted 3px lightgray;\r\n}\r\n\r\n/* Default class applied to drop zones on over */\r\n.nv-file-over {\r\n\tborder: dotted 3px red;\r\n}\r\n\r\n.another-file-over-class {\r\n\tborder: dotted 3px green;\r\n}\r\n</style>\r\n<div class="container-fluid interface">\r\n\t<fieldset>\r\n\t\t<legend>Population importer</legend>\r\n\t\t<div class="row">\r\n\t\t\t<div class="col-md-3" nv-file-drop="" uploader="uploader">\r\n\t\t\t\t<h3>Select files</h3>\r\n\t\t\t\t\r\n\t\t\t\t<div ng-show="uploader.isHTML5">\r\n\t\t\t\t\x3c!-- 3. nv-file-over uploader="link" over-class="className" --\x3e\r\n\t\t\t\t\t<div class="well my-drop-zone" nv-file-over="" uploader="uploader">\r\n\t\t\t\t\t\tBase drop zone\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t\x3c!-- Example: nv-file-select="" uploader="{Object}" options="{Object}" filters="{String}" --\x3e\r\n\t\t\t\tMultiple\r\n\t\t\t\t<input type="file" nv-file-select="" uploader="uploader" multiple  /><br/>\r\n\t\t\t\t\r\n\t\t\t\tSingle\r\n\t\t\t\t<input type="file" nv-file-select="" uploader="uploader" />\r\n\t\t\t</div>\t\r\n\t\t\t\r\n\t\t\t<div class="col-md-9" style="margin-bottom: 40px">\r\n\t\r\n\t\t\t\t<h3>Upload queue</h3>\r\n\t\t\t\t<p>Queue length: {{ uploader.queue.length }}</p>\r\n\t\t\t\t\r\n\t\t\t\t<table class="table">\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th width="50%">Name</th>\r\n\t\t\t\t\t\t\t<th ng-show="uploader.isHTML5">Size</th>\r\n\t\t\t\t\t\t\t<th ng-show="uploader.isHTML5">Progress</th>\r\n\t\t\t\t\t\t\t<th>Status</th>\r\n\t\t\t\t\t\t\t<th>Actions</th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t<tr ng-repeat="item in uploader.queue">\r\n\t\t\t\t\t\t\t<td><strong>{{ item.file.name }}</strong></td>\r\n\t\t\t\t\t\t\t<td ng-show="uploader.isHTML5" nowrap>{{ item.file.size/1024/1024|number:2 }} MB</td>\r\n\t\t\t\t\t\t\t<td ng-show="uploader.isHTML5">\r\n\t\t\t\t\t\t\t\t<div class="progress" style="margin-bottom: 0;">\r\n\t\t\t\t\t\t\t\t\t<div class="progress-bar" role="progressbar" ng-style="{ \'width\': item.progress + \'%\' }"></div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t<td class="text-center">\r\n\t\t\t\t\t\t\t\t<span ng-show="item.isSuccess"><i class="glyphicon glyphicon-ok"></i></span>\r\n\t\t\t\t\t\t\t\t<span ng-show="item.isCancel"><i class="glyphicon glyphicon-ban-circle"></i></span>\r\n\t\t\t\t\t\t\t\t<span ng-show="item.isError"><i class="glyphicon glyphicon-remove"></i></span>\r\n\t\t\t\t\t\t\t\t<span ng-show="item.isUploading"><img src="app/images/loading.gif" height="20" width="20"></span>\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t<td nowrap>\r\n\t\t\t\t\t\t\t\t<button type="button" class="btn btn-success btn-xs" ng-click="item.upload()" ng-disabled="item.isReady || item.isUploading">  \x3c!-- Removed: "|| item.isSuccess" to enable the re-upload of a file.--\x3e\r\n\t\t\t\t\t\t\t\t\t<span class="glyphicon glyphicon-upload"></span> Upload\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button type="button" class="btn btn-warning btn-xs" ng-click="item.cancel()" ng-disabled="!item.isUploading">\r\n\t\t\t\t\t\t\t\t\t<span class="glyphicon glyphicon-ban-circle"></span> Cancel\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button type="button" class="btn btn-danger btn-xs" ng-click="item.remove()">\r\n\t\t\t\t\t\t\t\t\t<span class="glyphicon glyphicon-trash"></span> Remove\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t\t\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\tQueue progress:\r\n\t\t\t\t\t\t<div class="progress">\r\n\t\t\t\t\t\t\t<div class="progress-bar" role="progressbar" ng-style="{ \'width\': uploader.progress + \'%\' }"></div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<button type="button" class="btn btn-success btn-sm" ng-click="uploader.uploadAll()" ng-disabled="!uploader.getNotUploadedItems().length">\r\n\t\t\t\t\t\t<span class="glyphicon glyphicon-upload"></span> Upload all\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button type="button" class="btn btn-warning btn-sm" ng-click="uploader.cancelAll()" ng-disabled="!uploader.isUploading">\r\n\t\t\t\t\t\t<span class="glyphicon glyphicon-ban-circle"></span> Cancel all\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button type="button" class="btn btn-danger btn-sm" ng-click="uploader.clearQueue()" ng-disabled="!uploader.queue.length">\r\n\t\t\t\t\t\t<span class="glyphicon glyphicon-trash"></span> Remove all\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\t\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</fieldset>\r\n</div>'),t.put("app/src/importer/menu-item.html",'<a ng-href="#/ext/importer/">\r\n    <span class="glyphicon glyphicon-upload"></span><span> Population importer</span>\r\n</a>'),t.put("app/src/navbar/navigationBar.html",'<nav class="navbar navbar-default" role="navigation" ng-controller="NavigationBarController" cg-busy="{promise:loadingNavBar}">\r\n    <div id="navbar-wrapper" class="container">\r\n        <ul class="nav navbar-nav" id="navbar-interfaces" my-navbar-resize>\r\n            <li><a href="#/"><span class="glyphicon glyphicon-home"></span></a></li>\r\n            <li id="navbar-interfaces-dropdown" class="dropdown" uib-tooltip="More interfaces" tooltip-trigger="mouseenter" tooltip-placement="top">\r\n                <a href="" class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-menu-hamburger"></span></a>\r\n                <ul id="navbar-interfaces-dropdown-menu" class="dropdown-menu" role="menu"></ul>\r\n            </li>\r\n            <li id="{{interface.label}}" ng-repeat="interface in navbar.top"> \x3c!-- the interface id is there so we can style specific menu items with css --\x3e\r\n                <a href="#/{{interface.id}}">\r\n                    <span class="glyphicon glyphicon-list-alt"></span> {{interface.label}}</a>\r\n            </li>\r\n        </ul>\r\n        <ul class="nav navbar-nav navbar-right" id="navbar-options">\r\n            \x3c!-- hidden on extra small devices, e.g. phone (<768px) --\x3e\r\n            <li class="dropdown hidden-xs" uib-tooltip="Show/hide notifications" tooltip-trigger="mouseenter" tooltip-placement="left">\r\n                <a href="" class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-bullhorn"></span></a>\r\n                <ul class="dropdown-menu" role="menu" ng-click="$event.stopPropagation();">\r\n                    <li class="dropdown-header">Transaction settings</li>\r\n                        <li><switch ng-model="$storage.notificationPrefs.switchShowSignals"> Show signals</switch></li>\r\n                        <li><switch ng-model="$storage.notificationPrefs.switchShowInvariants"> Show invariants</switch></li>\r\n                        <li><switch ng-model="$storage.switchAutoSave"> Auto save changes</switch></li>\r\n                    <li class="dropdown-header">User logs</li>\r\n                        <li><switch ng-model="$storage.notificationPrefs.switchShowErrors"> Show errors</switch></li>\r\n                        <li><switch ng-model="$storage.notificationPrefs.switchShowWarnings"> Show warnings</switch></li>\r\n                        <li><switch ng-model="$storage.notificationPrefs.switchShowInfos"> Show infos</switch></li>\r\n                        <li><switch ng-model="$storage.notificationPrefs.switchShowSuccesses"> Show successes</switch></li>\r\n                        <li><switch ng-model="$storage.notificationPrefs.switchAutoHideSuccesses"> Auto hide successes</switch></li>\r\n                    <li class="divider" role="presentation"></li>\r\n                        <li><a href="" ng-click="resetSettings();"><span class="glyphicon glyphicon-repeat" style="margin: 4px; width: 30px;"></span> Default settings</a></li>\r\n                </ul>\r\n            </li>\r\n            \r\n            \x3c!-- hidden on extra small devices, e.g. phone (<768px) --\x3e\r\n            <li class="dropdown hidden-xs" uib-tooltip="Refresh/reset options" tooltip-trigger="mouseenter" tooltip-placement="top">\r\n                <a href="" class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-refresh"></span></a>\r\n                <ul class="dropdown-menu" role="menu">\r\n                    <li><a href="" ng-click="reload()"><span class="glyphicon glyphicon-refresh"></span> Refresh page</a></li>\r\n                    <li ng-if="navbar.refreshMenu.length" class="divider" role="presentation"></li>\r\n                    <li ng-repeat="app in navbar.refreshMenu" ng-include="app.url"/>\r\n                </ul>\r\n            </li>\r\n            \r\n            \x3c!-- hidden on extra small devices, e.g. phone (<768px) --\x3e\r\n            <li ng-if="navbar.extMenu.length" class="dropdown hidden-xs" uib-tooltip="Select application extensions" tooltip-trigger="mouseenter" tooltip-placement="top">\r\n                <a href="" class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-th"></span></a>\r\n                <ul class="dropdown-menu" role="menu">\r\n                    <li ng-repeat="ext in navbar.extMenu" ng-include="ext.url"/>\r\n                    \x3c!-- <li class="divider" role="presentation"></li>--\x3e                    \r\n                </ul>\r\n            </li>\r\n            \r\n            \x3c!-- hidden on extra small devices, e.g. phone (<768px) --\x3e\r\n            <li ng-if="navbar.new.length" class="dropdown hidden-xs" uib-tooltip="Create new resource" tooltip-trigger="mouseenter" tooltip-placement="top">\r\n                <a href="" class="dropdown-toggle" data-toggle="dropdown">\r\n                    <span class="glyphicon glyphicon-plus"></span>\r\n                </a>\r\n                <ul class="dropdown-menu" role="menu">\r\n                    <li ng-repeat="item in navbar.new" ng-class="{\'dropdown-submenu\' : item.ifcs.length > 1}">\r\n                        \x3c!--<a  style="position:relative; display:inline-block;">--\x3e\r\n                        <a ng-if="item.ifcs.length > 1" tabindex="-1" href="#">{{item.label}}</a>\r\n                        <ul ng-if="item.ifcs.length > 1" class="dropdown-menu" role="menu">\r\n                            <li ng-repeat="ifc in item.ifcs">\r\n                                <a tabindex="-1" href="#" ng-click="createNewResource(ifc.resourceType, ifc.link);">{{ifc.label}}</a>\r\n                            </li>\r\n                        </ul>\r\n                        \r\n                        <a ng-if="item.ifcs.length == 1" href="" ng-click="createNewResource(item.ifcs[0].resourceType, item.ifcs[0].link);">{{item.label}}</a>\r\n                        <span ng-if="item.ifcs.length == 0">{{item.label}}</span>\r\n                    </li>\r\n                </ul>\r\n            </li>\r\n            \r\n            <li ng-if="$sessionStorage.sessionRoles.length || navbar.roleMenu.length" class="dropdown" uib-tooltip="Switch roles" tooltip-trigger="mouseenter" tooltip-placement="top">\r\n                <a href="" class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-user"></span></a>\r\n                <ul class="dropdown-menu" role="menu">\r\n                    <li ng-repeat="role in $sessionStorage.sessionRoles" ng-click="$event.stopPropagation();"><switch ng-model="role.active" ng-click="toggleRole(role.id);"> {{role.label}}</switch></li>\r\n                    <li ng-if="navbar.roleMenu.length && $sessionStorage.sessionRoles.length" class="divider" role="presentation"></li>\r\n                    <li ng-repeat="ext in navbar.roleMenu" ng-include="ext.url"/>\r\n                </ul>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</nav>'),t.put("app/src/notifications/notificationCenter.html",'<div class="container-fluid">\r\n    <div id="notificationCenter" ng-controller="NotificationCenterController">\r\n        \r\n        <div id="infos" ng-show="localStorage.notificationPrefs.switchShowInfos">\r\n            <div class="alert alert-info alert-dismissible" role="alert" ng-repeat="info in notifications.infos">\r\n                <button type="button" class="close" data-dismiss="alert" aria-label="Close" ng-click="closeAlert(notifications.infos, $index);"><span aria-hidden="true">&times;</span></button>\r\n                <span class="glyphicon glyphicon-info-sign"></span><span> {{info.message}}</span>\r\n            </div>\r\n        </div>\r\n        \r\n        <div id="warnings" ng-show="localStorage.notificationPrefs.switchShowWarnings">\r\n            <div class="alert alert-warning alert-dismissible" role="alert" ng-repeat="warning in notifications.warnings">\r\n                <button type="button" class="close" data-dismiss="alert" aria-label="Close" ng-click="closeAlert(notifications.warnings, $index);"><span aria-hidden="true">&times;</span></button>\r\n                <span class="glyphicon glyphicon-warning-sign"></span><span> {{warning.message}}</span>\r\n                <span class="badge pull-right" ng-show="warning.count > 1">{{warning.count}}</span>\r\n            </div>\r\n        </div>\r\n        \r\n        <div id="errors" ng-show="localStorage.notificationPrefs.switchShowErrors">\r\n            <div class="panel panel-danger" id="error-panel-{{key}}" ng-repeat="(key, error) in notifications.errors">\r\n                <div class="panel-heading btn btn-block" data-toggle="collapse" data-target="#error-body-{{key}}">\r\n                    <div class="text-left">\r\n                        <span class="glyphicon glyphicon-exclamation-sign"></span> <span ng-bind-html="error.message | unsafe"></span>\r\n                        <button type="button" class="close" data-target="#error-panel-{{key}}" data-dismiss="alert" aria-label="Dismiss" ng-click="closeAlert(notifications.errors, $index);">\r\n                            <span aria-hidden="true">&times;</span>\r\n                        </button>\r\n                        <span class="badge pull-right" ng-show="error.count > 1">{{error.count}}</span>\r\n                    </div>\r\n                </div>\r\n                <div class="panel-body collapse" id="error-body-{{key}}">\r\n                    <div ng-if="error.details" ng-bind-html="error.details | unsafe"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \r\n        <div id="invariants" ng-show="localStorage.notificationPrefs.switchShowInvariants">\r\n            <div class="panel panel-danger" ng-repeat="(key, val) in notifications.invariants">\r\n                <div class="panel-heading btn btn-block" data-toggle="collapse" data-target="#invariant-{{key}}">\r\n                    <div class="text-left" style="display:flex; align-items:center;">\r\n                        <span class="glyphicon glyphicon-warning-sign"></span>\r\n                        <div marked="val.ruleMessage" style="display:inline-block; margin: 0px 10px;"></div> \x3c!-- uses angular-marked directive --\x3e\r\n                        <span class="badge" style="margin-left:auto;">{{val.tuples.length}}</span>\r\n                    </div>\r\n                </div>\r\n                <ul class="list-group collapse" id="invariant-{{key}}">\r\n                    <li class="list-group-item" ng-repeat="tuple in val.tuples track by $index">\r\n                        <span>{{tuple.violationMessage}}</span>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n                    \r\n        <div id="signals" ng-show="localStorage.notificationPrefs.switchShowSignals">\r\n            <div class="panel panel-warning" ng-repeat="(key, val) in notifications.signals">\r\n                <div class="panel-heading btn btn-block" data-toggle="collapse" data-target="#violation-{{key}}">\r\n                    <div class="text-left" style="display:flex; align-items:center;">\r\n                        <span class="glyphicon glyphicon-warning-sign"></span>\r\n                        <div marked="val.message" style="display:inline-block; margin: 0px 10px;"></div> \x3c!-- uses angular-marked directive --\x3e\r\n                        <span class="badge" style="margin-left:auto;">{{val.violations.length}}</span>\r\n                    </div>\r\n                </div>\r\n                <ul class="list-group collapse" id="violation-{{key}}">\r\n                    <li class="dropdown list-group-item" ng-repeat="violation in val.violations track by $index">\r\n                        <div ng-if="violation.ifcs.length > 1">\r\n                            <a href="" class="dropdown-toggle" data-toggle="dropdown">{{violation.message}}</a>\r\n                            <ul class="dropdown-menu" role="menu">\r\n                                <li ng-repeat="ifc in violation.ifcs">\r\n                                    <a ng-href="{{ifc.link}}" data-toggle="collapse" data-target="#violation-{{key}}"><small>View</small> {{ifc.label}}</a>\r\n                                </li>\r\n                            </ul>\r\n                        </div>\r\n                        <a ng-if="violation.ifcs.length == 1" ng-href="{{violation.ifcs[0].link}}" data-toggle="collapse" data-target="#violation-{{key}}">{{violation.message}}</a>\r\n                        <span ng-if="violation.ifcs.length == 0">{{violation.message}}</span>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        \r\n        \x3c!-- Success notifications must be last in notifications center because of position:absolute --\x3e\r\n        <div id="successes" ng-show="localStorage.notificationPrefs.switchShowSuccesses">\r\n            <div class="alert alert-success alert-dismissible" role="alert" ng-repeat="success in notifications.successes">\r\n                <button type="button" class="close" data-dismiss="alert" aria-label="Close" ng-click="closeAlert(notifications.successes, $index);"><span aria-hidden="true">&times;</span></button>\r\n                <span class="glyphicon glyphicon-ok-sign"></span><span> {{success.message}}</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'),t.put("app/src/shared/404.html",'\x3c!-- 404 page --\x3e\r\n<div class="container-fluid" id="Interface">\r\n    <div class="row">\r\n        <div class="col-md-4">\r\n            <h1>404 Page not found</h1>\r\n            <p>The requested page does not exists.</p>\r\n            <p><a class="btn btn-primary btn-lg" href="#/" role="button">Goto startpage</a></p>\r\n        </div>\r\n        <div>\r\n            <img src="app/images/404-image.png">\r\n        </div>\r\n    </div>\r\n</div>'),t.put("app/src/shared/home.html",'\x3c!-- Home screen --\x3e\r\n<div class="container-fluid" id="Interface">\r\n    <div class="jumbotron">\r\n        <h1>Hello, world!</h1>\r\n        <p>You\'ve successfully generated your Ampersand prototype.</p>\r\n        <p><a class="btn btn-primary btn-lg" href="https://ampersandtarski.gitbooks.io/documentation" target="_blank" role="button">See our documentation &raquo;</a></p>\r\n    </div>\r\n</div>\r\n'),t.put("app/src/shared/partials/loading.html",'<img src="app/images/loading.gif" alt="Loading..." style="height:20px;"/>'),t.put("app/src/shared/partials/myNavToInterfaces.html",'<div ng-if="resource._ifcs_.length > 1" style="position:relative; display:inline-block;">\r\n    <a class="dropdown-toggle" data-toggle="dropdown"><ng-transclude></ng-transclude></a>\r\n    <ul class="dropdown-menu" role="menu">\r\n        <li ng-repeat="ifc in resource._ifcs_">\r\n            <a ng-href="#/{{ifc.id}}/{{resource._id_}}" target="{{target}}">{{ifc.label}}</a>\r\n        </li>\r\n    </ul>\r\n</div>\r\n<a ng-if="resource._ifcs_.length == 1" ng-href="#/{{resource._ifcs_[0].id}}/{{resource._id_}}" target="{{target}}"><ng-transclude></ng-transclude></a>\r\n<span ng-if="resource._ifcs_.length == 0"><ng-transclude></ng-transclude></span>'),t.put("app/src/shared/partials/myNavToOtherInterfaces.html",'\x3c!-- Only when ifcs has more than 1 interface, otherwise, the user is already there --\x3e\r\n\x3c!-- This menu includes the interface where the user currently is --\x3e\r\n<div ng-if="resource._ifcs_.length > 1" style="position:relative;">\r\n    <button type="button" class="btn btn-sm dropdown-toggle" data-toggle="dropdown">\r\n        <span class="glyphicon glyphicon-menu-hamburger"></span>\r\n    </button>\r\n    <ul class="dropdown-menu dropdown-menu-right" role="menu">\r\n        <li ng-repeat="ifc in resource._ifcs_">\r\n            <a ng-href="#/{{ifc.id}}/{{resource._id_}}" target="{{target}}">{{ifc.label}}</a>\r\n        </li>\r\n    </ul>\r\n</div>')}]);
//# sourceMappingURL=ampersand.min.js.map
