angular.module("AmpersandApp",["ngResource","ngRoute","ngSanitize","restangular","ui.bootstrap","uiSwitch","cgBusy","siTable","ui.codemirror","ngStorage","angularFileUpload","ui.bootstrap.datetimepicker","hc.marked"]).config(["$routeProvider","$locationProvider",function(e,t){e.when("/",{controller:"",templateUrl:"app/src/shared/home.html",interfaceLabel:"Home"}).when("/admin/installer",{controller:"InstallerController",templateUrl:"app/src/admin/installer.html",interfaceLabel:"Installer"}).when("/404",{templateUrl:"app/src/shared/404.html",interfaceLabel:"404"}).otherwise({redirectTo:"/404"}),t.hashPrefix("")}]).config(["RestangularProvider",function(e){e.setBaseUrl("api/v1"),e.setDefaultHeaders({"Content-Type":"application/json"})}]).run(["Restangular","$rootScope","$location","$route","NotificationService","RoleService","NavigationBarService",function(e,t,n,a,r,i,o){e.addFullRequestInterceptor(function(e,t,n,a,r,i){return i}),e.addResponseInterceptor(function(e,t,a,r,i,s){return"get"!=t&&"getList"!=t&&e.sessionRefreshAdvice&&o.refreshNavBar(),null!=(e||{}).navTo&&n.url(e.navTo),e}),e.setErrorInterceptor(function(e,t,a){var o,s;return 401==e.status&&(i.deactivateAllRoles(),n.path("ext/Login")),"object"==typeof e.data?(404==e.data.error?r.addInfo(e.data.msg||"Resource not found"):(o=e.data.msg||e.statusText,r.addError(o,e.status,!0,e.data.html)),void 0!==e.data.notifications&&r.updateNotifications(e.data.notifications)):(o=e.status+" "+e.statusText,s=e.data,r.addError(o,e.status,!0,s)),!0}),t.getCurrentDateTime=function(){return new Date};var s=n.url;n.url=function(e,r){if(!1===r)var i=a.current,o=t.$on("$locationChangeSuccess",function(){a.current=i,o()});return s.apply(n,[e])}}]),angular.module("AmpersandApp").controller("ExecEngineController",["$scope","Restangular","NotificationService",function(e,t,n){e.run=function(){t.one("admin/execengine/run").get().then(function(e){e=e.plain(),n.updateNotifications(e)})}}]),angular.module("AmpersandApp").controller("InstallerController",["$scope","Restangular","NotificationService","RoleService",function(e,t,n,a){e.installing=!1,e.installed=!1,e.install=function(r){e.installing=!0,e.installed=!1,t.one("admin/installer").get({defaultPop:r}).then(function(t){t=t.plain(),n.updateNotifications(t),a.deactivateAllRoles(),e.installing=!1,e.installed=!0},function(){e.installing=!1,e.installed=!1})}}]),angular.module("uiSwitch",[]).directive("switch",function(){return{restrict:"AE",replace:!0,transclude:!0,template:function(e,t){var n="";return n+='<a href=""',n+=t.ngModel&&!t.ngClick?' ng-click="'+t.ngModel+"=!"+t.ngModel+'"':"",n+=">",n+="<span",n+=' class="switch'+(t.class?" "+t.class:"")+'"',n+=' ng-class="{ checked:'+t.ngModel+' }"',n+=">",n+="<small></small>",n+="</span>",n+="<span ng-transclude></span>",n+="</a>"}}});var app=angular.module("AmpersandApp");app.requires[app.requires.length]="angularFileUpload",app.config(["$routeProvider",function(e){e.when("/ext/importer",{controller:"PopulationImportController",templateUrl:"app/src/importer/importer.html",interfaceLabel:"Population importer"})}]).service("ImportService",["FileUploader","NotificationService",function(e,t){let n=new e({url:"api/v1/admin/import"});return n.onSuccessItem=function(e,n,a,r){t.updateNotifications(n.notifications)},n.onErrorItem=function(e,n,a,r){let i,o;"object"==typeof n?(i=n.msg||"Error while importing",t.addError(i,a,!0),void 0!==n.notifications&&t.updateNotifications(n.notifications)):(i=a+" Error while importing",o=n,t.addError(i,a,!0,o))},{uploader:n}}]).controller("PopulationImportController",["$scope","ImportService",function(e,t){e.uploader=t.uploader}]),angular.module("AmpersandApp").controller("AtomicController",["$scope","ResourceService",function(e,t){e.selected={},e.saveItem=t.saveItem,e.addItem=t.addItem,e.removeItem=t.removeItem,e.remove=t.removeResource,e.delete=t.deleteResource}]),angular.module("AmpersandApp").controller("AtomicDateController",["$scope","ResourceService",function(e,t){function n(e){var t=String(e);return 1===t.length&&(t="0"+t),t}function a(e){null!==e&&(e.toJSON=function(){return this.getUTCFullYear()+"-"+n(this.getMonth()+1)+"-"+n(this.getDate())})}e.isOpen=!1,e.openDatepicker=function(t){t.preventDefault(),t.stopPropagation(),e.isOpen=!0},e.selected={value:""},e.saveDateItem=function(e,n,r){a(e[n]),t.saveItem(e,n,r)},e.addDateItem=function(e,n,r,i){""!==r.value?(a(r.value),t.addItem(e,n,r,i)):console.log("Empty date selected")}}]),angular.module("AmpersandApp").controller("AtomicTypeAheadController",["$scope","Restangular","ResourceService",function(e,t,n){e.selected={},e.hasNoResults=!1,e.getTypeahead=function(n,a){a=void 0!==a&&a,(void 0===e.typeahead[n]||a)&&(e.typeahead[n]=t.all("resource/"+n).getList().$object)},e.typeaheadOnSelect=function(t,a,r,i,o,s){void 0===t._id_?console.log("Resource id undefined"):""===t._id_?console.log("Empty resource id provided"):(Array.isArray(i[o])?(patch=n.createPatch("add",i,s,o,t._id_),n.addPatches(s,[patch]).then(function(e){e.saved||i[o].push(angular.copy(t))})):null===i[o]?(patch=n.createPatch("replace",i,s,o,t._id_),n.addPatches(s,[patch]).then(function(e){e.saved||(i[o]=angular.copy(t))})):console.log("Error: Property already set and/or not defined"),e.hasNoResults=!1),e.selected.value=""},e.typeAheadCreate=function(t,a,r,i,o){Array.isArray(t[a])?n.addItem(t,a,r,i).then(function(){e.getTypeahead(o,!0)}):null===t[a]?(t[a]=r.value,n.saveItem(t,a,i)):console.log("Error: Property already set and/or not defined")}}]),angular.module("AmpersandApp").controller("AtomicUploadFileController",["$scope","FileUploader","NotificationService",function(e,t,n){e.FileUploader=new t({alias:"file",formData:[],removeAfterUpload:!0,autoUpload:!0}),e.FileUploader.onSuccessItem=function(e,t,a,r){n.updateNotifications(t.notifications),newResource=t.content,Array.isArray(e.resource[e.ifc])?e.resource[e.ifc].splice(-1,0,newResource):e.resource[e.ifc]=newResource},e.FileUploader.onErrorItem=function(e,t,a,r){n.addError(t.msg,t.error,!0,t.html),n.updateNotifications(t.notifications)}}]),angular.module("AmpersandApp").controller("BoxController",["$scope","ResourceService",function(e,t){e.createResource=t.createResource,e.save=t.saveResource,e.cancel=t.cancelResource,e.remove=t.removeResource,e.delete=t.deleteResource}]),angular.module("AmpersandApp").controller("InterfaceController",["$scope","$location","ResourceService",function(e,t,n){e.typeahead={},e.$on("$locationChangeStart",function(e,t,a){n.checkRequired()&&(confirmed=confirm("You have unsaved edits. Do you wish to leave?"),e&&!confirmed?e.preventDefault():e&&confirmed?n.emptyUpdatedResources():console.log("Someting went wrong. Cannot determine action after locationChangeStart"))}),e.newResource=function(){t.url("/"+ifcName+"?new")},e.pendingPromises=n.pendingPromises}]),angular.module("AmpersandApp").directive("myBluronenter",function(){return function(e,t,n){t.bind("keydown keypress",function(e){13===e.which&&(e.target.blur(),e.preventDefault())})}}),angular.module("AmpersandApp").directive("myShowonhoverBox",function(){return{link:function(e,t,n){t.closest(".box").hasClass("my-showonhover-box-show")||t.hide(),t.closest(".box").bind("mouseenter",function(){t.closest(".box").addClass("my-showonhover-box-show"),t.show()}),t.closest(".box").bind("mouseleave",function(){t.closest(".box").removeClass("my-showonhover-box-show"),t.hide()})}}}),angular.module("AmpersandApp").service("ResourceService",["$localStorage","$timeout","$location","Restangular","NotificationService","$q",function(e,t,n,a,r,i){let o=[],s={getResource:function(e,t,n){return promise=a.one(e._path_+"/"+t).get().then(function(n){try{n=n.plain()}catch(e){}return $.isEmptyObject(n)?r.addInfo("No results found"):null===e[t]||Array.isArray(e[t])?e[t]=n:angular.extend(e[t],n),s.initResourceMetaData(e),e}),Array.isArray(n._loading_)||(n._loading_=[]),n._loading_.push(promise),promise},saveResource:function(e){return promise=a.one(e._path_).patch(e._patchesCache_,{}).then(function(t){return(t=t.plain()).isCommitted&&(e._isRoot_&&null==t.navTo?e.get():e=angular.extend(e,t.content)),s.processResponse(e,t),{resource:e,saved:!0}}),Array.isArray(e._loading_)||(e._loading_=[]),e._loading_.push(promise),promise},cancelResource:function(e){return promise=a.one(e._path_).get().then(function(t){return t=t.plain(),$.isEmptyObject(t)?r.addInfo("No results found"):angular.extend(e,t),r.getNotifications(),s.initResourceMetaData(e),e}),Array.isArray(e._loading_)||(e._loading_=[]),e._loading_.push(promise),promise},createResource:function(e,t,r,i){return promise=a.one(e._path_).all(t).post({},{}).then(function(a){return a=a.plain(),newResource=a.content,s.processResponse(newResource,a),Array.isArray(e[t])?("undefined"===i&&(i=e[t].length),e[t].splice(i,0,newResource)):e[t]=newResource,e._isRoot_&&"_NEW"==e._id_&&n.url("/"+t+"/"+newResource._id_,!1),newResource}),Array.isArray(r._loading_)||(r._loading_=[]),r._loading_.push(promise),promise},removeResource:function(e,t,n,a){return patch=s.createPatch("remove",n,a),s.addPatches(a,[patch]).then(function(a){a.saved||(Array.isArray(e[t])?e[t].splice(e[t].indexOf(n),1):e[t]=null)})},deleteResource:function(e,t,n){if(confirm("Are you sure?"))return promise=a.one(n._path_).remove({}).then(function(a){return a=a.plain(),r.updateNotifications(a.notifications),Array.isArray(e[t])?e[t].splice(e[t].indexOf(n),1):e[t]=null,e}),Array.isArray(n._loading_)||(n._loading_=[]),n._loading_.push(promise),promise},saveItem:function(e,t,n){return void 0===e[t]||""===e[t]?value=null:value=e[t],patch=s.createPatch("replace",e,n,t,value),s.addPatches(n,[patch])},addItem:function(e,t,n,a){return void 0===n.value?i.reject("Value undefined"):""===n.value?i.reject("Empty value selected"):Array.isArray(e[t])?(e[t].push(n.value),patch=s.createPatch("add",e,a,t,n.value),s.addPatches(a,[patch]).then(function(e){return delete n.value,e})):i.reject("Error: trying to add item to non-array")},removeItem:function(e,t,n,a){return value=e[t][n],patch=s.createPatch("remove",e,a,t,value),e[t].splice(n,1),s.addPatches(a,[patch])},createPatch:function(e,t,n,a,r){return void 0===n&&(n=t),pathLength=n._path_.length,path=t._path_.substring(pathLength),void 0!==a&&(path=path+"/"+a),void 0===r?{op:e,path:path}:{op:e,path:path,value:r}},addPatches:function(t,n){return Array.isArray(t._patchesCache_)||(t._patchesCache_=[]),t._patchesCache_=t._patchesCache_.concat(n),-1===o.indexOf(t)&&o.push(t),e.autoSave?s.saveResource(t):(s.setResourceStatus(t,"warning"),t._showButtons_={save:!0,cancel:!0},i.resolve({resource:t,saved:!1}))},checkRequired:function(){return o.reduce(function(e,t,n,a){return e||t._patchesCache_.length},!1)},emptyUpdatedResources:function(){o=[]},initResourceMetaData:function(e){e._showButtons_={save:!1,cancel:!1},e._patchesCache_=[],s.setResourceStatus(e,"default")},processResponse:function(e,n){return r.updateNotifications(n.notifications),n.isCommitted?(e._showButtons_={save:!1,cancel:!1},e._patchesCache_=[],s.setResourceStatus(e,"success"),t(function(){s.setResourceStatus(e,"default")},3e3)):(e._showButtons_={save:!1,cancel:!0},s.setResourceStatus(e,"danger")),e},setResourceStatus:function(e,t){return e._status_={warning:!1,danger:!1,default:!1,success:!1},e._status_[t]=!0,e},pendingPromises:function(e){return!!Array.isArray(e._loading_)&&e._loading_.some(function(e){return 0===e.$$state.status})}};return s}]),angular.module("AmpersandApp").directive("myNavbarResize",["$window","$timeout","NavigationBarService",function(e,t,n){return function(a,r){var i=angular.element(e),o=function(){t(function(){for(;$("#navbar-interfaces").width()<$("#navbar-wrapper").width()-$("#navbar-options").width()&&$("#navbar-interfaces-dropdown-menu").children().length>0;)$("#navbar-interfaces-dropdown-menu").children().first().appendTo("#navbar-interfaces");for(;$("#navbar-interfaces").width()>$("#navbar-wrapper").width()-$("#navbar-options").width();)$("#navbar-interfaces").children().last().prependTo("#navbar-interfaces-dropdown-menu"),$("#navbar-interfaces-dropdown").toggleClass("hidden",$("#navbar-interfaces-dropdown-menu").children().length<=0);$("#navbar-interfaces-dropdown").toggleClass("hidden",$("#navbar-interfaces-dropdown-menu").children().length<=0)})};n.addObserverCallable(o),i.bind("resize",function(){o()}),angular.element(document).ready(function(){o()})}}]),angular.module("AmpersandApp").controller("NavigationBarController",["$scope","$route","Restangular","$localStorage","$sessionStorage","$location","NotificationService","RoleService","NavigationBarService",function(e,t,n,a,r,i,o,s,l){e.localStorage=a,e.sessionStorage=r,e.loadingNavBar=[],e.navbar=l.navbar,e.resetSettingsToDefault=l.resetSettingsToDefault,e.reload=function(){e.loadingNavBar=[],e.loadingNavBar.push(l.refreshNavBar()),t.reload()},e.toggleRole=function(t,n){s.toggleRole(t,n),e.loadingNavBar=[],e.loadingNavBar.push(s.setActiveRoles().then(function(e){l.refreshNavBar()}))},e.checkAllRules=o.checkAllRules,e.createNewResource=function(e,t){n.one("resource").all(e).post({},{}).then(function(e){i.url(t+"/"+e._id_)})},e.loadingNavBar.push(l.refreshNavBar())}]),angular.module("AmpersandApp").service("NavigationBarService",["Restangular","$localStorage","$sessionStorage","$timeout","NotificationService",function(e,t,n,a,r){let i={top:[],new:[],refresh:[],role:[],ext:[]},o=[],s={navbar:i,defaultSettings:{notify_showSignals:!0,notify_showInfos:!0,notify_showSuccesses:!0,notify_autoHideSuccesses:!0,notify_showErrors:!0,notify_showWarnings:!0,notify_showInvariants:!0,autoSave:!0},addObserverCallable:function(e){o.push(e)},refreshNavBar:function(){return e.one("app/navbar").get().then(function(e){e=e.plain(),i.top=e.top,i.new=e.new,i.refresh=e.refresh,i.role=e.role,i.ext=e.ext,n.session=e.session,n.sessionRoles=e.sessionRoles,n.sessionVars=e.sessionVars,s.defaultSettings=e.defaultSettings,s.initializeSettings(),r.updateNotifications(e.notifications),angular.forEach(o,function(e){e()})},function(e){s.initializeSettings()})},initializeSettings:function(){let e=!1;angular.forEach(s.defaultSettings,function(n,a,r){void 0===t[a]&&(e=!0)}),e&&s.resetSettingsToDefault()},resetSettingsToDefault:function(){angular.forEach(s.defaultSettings,function(e,n,a){t[n]=!1}),a(function(){t.$reset(s.defaultSettings)},500)}};return s}]),angular.module("AmpersandApp").service("RoleService",["$sessionStorage","Restangular",function(e,t){return RoleService={selectRole:function(e){RoleService.toggleRole(e,!0)},selectRoleByLabel:function(t){angular.forEach(e.sessionRoles,function(e){if(e.label==t)return RoleService.selectRole(e.id)})},toggleRole:function(t,n){angular.forEach(e.sessionRoles,function(e){e.id==t&&(e.active=void 0===n?!e.active:n)})},getActiveRoleIds:function(){var t=[];return angular.forEach(e.sessionRoles,function(e){!0===e.active&&t.push(e.id)}),t},deactivateAllRoles:function(){angular.forEach(e.sessionRoles,function(e){e.active=!1})},setActiveRoles:function(){return t.all("app/roles").patch(e.sessionRoles)}},RoleService}]),angular.module("AmpersandApp").service("NotificationService",["$localStorage","$sessionStorage","$timeout","Restangular",function(e,t,n,a){let r={signals:[],invariants:[],infos:[],successes:[],warnings:[],errors:[]},i={notifications:r,getNotifications:function(){return a.one("app/notifications").get().then(function(e){e=e.plain(),i.updateNotifications(e)},function(){i.addError("Something went wrong while getting notifications")})},checkAllRules:function(){return a.one("admin/ruleengine/evaluate/all").get().then(function(e){e=e.plain(),i.addSuccess("Evaluated all rules."),i.updateNotifications(e)},function(){i.addError("Something went wrong while evaluating all rules")})},updateNotifications:function(t){void 0!==t&&(r.signals=t.signals,r.invariants=t.invariants,r.infos=r.infos.concat(t.infos),r.successes=r.successes.concat(t.successes),r.warnings=r.warnings.concat(t.warnings),r.errors=r.errors.concat(t.errors),e.notify_autoHideSuccesses&&n(function(){r.successes=[]},3e3))},addSuccess:function(e){r.successes.push({message:e,count:1})},addError:function(e,t,n,a){t=void 0!==typeof t?t:null,n=void 0!==typeof n&&n,a=void 0!==typeof a&&a;let i=!1,o=r.errors;for(let r=0;r<o.length;r++)o[r].message==e&&(o[r].count+=1,o[r].code=t,o[r].persistent=n,o[r].details=a,i=!0);i||r.errors.push({message:e,code:t,count:1,persistent:n,details:a})},addWarning:function(e){let t=!1,n=r.warnings;for(var a=0;a<n.length;a++)n[a].message==e&&(n[a].count+=1,t=!0);t||r.warnings.push({message:e,count:1})},addInfo:function(e){let t=!1,n=r.infos;for(var a=0;a<n.length;a++)n[a].message==e&&(n[a].count+=1,t=!0);t||r.infos.push({message:e,count:1})}};return i}]),angular.module("AmpersandApp").controller("NotificationCenterController",["$scope","$route","Restangular","$localStorage","NotificationService",function(e,t,n,a,r){e.localStorage=a,e.notifications=r.notifications,e.$on("$routeChangeSuccess",function(){e.notifications.successes=[],e.notifications.errors=e.notifications.errors.filter(function(e){return!!e.persistent&&(e.persistent=!1,!0)}),e.notifications.warnings=[],e.notifications.infos=[],e.notifications.invariants=[]}),e.closeAlert=function(e,t){e.splice(t,1)}}]),angular.module("AmpersandApp").filter("unsafe",["$sce",function(e){return e.trustAsHtml}]),angular.module("AmpersandApp").value("cgBusyDefaults",{message:"Loading...",backdrop:!0,minDuration:500}),angular.module("AmpersandApp").directive("myNavToInterfaces",function(){return{restrict:"E",scope:{resource:"=",target:"@"},templateUrl:"app/src/shared/myNavTo/myNavToInterfaces.html",transclude:!0}}),angular.module("AmpersandApp").directive("myNavToOtherInterfaces",function(){return{restrict:"E",scope:{resource:"=",target:"@"},templateUrl:"app/src/shared/myNavTo/myNavToOtherInterfaces.html"}}),angular.module("AmpersandApp").run(["$templateCache",function(e){e.put("app/src/admin/check-rules-menu-item.html",'<a ng-click="checkAllRules()"><span class="glyphicon glyphicon-check"></span><span> (Re)evaluate all rules</span></a>'),e.put("app/src/admin/execengine-menu-item.html",'<a ng-controller="ExecEngineController" href="" ng-click="run()">\r\n\t<span class="glyphicon glyphicon-cog"></span><span> Run execution engine</span>\r\n</a>'),e.put("app/src/admin/exporter-menu-item.html",'<a ng-href="api/v1/admin/export/all">\r\n    <span class="glyphicon glyphicon-download"></span><span> Population export</span>\r\n</a>'),e.put("app/src/admin/installer-menu-item.html",'<a href="#/admin/installer">\r\n    <span class="glyphicon glyphicon-trash"></span><span> Reinstall database</span>\r\n</a>'),e.put("app/src/admin/installer.html",'<div class="container-fluid" id="Interface">\r\n    <div class="jumbotron">\r\n        <h1>Installer</h1>\r\n        <p>This action will reinstall the application and delete all content.</p>\r\n        <p>If provided, the initial population will be installed.</p>\r\n        <div class="btn-group">\r\n            <button type="button" ng-click="install(true)" class="btn btn-lg" ng-class="{\'btn-danger\' : (!installing && !installed), \'btn-warning\' : installing, \'btn-success\' : installed}" ng-disabled="installing">\r\n                <span ng-if="!installed && ! installing">Reinstall application  </span>\r\n                <span ng-if="installing">Application installing  </span>\r\n                <span ng-if="installed">Application reinstalled  </span>\r\n                <img ng-if="installing" ng-src="app/images/loading.gif" style="height:20px;"/>\r\n            </button>\r\n            <button type="button" class="btn btn-lg dropdown-toggle" ng-class="{\'btn-danger\' : (!installing && !installed), \'btn-warning\' : installing, \'btn-success\' : installed}" ng-disabled="installing" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\r\n                <span class="caret"></span>\r\n            </button>\r\n            <ul class="dropdown-menu">\r\n                <li><a href="" ng-click="install(true)">Reinstall application</a></li>\r\n                <li><a href="" ng-click="install(false)">Reinstall application (without default population)</a></li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>'),e.put("app/src/importer/importer.html",'<style>\r\n.my-drop-zone { \r\nborder: dotted 3px lightgray;\r\n}\r\n\r\n/* Default class applied to drop zones on over */\r\n.nv-file-over {\r\n\tborder: dotted 3px red;\r\n}\r\n\r\n.another-file-over-class {\r\n\tborder: dotted 3px green;\r\n}\r\n</style>\r\n<div class="container-fluid interface">\r\n\t<fieldset>\r\n\t\t<legend>Population importer</legend>\r\n\t\t<div class="row">\r\n\t\t\t<div class="col-md-3" nv-file-drop="" uploader="uploader">\r\n\t\t\t\t<h3>Select files</h3>\r\n\t\t\t\t\r\n\t\t\t\t<div ng-show="uploader.isHTML5">\r\n\t\t\t\t\x3c!-- 3. nv-file-over uploader="link" over-class="className" --\x3e\r\n\t\t\t\t\t<div class="well my-drop-zone" nv-file-over="" uploader="uploader">\r\n\t\t\t\t\t\tBase drop zone\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t\x3c!-- Example: nv-file-select="" uploader="{Object}" options="{Object}" filters="{String}" --\x3e\r\n\t\t\t\tMultiple\r\n\t\t\t\t<input type="file" nv-file-select="" uploader="uploader" multiple  /><br/>\r\n\t\t\t\t\r\n\t\t\t\tSingle\r\n\t\t\t\t<input type="file" nv-file-select="" uploader="uploader" />\r\n\t\t\t</div>\t\r\n\t\t\t\r\n\t\t\t<div class="col-md-9" style="margin-bottom: 40px">\r\n\t\r\n\t\t\t\t<h3>Upload queue</h3>\r\n\t\t\t\t<p>Queue length: {{ uploader.queue.length }}</p>\r\n\t\t\t\t\r\n\t\t\t\t<table class="table">\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th width="50%">Name</th>\r\n\t\t\t\t\t\t\t<th ng-show="uploader.isHTML5">Size</th>\r\n\t\t\t\t\t\t\t<th ng-show="uploader.isHTML5">Progress</th>\r\n\t\t\t\t\t\t\t<th>Status</th>\r\n\t\t\t\t\t\t\t<th>Actions</th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t<tr ng-repeat="item in uploader.queue">\r\n\t\t\t\t\t\t\t<td><strong>{{ item.file.name }}</strong></td>\r\n\t\t\t\t\t\t\t<td ng-show="uploader.isHTML5" nowrap>{{ item.file.size/1024/1024|number:2 }} MB</td>\r\n\t\t\t\t\t\t\t<td ng-show="uploader.isHTML5">\r\n\t\t\t\t\t\t\t\t<div class="progress" style="margin-bottom: 0;">\r\n\t\t\t\t\t\t\t\t\t<div class="progress-bar" role="progressbar" ng-style="{ \'width\': item.progress + \'%\' }"></div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t<td class="text-center">\r\n\t\t\t\t\t\t\t\t<span ng-show="item.isSuccess"><i class="glyphicon glyphicon-ok"></i></span>\r\n\t\t\t\t\t\t\t\t<span ng-show="item.isCancel"><i class="glyphicon glyphicon-ban-circle"></i></span>\r\n\t\t\t\t\t\t\t\t<span ng-show="item.isError"><i class="glyphicon glyphicon-remove"></i></span>\r\n\t\t\t\t\t\t\t\t<span ng-show="item.isUploading"><img src="app/images/loading.gif" height="20" width="20"></span>\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t<td nowrap>\r\n\t\t\t\t\t\t\t\t<button type="button" class="btn btn-success btn-xs" ng-click="item.upload()" ng-disabled="item.isReady || item.isUploading">  \x3c!-- Removed: "|| item.isSuccess" to enable the re-upload of a file.--\x3e\r\n\t\t\t\t\t\t\t\t\t<span class="glyphicon glyphicon-upload"></span> Upload\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button type="button" class="btn btn-warning btn-xs" ng-click="item.cancel()" ng-disabled="!item.isUploading">\r\n\t\t\t\t\t\t\t\t\t<span class="glyphicon glyphicon-ban-circle"></span> Cancel\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button type="button" class="btn btn-danger btn-xs" ng-click="item.remove()">\r\n\t\t\t\t\t\t\t\t\t<span class="glyphicon glyphicon-trash"></span> Remove\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t\t\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\tQueue progress:\r\n\t\t\t\t\t\t<div class="progress">\r\n\t\t\t\t\t\t\t<div class="progress-bar" role="progressbar" ng-style="{ \'width\': uploader.progress + \'%\' }"></div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<button type="button" class="btn btn-success btn-sm" ng-click="uploader.uploadAll()" ng-disabled="!uploader.getNotUploadedItems().length">\r\n\t\t\t\t\t\t<span class="glyphicon glyphicon-upload"></span> Upload all\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button type="button" class="btn btn-warning btn-sm" ng-click="uploader.cancelAll()" ng-disabled="!uploader.isUploading">\r\n\t\t\t\t\t\t<span class="glyphicon glyphicon-ban-circle"></span> Cancel all\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button type="button" class="btn btn-danger btn-sm" ng-click="uploader.clearQueue()" ng-disabled="!uploader.queue.length">\r\n\t\t\t\t\t\t<span class="glyphicon glyphicon-trash"></span> Remove all\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\t\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</fieldset>\r\n</div>'),e.put("app/src/importer/menu-item.html",'<a ng-href="#/ext/importer/">\r\n    <span class="glyphicon glyphicon-upload"></span><span> Population importer</span>\r\n</a>'),e.put("app/src/navbar/navigationBar.html",'<nav class="navbar navbar-default" role="navigation" ng-controller="NavigationBarController" cg-busy="{promise:loadingNavBar}">\r\n    <div id="navbar-wrapper" class="container">\r\n        <ul class="nav navbar-nav" id="navbar-interfaces" my-navbar-resize>\r\n            <li><a href="#/"><span class="glyphicon glyphicon-home"></span></a></li>\r\n            <li id="navbar-interfaces-dropdown" class="dropdown" uib-tooltip="More interfaces" tooltip-trigger="mouseenter" tooltip-placement="bottom">\r\n                <a href="" class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-menu-hamburger"></span></a>\r\n                <ul id="navbar-interfaces-dropdown-menu" class="dropdown-menu" role="menu"></ul>\r\n            </li>\r\n            <li id="{{interface.label}}" ng-repeat="interface in navbar.top"> \x3c!-- the interface id is there so we can style specific menu items with css --\x3e\r\n                <a href="#/{{interface.id}}">\r\n                    <span class="glyphicon glyphicon-list-alt"></span> {{interface.label}}</a>\r\n            </li>\r\n        </ul>\r\n        <ul class="nav navbar-nav navbar-right" id="navbar-options">\r\n            \x3c!-- hidden on extra small devices, e.g. phone (<768px) --\x3e\r\n            <li class="dropdown hidden-xs" uib-tooltip="Show/hide notifications" tooltip-trigger="mouseenter" tooltip-placement="left">\r\n                <a href="" class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-bullhorn"></span></a>\r\n                <ul class="dropdown-menu" role="menu" ng-click="$event.stopPropagation();">\r\n                    <li class="dropdown-header">Transaction settings</li>\r\n                        <li><switch ng-model="localStorage.notify_showSignals"> Show signals</switch></li>\r\n                        <li><switch ng-model="localStorage.notify_showInvariants"> Show invariants</switch></li>\r\n                        <li><switch ng-model="localStorage.autoSave"> Auto save changes</switch></li>\r\n                    <li class="dropdown-header">User logs</li>\r\n                        <li><switch ng-model="localStorage.notify_showErrors"> Show errors</switch></li>\r\n                        <li><switch ng-model="localStorage.notify_showWarnings"> Show warnings</switch></li>\r\n                        <li><switch ng-model="localStorage.notify_showInfos"> Show infos</switch></li>\r\n                        <li><switch ng-model="localStorage.notify_showSuccesses"> Show successes</switch></li>\r\n                        <li><switch ng-model="localStorage.notify_autoHideSuccesses"> Auto hide successes</switch></li>\r\n                    <li class="divider" role="presentation"></li>\r\n                        <li><a href="" ng-click="resetSettingsToDefault();"><span class="glyphicon glyphicon-repeat" style="margin: 4px; width: 30px;"></span> Default settings</a></li>\r\n                </ul>\r\n            </li>\r\n            \r\n            \x3c!-- hidden on extra small devices, e.g. phone (<768px) --\x3e\r\n            <li class="dropdown hidden-xs" uib-tooltip="Tools" tooltip-trigger="mouseenter" tooltip-placement="bottom">\r\n                <a href="" class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-th"></span></a>\r\n                <ul class="dropdown-menu" role="menu">\r\n                    <li ng-repeat="app in navbar.refresh" ng-include="app.url"/>\r\n                    <li><a href="" ng-click="reload()"><span class="glyphicon glyphicon-refresh"></span> Refresh page</a></li>\r\n                    <li ng-repeat="ext in navbar.ext" ng-include="ext.url"/>\r\n                </ul>\r\n            </li>\r\n            \r\n            \x3c!-- hidden on extra small devices, e.g. phone (<768px) --\x3e\r\n            <li ng-if="navbar.new.length" class="dropdown hidden-xs" uib-tooltip="Create new resource" tooltip-trigger="mouseenter" tooltip-placement="bottom">\r\n                <a href="" class="dropdown-toggle" data-toggle="dropdown">\r\n                    <span class="glyphicon glyphicon-plus"></span>\r\n                </a>\r\n                <ul class="dropdown-menu" role="menu">\r\n                    <li ng-repeat="item in navbar.new" ng-class="{\'dropdown-submenu\' : item.ifcs.length > 1}">\r\n                        \x3c!--<a  style="position:relative; display:inline-block;">--\x3e\r\n                        <a ng-if="item.ifcs.length > 1" tabindex="-1" href="#">{{item.label}}</a>\r\n                        <ul ng-if="item.ifcs.length > 1" class="dropdown-menu" role="menu">\r\n                            <li ng-repeat="ifc in item.ifcs">\r\n                                <a tabindex="-1" href="#" ng-click="createNewResource(ifc.resourceType, ifc.link);">{{ifc.label}}</a>\r\n                            </li>\r\n                        </ul>\r\n                        \r\n                        <a ng-if="item.ifcs.length == 1" href="" ng-click="createNewResource(item.ifcs[0].resourceType, item.ifcs[0].link);">{{item.label}}</a>\r\n                        <span ng-if="item.ifcs.length == 0">{{item.label}}</span>\r\n                    </li>\r\n                </ul>\r\n            </li>\r\n            \r\n            <li ng-if="sessionStorage.sessionRoles.length || navbar.role.length" class="dropdown" uib-tooltip="Switch roles" tooltip-trigger="mouseenter" tooltip-placement="bottom">\r\n                <a href="" class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-user"></span></a>\r\n                <ul class="dropdown-menu" role="menu">\r\n                    <li ng-repeat="role in sessionStorage.sessionRoles" ng-click="$event.stopPropagation();"><switch ng-model="role.active" ng-click="toggleRole(role.id);"> {{role.label}}</switch></li>\r\n                    <li ng-if="navbar.role.length && sessionStorage.sessionRoles.length" class="divider" role="presentation"></li>\r\n                    <li ng-repeat="ext in navbar.role" ng-include="ext.url"/>\r\n                </ul>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</nav>'),e.put("app/src/notifications/notificationCenter.html",'<div class="container-fluid">\r\n    <div id="notificationCenter" ng-controller="NotificationCenterController">\r\n        \r\n        <div id="infos" ng-show="localStorage.notify_showInfos">\r\n            <div class="alert alert-info alert-dismissible" role="alert" ng-repeat="info in notifications.infos">\r\n                <button type="button" class="close" data-dismiss="alert" aria-label="Close" ng-click="closeAlert(notifications.infos, $index);"><span aria-hidden="true">&times;</span></button>\r\n                <span class="glyphicon glyphicon-info-sign"></span><span> {{info.message}}</span>\r\n            </div>\r\n        </div>\r\n        \r\n        <div id="warnings" ng-show="localStorage.notify_showWarnings">\r\n            <div class="alert alert-warning alert-dismissible" role="alert" ng-repeat="warning in notifications.warnings">\r\n                <button type="button" class="close" data-dismiss="alert" aria-label="Close" ng-click="closeAlert(notifications.warnings, $index);"><span aria-hidden="true">&times;</span></button>\r\n                <span class="glyphicon glyphicon-warning-sign"></span><span> {{warning.message}}</span>\r\n                <span class="badge pull-right" ng-show="warning.count > 1">{{warning.count}}</span>\r\n            </div>\r\n        </div>\r\n        \r\n        <div id="errors" ng-show="localStorage.notify_showErrors">\r\n            <div class="panel panel-danger" id="error-panel-{{key}}" ng-repeat="(key, error) in notifications.errors">\r\n                <div class="panel-heading btn btn-block" data-toggle="collapse" data-target="#error-body-{{key}}">\r\n                    <div class="text-left">\r\n                        <span class="glyphicon glyphicon-exclamation-sign"></span> <span ng-bind-html="error.message | unsafe"></span>\r\n                        <button type="button" class="close" data-target="#error-panel-{{key}}" data-dismiss="alert" aria-label="Dismiss" ng-click="closeAlert(notifications.errors, $index);">\r\n                            <span aria-hidden="true">&times;</span>\r\n                        </button>\r\n                        <span class="badge pull-right" ng-show="error.count > 1">{{error.count}}</span>\r\n                    </div>\r\n                </div>\r\n                <div class="panel-body collapse" id="error-body-{{key}}">\r\n                    <div ng-if="error.details" ng-bind-html="error.details | unsafe"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \r\n        <div id="invariants" ng-show="localStorage.notify_showInvariants">\r\n            <div class="panel panel-danger" ng-repeat="(key, val) in notifications.invariants">\r\n                <div class="panel-heading btn btn-block" data-toggle="collapse" data-target="#invariant-{{key}}">\r\n                    <div class="text-left" style="display:flex; align-items:center;">\r\n                        <span class="glyphicon glyphicon-warning-sign"></span>\r\n                        <div marked="val.ruleMessage" style="display:inline-block; margin: 0px 10px;"></div> \x3c!-- uses angular-marked directive --\x3e\r\n                        <span class="badge" style="margin-left:auto;">{{val.tuples.length}}</span>\r\n                    </div>\r\n                </div>\r\n                <ul class="list-group collapse" id="invariant-{{key}}">\r\n                    <li class="list-group-item" ng-repeat="tuple in val.tuples track by $index">\r\n                        <span>{{tuple.violationMessage}}</span>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n                    \r\n        <div id="signals" ng-show="localStorage.notify_showSignals">\r\n            <div class="panel panel-warning" ng-repeat="(key, val) in notifications.signals">\r\n                <div class="panel-heading btn btn-block" data-toggle="collapse" data-target="#violation-{{key}}">\r\n                    <div class="text-left" style="display:flex; align-items:center;">\r\n                        <span class="glyphicon glyphicon-warning-sign"></span>\r\n                        <div marked="val.message" style="display:inline-block; margin: 0px 10px;"></div> \x3c!-- uses angular-marked directive --\x3e\r\n                        <span class="badge" style="margin-left:auto;">{{val.violations.length}}</span>\r\n                    </div>\r\n                </div>\r\n                <ul class="list-group collapse" id="violation-{{key}}">\r\n                    <li class="dropdown list-group-item" ng-repeat="violation in val.violations track by $index">\r\n                        <div ng-if="violation.ifcs.length > 1">\r\n                            <a href="" class="dropdown-toggle" data-toggle="dropdown">{{violation.message}}</a>\r\n                            <ul class="dropdown-menu" role="menu">\r\n                                <li ng-repeat="ifc in violation.ifcs">\r\n                                    <a ng-href="{{ifc.link}}" data-toggle="collapse" data-target="#violation-{{key}}"><small>View</small> {{ifc.label}}</a>\r\n                                </li>\r\n                            </ul>\r\n                        </div>\r\n                        <a ng-if="violation.ifcs.length == 1" ng-href="{{violation.ifcs[0].link}}" data-toggle="collapse" data-target="#violation-{{key}}">{{violation.message}}</a>\r\n                        <span ng-if="violation.ifcs.length == 0">{{violation.message}}</span>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        \r\n        \x3c!-- Success notifications must be last in notifications center because of position:absolute --\x3e\r\n        <div id="successes" ng-show="localStorage.notify_showSuccesses">\r\n            <div class="alert alert-success alert-dismissible" role="alert" ng-repeat="success in notifications.successes">\r\n                <button type="button" class="close" data-dismiss="alert" aria-label="Close" ng-click="closeAlert(notifications.successes, $index);"><span aria-hidden="true">&times;</span></button>\r\n                <span class="glyphicon glyphicon-ok-sign"></span><span> {{success.message}}</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'),e.put("app/src/shared/404.html",'\x3c!-- 404 page --\x3e\r\n<div class="container-fluid" id="Interface">\r\n    <div class="row">\r\n        <div class="col-md-4">\r\n            <h1>404 Page not found</h1>\r\n            <p>The requested page does not exist.</p>\r\n            <p><a class="btn btn-primary btn-lg" href="#/" role="button">Goto startpage</a></p>\r\n        </div>\r\n        <div>\r\n            <img src="app/images/404-image.png">\r\n        </div>\r\n    </div>\r\n</div>'),e.put("app/src/shared/home.html",'\x3c!-- Home screen --\x3e\r\n<div class="container-fluid" id="Interface">\r\n    <div class="jumbotron">\r\n        <h1>Hello, world!</h1>\r\n        <p>You\'ve successfully generated your Ampersand prototype.</p>\r\n        <p><a class="btn btn-primary btn-lg" href="https://ampersandtarski.gitbooks.io/documentation" target="_blank" role="button">See our documentation &raquo;</a></p>\r\n    </div>\r\n</div>\r\n'),e.put("app/src/shared/loading/loading.html",'<img src="app/images/loading.gif" alt="Loading..." style="height:20px;"/>'),e.put("app/src/shared/myNavTo/myNavToInterfaces.html",'<div ng-if="resource._ifcs_.length > 1" style="position:relative; display:inline-block;">\r\n    <a class="dropdown-toggle" data-toggle="dropdown"><ng-transclude></ng-transclude></a>\r\n    <ul class="dropdown-menu" role="menu">\r\n        <li ng-repeat="ifc in resource._ifcs_">\r\n            <a ng-href="#/{{ifc.id}}/{{resource._id_}}" target="{{target}}">{{ifc.label}}</a>\r\n        </li>\r\n    </ul>\r\n</div>\r\n<a ng-if="resource._ifcs_.length == 1" ng-href="#/{{resource._ifcs_[0].id}}/{{resource._id_}}" target="{{target}}"><ng-transclude></ng-transclude></a>\r\n<span ng-if="resource._ifcs_.length == 0 || resource._ifcs_ == undefined"><ng-transclude></ng-transclude></span>'),e.put("app/src/shared/myNavTo/myNavToOtherInterfaces.html",'\x3c!-- Only when ifcs has more than 1 interface, otherwise, the user is already there --\x3e\r\n\x3c!-- This menu includes the interface where the user currently is --\x3e\r\n<div ng-if="resource._ifcs_.length > 1" style="position:relative; display: inline-block;">\r\n    <button type="button" class="btn btn-xs dropdown-toggle" data-toggle="dropdown">\r\n        <span class="glyphicon glyphicon-menu-hamburger"></span>\r\n    </button>\r\n    <ul class="dropdown-menu dropdown-menu-right" role="menu">\r\n        <li ng-repeat="ifc in resource._ifcs_">\r\n            <a ng-href="#/{{ifc.id}}/{{resource._id_}}" target="{{target}}">{{ifc.label}}</a>\r\n        </li>\r\n    </ul>\r\n</div>')}]);
//# sourceMappingURL=ampersand.min.js.map
