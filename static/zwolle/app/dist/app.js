angular.module("AmpersandApp",["ngResource","ngRoute","ngSanitize","restangular","ui.bootstrap","uiSwitch","cgBusy","siTable","ng-code-mirror","ngStorage","angularFileUpload","ui.bootstrap.datetimepicker","hc.marked"]).config(["$routeProvider",function(e){e.when("/",{controller:"",templateUrl:"app/components/shared/home.html",interfaceLabel:"Home"}).when("/admin/installer",{controller:"InstallerController",templateUrl:"app/components/admin/installer.html",interfaceLabel:"Installer"}).when("/404",{templateUrl:"app/components/shared/404.html",interfaceLabel:"404"}).otherwise({redirectTo:"/404"})}]).config(["RestangularProvider",function(e){e.setBaseUrl("api/v1"),e.setDefaultHeaders({"Content-Type":"application/json"})}]).run(["Restangular","$rootScope","$location","$route","NotificationService","RoleService","NavigationBarService",function(e,t,n,o,r,a,i){e.addFullRequestInterceptor(function(e,t,n,o,r,a){return a}),e.addResponseInterceptor(function(e,t,o,r,a,s){return"get"!=t&&"getList"!=t&&e.sessionRefreshAdvice&&i.refreshNavBar(),null!=e.navTo&&n.url(e.navTo),e}),e.setErrorInterceptor(function(e,t,o){var i,s;return 401==e.status&&(a.deactivateAllRoles(),n.path("")),"object"==typeof e.data?(404==e.data.error?r.addInfo(e.data.msg||"Resource not found"):(i=e.data.msg||e.statusText,r.addError(i,e.status,!0,e.data.html)),void 0!==e.data.notifications&&r.updateNotifications(e.data.notifications)):(i=e.status+" "+e.statusText,s=e.data,r.addError(i,e.status,!0,s)),!0}),t.getCurrentDateTime=function(){return new Date};var s=n.url;n.url=function(e,r){if(!1===r)var a=o.current,i=t.$on("$locationChangeSuccess",function(){o.current=a,i()});return s.apply(n,[e])}}]).value("cgBusyDefaults",{message:"Loading...",backdrop:!0,minDuration:500}).directive("myShowonhoverBox",function(){return{link:function(e,t,n){t.closest(".box").hasClass("my-showonhover-box-show")||t.hide(),t.closest(".box").bind("mouseenter",function(){t.closest(".box").addClass("my-showonhover-box-show"),t.show()}),t.closest(".box").bind("mouseleave",function(){t.closest(".box").removeClass("my-showonhover-box-show"),t.hide()})}}}).directive("myBluronenter",function(){return function(e,t,n){t.bind("keydown keypress",function(e){13===e.which&&(e.target.blur(),e.preventDefault())})}}).filter("toArray",function(){return function(e,t){return e?Array.isArray(e)?e:!1===t?Object.keys(e).map(function(t){return e[t]}):Object.keys(e).map(function(t){return Object.defineProperty(e[t],"$key",{enumerable:!1,value:t})}):e}}).directive("myNavToInterfaces",function(){return{restrict:"E",scope:{resource:"=",target:"@"},templateUrl:"app/components/shared/partials/myNavToInterfaces.html",transclude:!0}}).directive("myNavToOtherInterfaces",function(){return{restrict:"E",scope:{resource:"=",target:"@"},templateUrl:"app/components/shared/partials/myNavToOtherInterfaces.html"}}).filter("unsafe",["$sce",function(e){return e.trustAsHtml}]),angular.module("AmpersandApp").controller("ExecEngineController",["$scope","Restangular","NotificationService",function(e,t,n){e.run=function(){t.one("admin/execengine/run").get().then(function(e){e=e.plain(),n.updateNotifications(e)})}}]),angular.module("AmpersandApp").controller("InstallerController",["$scope","Restangular","NotificationService","RoleService",function(e,t,n,o){e.installing=!1,e.installed=!1,e.install=function(r){e.installing=!0,e.installed=!1,t.one("admin/installer").get({defaultPop:r}).then(function(t){t=t.plain(),n.updateNotifications(t),o.deactivateAllRoles(),e.installing=!1,e.installed=!0},function(){e.installing=!1,e.installed=!1})}}]);var app=angular.module("AmpersandApp");app.requires[app.requires.length]="angularFileUpload",app.config(["$routeProvider",function(e){e.when("/ext/importer",{controller:"PopulationImportController",templateUrl:"app/components/importer/importer.html",interfaceLabel:"Population importer"})}]).service("ImportService",["FileUploader","NotificationService",function(e,t){let n=new e({url:"api/v1/admin/import"});return n.onSuccessItem=function(e,n,o,r){t.updateNotifications(n.notifications)},n.onErrorItem=function(e,n,o,r){let a,i;"object"==typeof n?(a=n.msg||"Error while importing",t.addError(a,o,!0),void 0!==n.notifications&&t.updateNotifications(n.notifications)):(a=o+" Error while importing",i=n,t.addError(a,o,!0,i))},{uploader:n}}]).controller("PopulationImportController",["$scope","ImportService",function(e,t){e.uploader=t.uploader}]),angular.module("AmpersandApp").controller("AtomicController",["$scope","ResourceService",function(e,t){e.selected={},e.saveItem=t.saveItem,e.addItem=t.addItem,e.removeItem=t.removeItem,e.remove=t.removeResource,e.delete=t.deleteResource}]),angular.module("AmpersandApp").controller("AtomicDateController",["$scope","ResourceService",function(e,t){function n(e){var t=String(e);return 1===t.length&&(t="0"+t),t}function o(e){null!==e&&(e.toJSON=function(){return this.getUTCFullYear()+"-"+n(this.getMonth()+1)+"-"+n(this.getDate())})}e.isOpen=!1,e.openDatepicker=function(t){t.preventDefault(),t.stopPropagation(),e.isOpen=!0},e.selected={value:""},e.saveDateItem=function(e,n,r){o(e[n]),t.saveItem(e,n,r)},e.addDateItem=function(e,n,r,a){""!==r.value?(o(r.value),t.addItem(e,n,r,a)):console.log("Empty date selected")}}]),angular.module("AmpersandApp").controller("AtomicTypeAheadController",["$scope","Restangular","ResourceService",function(e,t,n){e.selected={},e.hasNoResults=!1,e.getTypeahead=function(n,o){o=void 0!==o&&o,(void 0===e.typeahead[n]||o)&&(e.typeahead[n]=t.all("resource/"+n).getList().$object)},e.typeaheadOnSelect=function(t,o,r,a,i,s){void 0===t._id_?console.log("Resource id undefined"):""===t._id_?console.log("Empty resource id provided"):(Array.isArray(a[i])?(a[i].push(angular.copy(t)),patch=n.createPatch("add",a,s,i,t._id_),n.addPatches(s,[patch])):null===a[i]?(a[i]=angular.copy(t),patch=n.createPatch("replace",a,s,i,t._id_),n.addPatches(s,[patch])):console.log("Error: Property already set and/or not defined"),e.hasNoResults=!1),e.selected.value=""},e.typeAheadCreate=function(t,o,r,a,i){Array.isArray(t[o])?n.addItem(t,o,r,a).then(function(){e.getTypeahead(i,!0)}):null===t[o]?(t[o]=r.value,n.saveItem(t,o,a)):console.log("Error: Property already set and/or not defined")}}]),angular.module("AmpersandApp").controller("AtomicUploadFileController",["$scope","FileUploader","NotificationService",function(e,t,n){e.FileUploader=new t({alias:"file",formData:[],removeAfterUpload:!0,autoUpload:!0}),e.FileUploader.onSuccessItem=function(e,t,o,r){n.updateNotifications(t.notifications),e.resource[e.ifc].push(t.content)},e.FileUploader.onErrorItem=function(e,t,o,r){n.addError(t.error.message,t.error.code,!0)}}]),angular.module("AmpersandApp").controller("BoxController",["$scope","ResourceService",function(e,t){e.createResource=t.createResource,e.save=t.saveResource,e.cancel=t.cancelResource,e.remove=t.removeResource,e.delete=t.deleteResource}]),angular.module("AmpersandApp").controller("InterfaceController",["$scope","$location","ResourceService",function(e,t,n){e.typeahead={},e.$on("$locationChangeStart",function(e,t,o){n.checkRequired()&&(confirmed=confirm("You have unsaved edits. Do you wish to leave?"),e&&!confirmed?e.preventDefault():e&&confirmed?n.emptyUpdatedResources():console.log("Someting went wrong. Cannot determine action after locationChangeStart"))}),e.newResource=function(){t.url("/"+ifcName+"?new")},e.pendingPromises=n.pendingPromises}]),angular.module("AmpersandApp").service("ResourceService",["$localStorage","$timeout","$location","Restangular","NotificationService",function(e,t,n,o,r){let a=[],i={getResource:function(e,t,n){return promise=o.one(e._path_+"/"+t).get().then(function(n){try{n=n.plain()}catch(e){}return $.isEmptyObject(n)?r.addInfo("No results found"):null===e[t]||Array.isArray(e[t])?e[t]=n:angular.extend(e[t],n),i.initResourceMetaData(e),e}),Array.isArray(n._loading_)||(n._loading_=[]),n._loading_.push(promise),promise},saveResource:function(e){return promise=o.one(e._path_).patch(e._patchesCache_,{}).then(function(t){return t=t.plain(),e._isRoot_?e.get():e=angular.extend(e,t.content),i.processResponse(e,t),e}),Array.isArray(e._loading_)||(e._loading_=[]),e._loading_.push(promise),promise},cancelResource:function(e){return promise=o.one(e._path_).get().then(function(t){return t=t.plain(),$.isEmptyObject(t)?r.addInfo("No results found"):angular.extend(e,t),r.getNotifications(),i.initResourceMetaData(e),e}),Array.isArray(e._loading_)||(e._loading_=[]),e._loading_.push(promise),promise},createResource:function(e,t,r,a){return"undefined"===a&&(a=!1),promise=o.one(e._path_).all(t).post({},{}).then(function(o){return o=o.plain(),i.processResponse(r,o),newResource=o.content,Array.isArray(e[t])?a?e[t].unshift(newResource):e[t].push(newResource):e[t]=newResource,e._isRoot_&&"_NEW"==e._id_&&n.url("/"+t+"/"+newResource._id_,!1),newResource}),Array.isArray(r._loading_)||(r._loading_=[]),r._loading_.push(promise),promise},removeResource:function(e,t,n,o){return Array.isArray(e[t])?e[t].splice(e[t].indexOf(n),1):e[t]=null,patch=i.createPatch("remove",n,o),i.addPatches(o,[patch])},deleteResource:function(e,t,n){if(confirm("Are you sure?"))return promise=o.one(n._path_).remove({}).then(function(o){return o=o.plain(),r.updateNotifications(o.notifications),Array.isArray(e[t])?e[t].splice(e[t].indexOf(n),1):e[t]=null,e}),Array.isArray(n._loading_)||(n._loading_=[]),n._loading_.push(promise),promise},saveItem:function(e,t,n){return void 0===e[t]||""===e[t]?value=null:value=e[t],patch=i.createPatch("replace",e,n,t,value),i.addPatches(n,[patch])},addItem:function(e,t,n,o){return void 0===n.value?$q.reject("Value undefined"):""===n.value?$q.reject("Empty value selected"):Array.isArray(e[t])?(e[t].push(n.value),patch=i.createPatch("add",e,o,t,n.value),i.addPatches(o,[patch]).then(function(e){return delete n.value,e})):$q.reject("Error: trying to add item to non-array")},removeItem:function(e,t,n,o){return value=e[t][n],patch=i.createPatch("remove",e,o,t,value),e[t].splice(n,1),i.addPatches(o,[patch])},createPatch:function(e,t,n,o,r){return void 0===n&&(n=t),pathLength=n._path_.length,path=t._path_.substring(pathLength),void 0!==o&&(path=path+"/"+o),void 0===r?{op:e,path:path}:{op:e,path:path,value:r}},addPatches:function(t,n){return Array.isArray(t._patchesCache_)||(t._patchesCache_=[]),t._patchesCache_=t._patchesCache_.concat(n),-1===a.indexOf(t)&&a.push(t),e.switchAutoSave?i.saveResource(t):(i.setResourceStatus(t,"warning"),t._showButtons_={save:!0,cancel:!0},$q.resolve(t))},checkRequired:function(){a.reduce(function(e,t,n,o){return e||t._patchesCache_.length},!1)},emptyUpdatedResources:function(){a=[]},initResourceMetaData:function(e){e._showButtons_={save:!1,cancel:!1},e._patchesCache_=[],i.setResourceStatus(e,"default")},processResponse:function(e,n){return r.updateNotifications(n.notifications),n.invariantRulesHold?(e._showButtons_={save:!1,cancel:!1},e._patchesCache_=[],i.setResourceStatus(e,"success"),t(function(){i.setResourceStatus(e,"default")},3e3)):(e._showButtons_={save:!1,cancel:!0},i.setResourceStatus(e,"danger")),e},setResourceStatus:function(e,t){return e._status_={warning:!1,danger:!1,default:!1,success:!1},e._status_[t]=!0,e},pendingPromises:function(e){return!!Array.isArray(e._loading_)&&e._loading_.some(function(e){return 0===e.$$state.status})}};return i}]),angular.module("AmpersandApp").controller("NavigationBarController",["$scope","$route","Restangular","$localStorage","$sessionStorage","$timeout","$location","NotificationService","RoleService","NavigationBarService",function(e,t,n,o,r,a,i,s,c,u){e.$storage=o,e.$sessionStorage=r,e.defaultSettings=u.defaultSettings,e.loadingNavBar=[],e.navbar=u.navbar,e.reload=function(){e.loadingNavBar=[],e.loadingNavBar.push(u.refreshNavBar()),t.reload()},e.checkAllRules=s.checkAllRules,e.createNewResource=function(e,t){n.one("resource").all(e).post({},{}).then(function(e){i.url(t+"/"+e._id_)})},e.resetSettings=function(){angular.forEach(e.$storage.notificationPrefs,function(e,t,n){n[t]=!1}),e.$storage.switchAutoSave=!1,a(function(){e.resetNotificationSettings(),e.resetSwitchAutoSave()},500)},e.resetNotificationSettings=function(){e.$storage.notificationPrefs=angular.extend(e.$storage.notificationPrefs,e.defaultSettings.notifications)},e.resetSwitchAutoSave=function(){e.$storage.switchAutoSave=e.defaultSettings.switchAutoSave},e.loadingNavBar.push(u.refreshNavBar())}]).directive("myNavbarResize",["$window","$timeout","NavigationBarService",function(e,t,n){return function(n,o){var r=angular.element(e),a=function(){t(function(){for(;$("#navbar-interfaces").width()<$("#navbar-wrapper").width()-$("#navbar-options").width()&&$("#navbar-interfaces-dropdown-menu").children().length>0;)$("#navbar-interfaces-dropdown-menu").children().first().appendTo("#navbar-interfaces");for(;$("#navbar-interfaces").width()>$("#navbar-wrapper").width()-$("#navbar-options").width();)$("#navbar-interfaces").children().last().prependTo("#navbar-interfaces-dropdown-menu"),$("#navbar-interfaces-dropdown").toggleClass("hidden",$("#navbar-interfaces-dropdown-menu").children().length<=0);$("#navbar-interfaces-dropdown").toggleClass("hidden",$("#navbar-interfaces-dropdown-menu").children().length<=0)})};n.$watch("NavigationBarService.navbar",function(){a()}),r.bind("resize",function(){a()}),a()}}]),angular.module("AmpersandApp").service("NavigationBarService",["Restangular","$localStorage","$sessionStorage","NotificationService",function(e,t,n,o){let r={},a={};return{navbar:r,defaultSettings:a,refreshNavBar:function(){return e.one("app/navbar").get().then(function(e){e=e.plain(),angular.extend(r,e),n.session=e.session,n.sessionRoles=e.sessionRoles,n.sessionVars=e.sessionVars,angular.extend(a,e.defaultSettings),void 0===t.notificationPrefs&&$scope.resetNotificationSettings(),void 0===t.switchAutoSave&&$scope.resetSwitchAutoSave(),o.updateNotifications(e.notifications)},function(e){})}}}]),angular.module("AmpersandApp").service("RoleService",["$sessionStorage","Restangular",function(e,t){return RoleService={selectRole:function(e){RoleService.toggleRole(e,!0)},selectRoleByLabel:function(t){angular.forEach(e.sessionRoles,function(e){if(e.label==t)return RoleService.selectRole(e.id)})},toggleRole:function(t,n){angular.forEach(e.sessionRoles,function(e){e.id==t&&(e.active=void 0===n?!e.active:n)})},getActiveRoleIds:function(){var t=[];return angular.forEach(e.sessionRoles,function(e){!0===e.active&&t.push(e.id)}),t},deactivateAllRoles:function(){angular.forEach(e.sessionRoles,function(e){e.active=!1})},setActiveRoles:function(){return t.all("app/roles").patch(e.sessionRoles)}},RoleService}]),angular.module("AmpersandApp").controller("RoleMenuController",["$scope","RoleService","NavigationBarService",function(e,t,n){e.toggleRole=function(e,o){t.toggleRole(e,o),n.promises.push(t.setActiveRoles().then(function(e){n.refreshNavBar()}))}}]),angular.module("AmpersandApp").service("NotificationService",["$localStorage","$sessionStorage","$timeout","Restangular",function(e,t,n,o){let r={signals:[],invariants:[],infos:[],successes:[],warnings:[],errors:[]},a={notifications:r,getNotifications:function(){return o.one("app/notifications").get().then(function(e){e=e.plain(),a.updateNotifications(e)},function(){a.addError("Something went wrong while getting notifications")})},checkAllRules:function(){return o.one("admin/ruleengine/evaluate/all").get().then(function(e){e=e.plain(),a.addSuccess("Evaluated all rules."),a.updateNotifications(e)},function(){a.addError("Something went wrong while evaluating all rules")})},updateNotifications:function(t){void 0!==t&&(r.signals=t.signals,r.invariants=t.invariants,r.infos=r.infos.concat(t.infos),r.successes=r.successes.concat(t.successes),r.warnings=r.warnings.concat(t.warnings),r.errors=r.errors.concat(t.errors),e.notificationPrefs.switchAutoHideSuccesses&&n(function(){r.successes=[]},3e3))},addSuccess:function(e){r.successes.push({message:e,count:1})},addError:function(e,t,n,o){t=void 0!==typeof t?t:null,n=void 0!==typeof n&&n,o=void 0!==typeof o&&o;let a=!1,i=r.errors;for(let r=0;r<i.length;r++)i[r].message==e&&(i[r].count+=1,i[r].code=t,i[r].persistent=n,i[r].details=o,a=!0);a||r.errors.push({message:e,code:t,count:1,persistent:n,details:o})},addWarning:function(e){let t=!1,n=r.warnings;for(var o=0;o<n.length;o++)n[o].message==e&&(n[o].count+=1,t=!0);t||r.warnings.push({message:e,count:1})},addInfo:function(e){let t=!1,n=r.infos;for(var o=0;o<n.length;o++)n[o].message==e&&(n[o].count+=1,t=!0);t||r.infos.push({message:e,count:1})}};return a}]),angular.module("AmpersandApp").controller("NotificationCenterController",["$scope","$route","Restangular","$localStorage","NotificationService",function(e,t,n,o,r){e.localStorage=o,e.notifications=r.notifications,e.$on("$routeChangeSuccess",function(){e.notifications.successes=[],e.notifications.errors=e.notifications.errors.filter(function(e){return!!e.persistent&&(e.persistent=!1,!0)}),e.notifications.warnings=[],e.notifications.infos=[],e.notifications.invariants=[]}),e.closeAlert=function(e,t){e.splice(t,1)}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFtcGVyc2FuZEFwcC5qcyIsImFkbWluL2V4ZWNlbmdpbmUuY29udHJvbGxlci5qcyIsImFkbWluL2luc3RhbGxlci5jb250cm9sbGVyLmpzIiwiaW1wb3J0ZXIvaW1wb3J0ZXIubW9kdWxlLmpzIiwiaW50ZXJmYWNpbmcvYXRvbWljLmNvbnRyb2xsZXIuanMiLCJpbnRlcmZhY2luZy9hdG9taWNEYXRlLmNvbnRyb2xsZXIuanMiLCJpbnRlcmZhY2luZy9hdG9taWNUeXBlQWhlYWQuY29udHJvbGxlci5qcyIsImludGVyZmFjaW5nL2F0b21pY1VwbG9hZEZpbGUuY29udHJvbGxlci5qcyIsImludGVyZmFjaW5nL2JveC5jb250cm9sbGVyLmpzIiwiaW50ZXJmYWNpbmcvaW50ZXJmYWNlLmNvbnRyb2xsZXIuanMiLCJpbnRlcmZhY2luZy9yZXNvdXJjZS5zZXJ2aWNlLmpzIiwibmF2YmFyL25hdmlnYXRpb25CYXIuY29udHJvbGxlci5qcyIsIm5hdmJhci9uYXZpZ2F0aW9uQmFyLnNlcnZpY2UuanMiLCJuYXZiYXIvcm9sZS5zZXJ2aWNlLmpzIiwibmF2YmFyL3JvbGVNZW51LmNvbnRyb2xsZXIuanMiLCJub3RpZmljYXRpb25zL25vdGlmaWNhdGlvbi5zZXJ2aWNlLmpzIiwibm90aWZpY2F0aW9ucy9ub3RpZmljYXRpb25DZW50ZXIuY29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwiY29udHJvbGxlciIsInRlbXBsYXRlVXJsIiwiaW50ZXJmYWNlTGFiZWwiLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwiUmVzdGFuZ3VsYXJQcm92aWRlciIsInNldEJhc2VVcmwiLCJzZXREZWZhdWx0SGVhZGVycyIsIkNvbnRlbnQtVHlwZSIsInJ1biIsIlJlc3Rhbmd1bGFyIiwiJHJvb3RTY29wZSIsIiRsb2NhdGlvbiIsIiRyb3V0ZSIsIk5vdGlmaWNhdGlvblNlcnZpY2UiLCJSb2xlU2VydmljZSIsIk5hdmlnYXRpb25CYXJTZXJ2aWNlIiwiYWRkRnVsbFJlcXVlc3RJbnRlcmNlcHRvciIsImVsZW1lbnQiLCJvcGVyYXRpb24iLCJ3aGF0IiwidXJsIiwiaGVhZGVycyIsInBhcmFtcyIsImFkZFJlc3BvbnNlSW50ZXJjZXB0b3IiLCJkYXRhIiwicmVzcG9uc2UiLCJkZWZlcnJlZCIsInNlc3Npb25SZWZyZXNoQWR2aWNlIiwicmVmcmVzaE5hdkJhciIsIm5hdlRvIiwic2V0RXJyb3JJbnRlcmNlcHRvciIsInJlc3BvbnNlSGFuZGxlciIsIm1lc3NhZ2UiLCJkZXRhaWxzIiwic3RhdHVzIiwiZGVhY3RpdmF0ZUFsbFJvbGVzIiwicGF0aCIsImVycm9yIiwiYWRkSW5mbyIsIm1zZyIsInN0YXR1c1RleHQiLCJhZGRFcnJvciIsImh0bWwiLCJ1bmRlZmluZWQiLCJub3RpZmljYXRpb25zIiwidXBkYXRlTm90aWZpY2F0aW9ucyIsImdldEN1cnJlbnREYXRlVGltZSIsIkRhdGUiLCJvcmlnaW5hbCIsInJlbG9hZCIsImxhc3RSb3V0ZSIsImN1cnJlbnQiLCJ1biIsIiRvbiIsImFwcGx5IiwidmFsdWUiLCJiYWNrZHJvcCIsIm1pbkR1cmF0aW9uIiwiZGlyZWN0aXZlIiwibGluayIsInNjb3BlIiwiYXR0cnMiLCJjbG9zZXN0IiwiaGFzQ2xhc3MiLCJoaWRlIiwiYmluZCIsImFkZENsYXNzIiwic2hvdyIsInJlbW92ZUNsYXNzIiwiZXZlbnQiLCJ3aGljaCIsInRhcmdldCIsImJsdXIiLCJwcmV2ZW50RGVmYXVsdCIsImZpbHRlciIsIm9iaiIsImFkZEtleSIsIkFycmF5IiwiaXNBcnJheSIsIk9iamVjdCIsImtleXMiLCJtYXAiLCJrZXkiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJyZXN0cmljdCIsInJlc291cmNlIiwidHJhbnNjbHVkZSIsIiRzY2UiLCJ0cnVzdEFzSHRtbCIsIiRzY29wZSIsIm9uZSIsImdldCIsInRoZW4iLCJwbGFpbiIsImluc3RhbGxpbmciLCJpbnN0YWxsZWQiLCJpbnN0YWxsIiwiZGVmUG9wIiwiZGVmYXVsdFBvcCIsImFwcCIsInJlcXVpcmVzIiwibGVuZ3RoIiwic2VydmljZSIsIkZpbGVVcGxvYWRlciIsInVwbG9hZGVyIiwib25TdWNjZXNzSXRlbSIsImZpbGVJdGVtIiwib25FcnJvckl0ZW0iLCJpdGVtIiwiSW1wb3J0U2VydmljZSIsIlJlc291cmNlU2VydmljZSIsInNlbGVjdGVkIiwic2F2ZUl0ZW0iLCJhZGRJdGVtIiwicmVtb3ZlSXRlbSIsInJlbW92ZSIsInJlbW92ZVJlc291cmNlIiwiZGVsZXRlIiwiZGVsZXRlUmVzb3VyY2UiLCJwYWQiLCJudW1iZXIiLCJyIiwiU3RyaW5nIiwibW9kaWZ5VG9KU09OIiwidG9KU09OIiwidGhpcyIsImdldFVUQ0Z1bGxZZWFyIiwiZ2V0TW9udGgiLCJnZXREYXRlIiwiaXNPcGVuIiwib3BlbkRhdGVwaWNrZXIiLCIkZXZlbnQiLCJzdG9wUHJvcGFnYXRpb24iLCJzYXZlRGF0ZUl0ZW0iLCJwcm9wZXJ0eSIsInBhdGNoUmVzb3VyY2UiLCJhZGREYXRlSXRlbSIsImNvbnNvbGUiLCJsb2ciLCJoYXNOb1Jlc3VsdHMiLCJnZXRUeXBlYWhlYWQiLCJyZXNvdXJjZVR5cGUiLCJmb3JjZUdldENhbGwiLCJ0eXBlYWhlYWQiLCJhbGwiLCJnZXRMaXN0IiwiJG9iamVjdCIsInR5cGVhaGVhZE9uU2VsZWN0IiwiJGl0ZW0iLCIkbW9kZWwiLCIkbGFiZWwiLCJpZmMiLCJfaWRfIiwicHVzaCIsImNvcHkiLCJwYXRjaCIsImNyZWF0ZVBhdGNoIiwiYWRkUGF0Y2hlcyIsInR5cGVBaGVhZENyZWF0ZSIsImFsaWFzIiwiZm9ybURhdGEiLCJyZW1vdmVBZnRlclVwbG9hZCIsImF1dG9VcGxvYWQiLCJjb250ZW50IiwiY29kZSIsImNyZWF0ZVJlc291cmNlIiwic2F2ZSIsInNhdmVSZXNvdXJjZSIsImNhbmNlbCIsImNhbmNlbFJlc291cmNlIiwibmV4dCIsImNoZWNrUmVxdWlyZWQiLCJjb25maXJtZWQiLCJjb25maXJtIiwiZW1wdHlVcGRhdGVkUmVzb3VyY2VzIiwibmV3UmVzb3VyY2UiLCJpZmNOYW1lIiwicGVuZGluZ1Byb21pc2VzIiwiJGxvY2FsU3RvcmFnZSIsIiR0aW1lb3V0IiwidXBkYXRlZFJlc291cmNlcyIsImdldFJlc291cmNlIiwiY2FsbGluZ09iaiIsInByb21pc2UiLCJfcGF0aF8iLCIkIiwiaXNFbXB0eU9iamVjdCIsImV4dGVuZCIsImluaXRSZXNvdXJjZU1ldGFEYXRhIiwiX2xvYWRpbmdfIiwiX3BhdGNoZXNDYWNoZV8iLCJfaXNSb290XyIsInByb2Nlc3NSZXNwb25zZSIsImdldE5vdGlmaWNhdGlvbnMiLCJwcmVwZW5kIiwicG9zdCIsInVuc2hpZnQiLCJwYXJlbnQiLCJzcGxpY2UiLCJpbmRleE9mIiwiJHEiLCJyZWplY3QiLCJpbmRleCIsInBhdGhMZW5ndGgiLCJzdWJzdHJpbmciLCJvcCIsInBhdGNoZXMiLCJjb25jYXQiLCJzd2l0Y2hBdXRvU2F2ZSIsInNldFJlc291cmNlU3RhdHVzIiwiX3Nob3dCdXR0b25zXyIsInJlc29sdmUiLCJyZWR1Y2UiLCJwcmV2IiwiYXJyIiwiaW52YXJpYW50UnVsZXNIb2xkIiwiX3N0YXR1c18iLCJ3YXJuaW5nIiwiZGFuZ2VyIiwiZGVmYXVsdCIsInN1Y2Nlc3MiLCJzb21lIiwidmFsIiwiJCRzdGF0ZSIsIiRzZXNzaW9uU3RvcmFnZSIsIiRzdG9yYWdlIiwiZGVmYXVsdFNldHRpbmdzIiwibG9hZGluZ05hdkJhciIsIm5hdmJhciIsImNoZWNrQWxsUnVsZXMiLCJjcmVhdGVOZXdSZXNvdXJjZSIsIm9wZW5XaXRoSWZjIiwicmVzZXRTZXR0aW5ncyIsImZvckVhY2giLCJub3RpZmljYXRpb25QcmVmcyIsInJlc2V0Tm90aWZpY2F0aW9uU2V0dGluZ3MiLCJyZXNldFN3aXRjaEF1dG9TYXZlIiwiJHdpbmRvdyIsInciLCJyZXNpemVOYXZiYXIiLCJ3aWR0aCIsImNoaWxkcmVuIiwiZmlyc3QiLCJhcHBlbmRUbyIsImxhc3QiLCJwcmVwZW5kVG8iLCJ0b2dnbGVDbGFzcyIsIiR3YXRjaCIsInNlc3Npb24iLCJzZXNzaW9uUm9sZXMiLCJzZXNzaW9uVmFycyIsInNlbGVjdFJvbGUiLCJyb2xlSWQiLCJ0b2dnbGVSb2xlIiwic2VsZWN0Um9sZUJ5TGFiZWwiLCJyb2xlTGFiZWwiLCJyb2xlIiwibGFiZWwiLCJpZCIsInNldCIsImFjdGl2ZSIsImdldEFjdGl2ZVJvbGVJZHMiLCJyb2xlSWRzIiwic2V0QWN0aXZlUm9sZXMiLCJwcm9taXNlcyIsInNpZ25hbHMiLCJpbnZhcmlhbnRzIiwiaW5mb3MiLCJzdWNjZXNzZXMiLCJ3YXJuaW5ncyIsImVycm9ycyIsImFkZFN1Y2Nlc3MiLCJzd2l0Y2hBdXRvSGlkZVN1Y2Nlc3NlcyIsImNvdW50IiwicGVyc2lzdGVudCIsImFscmVhZHlFeGlzdHMiLCJpIiwiYWRkV2FybmluZyIsImxvY2FsU3RvcmFnZSIsImNsb3NlQWxlcnQiLCJhbGVydHMiXSwibWFwcGluZ3MiOiJBQUNBQSxRQUFBQyxPQUFBLGdCQUFBLGFBQUEsVUFBQSxhQUFBLGNBQUEsZUFBQSxXQUFBLFNBQUEsVUFBQSxpQkFBQSxZQUFBLG9CQUFBLDhCQUFBLGNBQ0FDLFFBQUEsaUJBQUEsU0FBQUMsR0FDQUEsRUFFQUMsS0FBQSxLQUNBQyxXQUFBLEdBQ0FDLFlBQUEsa0NBQ0FDLGVBQUEsU0FHQUgsS0FBQSxvQkFDQUMsV0FBQSxzQkFDQUMsWUFBQSxzQ0FDQUMsZUFBQSxjQUVBSCxLQUFBLFFBQ0FFLFlBQUEsaUNBQ0FDLGVBQUEsUUFFQUMsV0FBQUMsV0FBQSxZQUNBUCxRQUFBLHNCQUFBLFNBQUFRLEdBRUFBLEVBQUFDLFdBQUEsVUFDQUQsRUFBQUUsbUJBQUFDLGVBQUEsd0JBR0FDLEtBQUEsY0FBQSxhQUFBLFlBQUEsU0FBQSxzQkFBQSxjQUFBLHVCQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBRUFOLEVBQUFPLDBCQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdB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OU8sRUFBQThPLFlBQUEsR0FDQSxLQUlBekwsRUFBQTlDLGNBQUFrTyxZQUNBcEwsRUFBQTlDLGNBQUFnTyxTQUNBbEwsRUFBQTlDLGNBQUErTixnQkFJQWpMLEVBQUE4TCxXQUFBLFNBQUFDLEVBQUE5RSxHQUNBOEUsRUFBQWxGLE9BQUFJLEVBQUEiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gd2hlbiB1c2luZyBtaW5pZmllZCBhbmd1bGFyIG1vZHVsZXMsIHVzZSBtb2R1bGUoJ215QXBwJywgW10pLmNvbnRyb2xsZXIoJ015Q29udHJvbGxlcicsIFsnbXlTZXJ2aWNlJywgZnVuY3Rpb24gKG15U2VydmljZSkgeyAuLi5cclxuYW5ndWxhci5tb2R1bGUoJ0FtcGVyc2FuZEFwcCcsIFsnbmdSZXNvdXJjZScsICduZ1JvdXRlJywgJ25nU2FuaXRpemUnLCAncmVzdGFuZ3VsYXInLCAndWkuYm9vdHN0cmFwJywgJ3VpU3dpdGNoJywgJ2NnQnVzeScsICdzaVRhYmxlJywgJ25nLWNvZGUtbWlycm9yJywgJ25nU3RvcmFnZScsICdhbmd1bGFyRmlsZVVwbG9hZCcsICd1aS5ib290c3RyYXAuZGF0ZXRpbWVwaWNrZXInLCAnaGMubWFya2VkJ10pXHJcbi5jb25maWcoZnVuY3Rpb24oJHJvdXRlUHJvdmlkZXIpIHtcclxuICAgICRyb3V0ZVByb3ZpZGVyXHJcbiAgICAgICAgLy8gZGVmYXVsdCBzdGFydCBwYWdlXHJcbiAgICAgICAgLndoZW4oJy8nLCB7IFxyXG4gICAgICAgICAgICBjb250cm9sbGVyIDogJycsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogJ2FwcC9jb21wb25lbnRzL3NoYXJlZC9ob21lLmh0bWwnLFxyXG4gICAgICAgICAgICBpbnRlcmZhY2VMYWJlbCA6ICdIb21lJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIC8vIGluc3RhbGxlciBwYWdlXHJcbiAgICAgICAgLndoZW4oJy9hZG1pbi9pbnN0YWxsZXInLCB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiAnSW5zdGFsbGVyQ29udHJvbGxlcicsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogJ2FwcC9jb21wb25lbnRzL2FkbWluL2luc3RhbGxlci5odG1sJyxcclxuICAgICAgICAgICAgaW50ZXJmYWNlTGFiZWwgOiAnSW5zdGFsbGVyJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIC53aGVuKCcvNDA0Jywge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9jb21wb25lbnRzL3NoYXJlZC80MDQuaHRtbCcsXHJcbiAgICAgICAgICAgIGludGVyZmFjZUxhYmVsOiAnNDA0J1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIC5vdGhlcndpc2Uoe3JlZGlyZWN0VG86ICcvNDA0J30pO1xyXG59KS5jb25maWcoZnVuY3Rpb24oUmVzdGFuZ3VsYXJQcm92aWRlcikge1xyXG4gICAgXHJcbiAgICBSZXN0YW5ndWxhclByb3ZpZGVyLnNldEJhc2VVcmwoJ2FwaS92MScpOyAvLyBHZW5lcmF0ZTogcGF0aCB0byBBUEkgZm9sZGVyXHJcbiAgICBSZXN0YW5ndWxhclByb3ZpZGVyLnNldERlZmF1bHRIZWFkZXJzKHtcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIn0pO1xyXG4gICAgLy8gUmVzdGFuZ3VsYXJQcm92aWRlci5zZXRQbGFpbkJ5RGVmYXVsdCh0cnVlKTsgYXZhaWxhYmxlIGZyb20gUmVzdGFuZ3VsYXIgdjEuNS4zXHJcbiAgICBcclxufSkucnVuKGZ1bmN0aW9uKFJlc3Rhbmd1bGFyLCAkcm9vdFNjb3BlLCAkbG9jYXRpb24sICRyb3V0ZSwgTm90aWZpY2F0aW9uU2VydmljZSwgUm9sZVNlcnZpY2UsIE5hdmlnYXRpb25CYXJTZXJ2aWNlKXtcclxuXHJcbiAgICBSZXN0YW5ndWxhci5hZGRGdWxsUmVxdWVzdEludGVyY2VwdG9yKGZ1bmN0aW9uKGVsZW1lbnQsIG9wZXJhdGlvbiwgd2hhdCwgdXJsLCBoZWFkZXJzLCBwYXJhbXMpe1xyXG4gICAgICAgIC8vcGFyYW1zLm5hdklmYyA9IHRydWU7XHJcbiAgICAgICAgLy9wYXJhbXMubWV0YURhdGEgPSB0cnVlO1xyXG4gICAgICAgIHJldHVybiBwYXJhbXM7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgUmVzdGFuZ3VsYXIuYWRkUmVzcG9uc2VJbnRlcmNlcHRvcihmdW5jdGlvbihkYXRhLCBvcGVyYXRpb24sIHdoYXQsIHVybCwgcmVzcG9uc2UsIGRlZmVycmVkKXtcclxuICAgICAgICBpZihvcGVyYXRpb24gIT0gJ2dldCcgJiYgb3BlcmF0aW9uICE9ICdnZXRMaXN0JyAmJiBkYXRhLnNlc3Npb25SZWZyZXNoQWR2aWNlKSBOYXZpZ2F0aW9uQmFyU2VydmljZS5yZWZyZXNoTmF2QmFyKCk7XHJcblx0XHRpZihkYXRhLm5hdlRvICE9IG51bGwpICRsb2NhdGlvbi51cmwoZGF0YS5uYXZUbyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgUmVzdGFuZ3VsYXIuc2V0RXJyb3JJbnRlcmNlcHRvcihmdW5jdGlvbihyZXNwb25zZSwgZGVmZXJyZWQsIHJlc3BvbnNlSGFuZGxlcikge1xyXG4gICAgICAgIC8vIDQwMTogVW5hdXRob3JpemVkXHJcbiAgICAgICAgaWYocmVzcG9uc2Uuc3RhdHVzID09IDQwMSkge1xyXG4gICAgICAgICAgICBSb2xlU2VydmljZS5kZWFjdGl2YXRlQWxsUm9sZXMoKTtcclxuICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJycpOyAvLyBUT0RPOiByZWRpcmVjdCB0byBsb2dpbiBwYWdlIChpZiBleGlzdHMpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciBtZXNzYWdlO1xyXG4gICAgICAgIHZhciBkZXRhaWxzO1xyXG4gICAgICAgIGlmKHR5cGVvZiByZXNwb25zZS5kYXRhID09PSAnb2JqZWN0Jyl7XHJcbiAgICAgICAgICAgIGlmKHJlc3BvbnNlLmRhdGEuZXJyb3IgPT0gNDA0KSB7XHJcbiAgICAgICAgICAgICAgICBOb3RpZmljYXRpb25TZXJ2aWNlLmFkZEluZm8ocmVzcG9uc2UuZGF0YS5tc2cgfHwgJ1Jlc291cmNlIG5vdCBmb3VuZCcpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IHJlc3BvbnNlLmRhdGEubXNnIHx8IHJlc3BvbnNlLnN0YXR1c1RleHQ7IC8vIGlmIGVtcHR5IHJlc3BvbnNlIG1lc3NhZ2UsIHRha2Ugc3RhdHVzVGV4dFxyXG4gICAgICAgICAgICAgICAgTm90aWZpY2F0aW9uU2VydmljZS5hZGRFcnJvcihtZXNzYWdlLCByZXNwb25zZS5zdGF0dXMsIHRydWUsIHJlc3BvbnNlLmRhdGEuaHRtbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmKHJlc3BvbnNlLmRhdGEubm90aWZpY2F0aW9ucyAhPT0gdW5kZWZpbmVkKSBOb3RpZmljYXRpb25TZXJ2aWNlLnVwZGF0ZU5vdGlmaWNhdGlvbnMocmVzcG9uc2UuZGF0YS5ub3RpZmljYXRpb25zKTsgXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIG1lc3NhZ2UgPSByZXNwb25zZS5zdGF0dXMgKyAnICcgKyByZXNwb25zZS5zdGF0dXNUZXh0O1xyXG4gICAgICAgICAgICBkZXRhaWxzID0gcmVzcG9uc2UuZGF0YTsgLy8gaHRtbCBjb250ZW50IGlzIGV4Y2VwdGVkXHJcbiAgICAgICAgICAgIE5vdGlmaWNhdGlvblNlcnZpY2UuYWRkRXJyb3IobWVzc2FnZSwgcmVzcG9uc2Uuc3RhdHVzLCB0cnVlLCBkZXRhaWxzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHRydWU7IC8vIHByb2NlZWQgd2l0aCBzdWNjZXNzIG9yIGVycm9yIGhvb2tzIG9mIHByb21pc2VcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICAkcm9vdFNjb3BlLmdldEN1cnJlbnREYXRlVGltZSA9IGZ1bmN0aW9uICgpe1xyXG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSgpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgLy8gQWRkIGZlYXR1cmUgdG8gJGxvY2F0aW9uLnVybCgpIGZ1bmN0aW9uIHRvIGJlIGFibGUgdG8gcHJldmVudCByZWxvYWRpbmcgcGFnZSAoc2V0IHJlbG9hZCBwYXJhbSB0byBmYWxzZSlcclxuICAgIHZhciBvcmlnaW5hbCA9ICRsb2NhdGlvbi51cmw7XHJcbiAgICAkbG9jYXRpb24udXJsID0gZnVuY3Rpb24gKHVybCwgcmVsb2FkKSB7XHJcbiAgICAgICAgaWYgKHJlbG9hZCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgdmFyIGxhc3RSb3V0ZSA9ICRyb3V0ZS5jdXJyZW50O1xyXG4gICAgICAgICAgICB2YXIgdW4gPSAkcm9vdFNjb3BlLiRvbignJGxvY2F0aW9uQ2hhbmdlU3VjY2VzcycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICRyb3V0ZS5jdXJyZW50ID0gbGFzdFJvdXRlO1xyXG4gICAgICAgICAgICAgICAgdW4oKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvcmlnaW5hbC5hcHBseSgkbG9jYXRpb24sIFt1cmxdKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIFxyXG59KS52YWx1ZSgnY2dCdXN5RGVmYXVsdHMnLHtcclxuICAgIG1lc3NhZ2U6J0xvYWRpbmcuLi4nLFxyXG4gICAgYmFja2Ryb3A6IHRydWUsXHJcbiAgICAvL3RlbXBsYXRlVXJsOiAnbXlfY3VzdG9tX3RlbXBsYXRlLmh0bWwnLFxyXG4gICAgLy9kZWxheTogNTAwLCAvLyBpbiBtc1xyXG4gICAgbWluRHVyYXRpb246IDUwMCwgLy8gaW4gbXNcclxuICAgIC8vIHdyYXBwZXJDbGFzczogJ215LWNsYXNzIG15LWNsYXNzMidcclxufSkuZGlyZWN0aXZlKCdteVNob3dvbmhvdmVyQm94JywgZnVuY3Rpb24gKCl7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGxpbmsgOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcclxuICAgICAgICAgICAgaWYoIWVsZW1lbnQuY2xvc2VzdCgnLmJveCcpLmhhc0NsYXNzKCdteS1zaG93b25ob3Zlci1ib3gtc2hvdycpKSBlbGVtZW50LmhpZGUoKTsgLy8gZGVmYXVsdCBoaWRlXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBlbGVtZW50LmNsb3Nlc3QoJy5ib3gnKS5iaW5kKCdtb3VzZWVudGVyJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsb3Nlc3QoJy5ib3gnKS5hZGRDbGFzcygnbXktc2hvd29uaG92ZXItYm94LXNob3cnKTtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuc2hvdygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZWxlbWVudC5jbG9zZXN0KCcuYm94JykuYmluZCgnbW91c2VsZWF2ZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbG9zZXN0KCcuYm94JykucmVtb3ZlQ2xhc3MoJ215LXNob3dvbmhvdmVyLWJveC1zaG93Jyk7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmhpZGUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufSkuZGlyZWN0aXZlKCdteUJsdXJvbmVudGVyJywgZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XHJcbiAgICAgICAgZWxlbWVudC5iaW5kKFwia2V5ZG93biBrZXlwcmVzc1wiLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgICBpZihldmVudC53aGljaCA9PT0gMTMpIHsgLy8gMTMgPSBDYXJyaWFnZSByZXR1cm5cclxuICAgICAgICAgICAgICAgIGV2ZW50LnRhcmdldC5ibHVyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufSkuZmlsdGVyKCd0b0FycmF5JywgZnVuY3Rpb24oKSB7XHJcbiAgICAvLyB1c2VkIGZyb206IGh0dHBzOi8vZ2l0aHViLmNvbS9wZXRlYmFjb25kYXJ3aW4vYW5ndWxhci10b0FycmF5RmlsdGVyXHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKG9iaiwgYWRkS2V5KSB7XHJcbiAgICAgICAgaWYgKCFvYmopIHJldHVybiBvYmo7XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkgcmV0dXJuIG9iajsgLy8gb2JqIGlzIGFscmVhZHkgYW4gYXJyYXlcclxuICAgICAgICBpZiAoIGFkZEtleSA9PT0gZmFsc2UgKSB7XHJcbiAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5tYXAoZnVuY3Rpb24oa2V5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBvYmpba2V5XTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5tYXAoZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KG9ialtrZXldLCAnJGtleScsIHsgZW51bWVyYWJsZTogZmFsc2UsIHZhbHVlOiBrZXl9KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxufSkuZGlyZWN0aXZlKCdteU5hdlRvSW50ZXJmYWNlcycsIGZ1bmN0aW9uKCl7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJlc3RyaWN0IDogJ0UnLFxyXG4gICAgICAgIHNjb3BlIDoge3Jlc291cmNlIDogJz0nLCB0YXJnZXQgOiAnQCd9LCAvLyAnPScgPT4gdHdvLXdheSBiaW5kLCAnQCcgPT4gZXZhbHVhdGVzIHN0cmluZyAodXNlIHt7fX0gaW4gaHRtbCkgXHJcbiAgICAgICAgdGVtcGxhdGVVcmwgOiAnYXBwL2NvbXBvbmVudHMvc2hhcmVkL3BhcnRpYWxzL215TmF2VG9JbnRlcmZhY2VzLmh0bWwnLFxyXG4gICAgICAgIHRyYW5zY2x1ZGUgOiB0cnVlXHJcbiAgICB9O1xyXG59KS5kaXJlY3RpdmUoJ215TmF2VG9PdGhlckludGVyZmFjZXMnLCBmdW5jdGlvbigpe1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICByZXN0cmljdCA6ICdFJyxcclxuICAgICAgICBzY29wZSAgOiB7cmVzb3VyY2UgOiAnPScsIHRhcmdldCA6ICdAJ30sIC8vICc9JyA9PiB0d28td2F5IGJpbmQsICdAJyA9PiBldmFsdWF0ZXMgc3RyaW5nICh1c2Uge3t9fSBpbiBodG1sKSBcclxuICAgICAgICB0ZW1wbGF0ZVVybCA6ICdhcHAvY29tcG9uZW50cy9zaGFyZWQvcGFydGlhbHMvbXlOYXZUb090aGVySW50ZXJmYWNlcy5odG1sJ1xyXG4gICAgfTtcclxufSkuZmlsdGVyKCd1bnNhZmUnLCBmdW5jdGlvbigkc2NlKXtcclxuICAgIHJldHVybiAkc2NlLnRydXN0QXNIdG1sO1xyXG59KTsiLCIvLyBDb250cm9sbGVyIGZvciBleHRlbnNpb24gYXBwIGluIG5hdmlnYXRpb24gYmFyXHJcbmFuZ3VsYXIubW9kdWxlKCdBbXBlcnNhbmRBcHAnKS5jb250cm9sbGVyKCdFeGVjRW5naW5lQ29udHJvbGxlcicsIGZ1bmN0aW9uICgkc2NvcGUsIFJlc3Rhbmd1bGFyLCBOb3RpZmljYXRpb25TZXJ2aWNlKSB7XHJcbiAgICAkc2NvcGUucnVuID0gZnVuY3Rpb24gKCl7XHJcbiAgICAgICAgUmVzdGFuZ3VsYXIub25lKCdhZG1pbi9leGVjZW5naW5lL3J1bicpLmdldCgpXHJcbiAgICAgICAgLnRoZW4oXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKGRhdGEpeyAvLyBvbiBzdWNjZXNzXHJcbiAgICAgICAgICAgICAgICBkYXRhID0gZGF0YS5wbGFpbigpO1xyXG4gICAgICAgICAgICAgICAgTm90aWZpY2F0aW9uU2VydmljZS51cGRhdGVOb3RpZmljYXRpb25zKGRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdBbXBlcnNhbmRBcHAnKS5jb250cm9sbGVyKCdJbnN0YWxsZXJDb250cm9sbGVyJywgZnVuY3Rpb24gKCRzY29wZSwgUmVzdGFuZ3VsYXIsIE5vdGlmaWNhdGlvblNlcnZpY2UsIFJvbGVTZXJ2aWNlKSB7XHJcbiAgICAkc2NvcGUuaW5zdGFsbGluZyA9IGZhbHNlO1xyXG4gICAgJHNjb3BlLmluc3RhbGxlZCA9IGZhbHNlO1xyXG4gICAgXHJcbiAgICAkc2NvcGUuaW5zdGFsbCA9IGZ1bmN0aW9uKGRlZlBvcCl7XHJcbiAgICAgICAgJHNjb3BlLmluc3RhbGxpbmcgPSB0cnVlO1xyXG4gICAgICAgICRzY29wZS5pbnN0YWxsZWQgPSBmYWxzZTtcclxuICAgICAgICBSZXN0YW5ndWxhci5vbmUoJ2FkbWluL2luc3RhbGxlcicpLmdldCh7ZGVmYXVsdFBvcCA6IGRlZlBvcH0pLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICBkYXRhID0gZGF0YS5wbGFpbigpO1xyXG4gICAgICAgICAgICBOb3RpZmljYXRpb25TZXJ2aWNlLnVwZGF0ZU5vdGlmaWNhdGlvbnMoZGF0YSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBkZWFjdGl2ZSBhbGwgcm9sZXNcclxuICAgICAgICAgICAgUm9sZVNlcnZpY2UuZGVhY3RpdmF0ZUFsbFJvbGVzKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAkc2NvcGUuaW5zdGFsbGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkc2NvcGUuaW5zdGFsbGVkID0gdHJ1ZTtcclxuICAgICAgICB9LCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAkc2NvcGUuaW5zdGFsbGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkc2NvcGUuaW5zdGFsbGVkID0gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgXHJcbn0pOyIsInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnQW1wZXJzYW5kQXBwJyk7XHJcbmFwcC5yZXF1aXJlc1thcHAucmVxdWlyZXMubGVuZ3RoXSA9ICdhbmd1bGFyRmlsZVVwbG9hZCc7IC8vIGFkZCBhbmd1bGFyRmlsZVVwbG9hZCB0byBkZXBlbmRlbmN5IGxpc3RcclxuYXBwLmNvbmZpZyhmdW5jdGlvbigkcm91dGVQcm92aWRlcikge1xyXG4gICAgJHJvdXRlUHJvdmlkZXJcclxuICAgICAgICAud2hlbignL2V4dC9pbXBvcnRlcicsIHtcclxuICAgICAgICAgICAgY29udHJvbGxlciA6ICdQb3B1bGF0aW9uSW1wb3J0Q29udHJvbGxlcicsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogJ2FwcC9jb21wb25lbnRzL2ltcG9ydGVyL2ltcG9ydGVyLmh0bWwnLFxyXG4gICAgICAgICAgICBpbnRlcmZhY2VMYWJlbCA6ICdQb3B1bGF0aW9uIGltcG9ydGVyJ1xyXG4gICAgICAgIH0pO1xyXG59KS5zZXJ2aWNlKCdJbXBvcnRTZXJ2aWNlJywgZnVuY3Rpb24oRmlsZVVwbG9hZGVyLCBOb3RpZmljYXRpb25TZXJ2aWNlKXtcclxuICAgIGxldCB1cGxvYWRlciA9IG5ldyBGaWxlVXBsb2FkZXIoe1xyXG4gICAgICAgIHVybDogJ2FwaS92MS9hZG1pbi9pbXBvcnQnXHJcbiAgICB9KTtcclxuXHJcbiAgICB1cGxvYWRlci5vblN1Y2Nlc3NJdGVtID0gZnVuY3Rpb24oZmlsZUl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcclxuICAgICAgICBOb3RpZmljYXRpb25TZXJ2aWNlLnVwZGF0ZU5vdGlmaWNhdGlvbnMocmVzcG9uc2Uubm90aWZpY2F0aW9ucyk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB1cGxvYWRlci5vbkVycm9ySXRlbSA9IGZ1bmN0aW9uKGl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpe1xyXG4gICAgICAgIGxldCBtZXNzYWdlO1xyXG4gICAgICAgIGxldCBkZXRhaWxzO1xyXG4gICAgICAgIGlmKHR5cGVvZiByZXNwb25zZSA9PT0gJ29iamVjdCcpe1xyXG4gICAgICAgICAgICBtZXNzYWdlID0gcmVzcG9uc2UubXNnIHx8ICdFcnJvciB3aGlsZSBpbXBvcnRpbmcnO1xyXG4gICAgICAgICAgICBOb3RpZmljYXRpb25TZXJ2aWNlLmFkZEVycm9yKG1lc3NhZ2UsIHN0YXR1cywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZihyZXNwb25zZS5ub3RpZmljYXRpb25zICE9PSB1bmRlZmluZWQpIE5vdGlmaWNhdGlvblNlcnZpY2UudXBkYXRlTm90aWZpY2F0aW9ucyhyZXNwb25zZS5ub3RpZmljYXRpb25zKTsgXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBzdGF0dXMgKyAnIEVycm9yIHdoaWxlIGltcG9ydGluZyc7XHJcbiAgICAgICAgICAgIGRldGFpbHMgPSByZXNwb25zZTsgLy8gaHRtbCBjb250ZW50IGlzIGV4Y2VwdGVkXHJcbiAgICAgICAgICAgIE5vdGlmaWNhdGlvblNlcnZpY2UuYWRkRXJyb3IobWVzc2FnZSwgc3RhdHVzLCB0cnVlLCBkZXRhaWxzKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICByZXR1cm4ge3VwbG9hZGVyIDogdXBsb2FkZXJ9O1xyXG59KS5jb250cm9sbGVyKCdQb3B1bGF0aW9uSW1wb3J0Q29udHJvbGxlcicsIGZ1bmN0aW9uICgkc2NvcGUsIEltcG9ydFNlcnZpY2UpIHtcclxuICAgICRzY29wZS51cGxvYWRlciA9IEltcG9ydFNlcnZpY2UudXBsb2FkZXI7XHJcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdBbXBlcnNhbmRBcHAnKS5jb250cm9sbGVyKCdBdG9taWNDb250cm9sbGVyJywgZnVuY3Rpb24oJHNjb3BlLCBSZXNvdXJjZVNlcnZpY2Upe1xyXG4gICAgXHJcbiAgICAvKlxyXG4gICAgICogT2JqZWN0IHRvIHRlbXBvcmFyeSBzdG9yZSB2YWx1ZS9yZXNvdXJjZUlkIHRvIGFkZCB0byBsaXN0XHJcbiAgICAgKiBWYWx1ZS9yZXNvdXJjZUlkIGlzIHN0b3JlZCBhcyBwcm9wZXJ0eSBvZiAnc2VsZWN0ZWQnIG9iai4gVGhpcyBpcyBuZWVkZWQgdG8gcGFzcyBpdCBhcm91bmQgYnkgcmVmZXJlbmNlXHJcbiAgICAgKi9cclxuICAgICRzY29wZS5zZWxlY3RlZCA9IHt9O1xyXG4gICAgXHJcbiAgICAkc2NvcGUuc2F2ZUl0ZW0gPSBSZXNvdXJjZVNlcnZpY2Uuc2F2ZUl0ZW07IC8vIGZ1bmN0aW9uKHJlc291cmNlLCBpZmMsIHBhdGNoUmVzb3VyY2UpXHJcbiAgICBcclxuICAgICRzY29wZS5hZGRJdGVtID0gUmVzb3VyY2VTZXJ2aWNlLmFkZEl0ZW07IC8vIGZ1bmN0aW9uKHJlc291cmNlLCBpZmMsIHNlbGVjdGVkLCBwYXRjaFJlc291cmNlKVxyXG4gICAgXHJcbiAgICAkc2NvcGUucmVtb3ZlSXRlbSA9IFJlc291cmNlU2VydmljZS5yZW1vdmVJdGVtOyAvLyBmdW5jdGlvbihyZXNvdXJjZSwgaWZjLCBpbmRleCwgcGF0Y2hSZXNvdXJjZSlcclxuICAgIFxyXG4gICAgJHNjb3BlLnJlbW92ZSA9IFJlc291cmNlU2VydmljZS5yZW1vdmVSZXNvdXJjZTsgLy8gZnVuY3Rpb24oaWZjLCByZXNvdXJjZSwgcGF0Y2hSZXNvdXJjZSlcclxuICAgIFxyXG4gICAgJHNjb3BlLmRlbGV0ZSA9IFJlc291cmNlU2VydmljZS5kZWxldGVSZXNvdXJjZTsgLy8gZnVuY3Rpb24oaWZjLCByZXNvdXJjZSlcclxufSk7IiwiYW5ndWxhci5tb2R1bGUoJ0FtcGVyc2FuZEFwcCcpLmNvbnRyb2xsZXIoJ0F0b21pY0RhdGVDb250cm9sbGVyJywgZnVuY3Rpb24gKCRzY29wZSwgUmVzb3VyY2VTZXJ2aWNlKSB7XHJcbiAgICBcclxuICAgICRzY29wZS5pc09wZW4gPSBmYWxzZTtcclxuICAgIFxyXG4gICAgJHNjb3BlLm9wZW5EYXRlcGlja2VyID0gZnVuY3Rpb24oJGV2ZW50KXtcclxuICAgICAgICAkZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgJHNjb3BlLmlzT3BlbiA9IHRydWU7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAvLyBBZGRzIGxlYWRpbmcgMCBpZiBuZWNlc2FycnkuIFJldHVybnMgMiBkaWdpdHMuXHJcbiAgICBmdW5jdGlvbiBwYWQobnVtYmVyKSB7XHJcbiAgICAgICAgdmFyIHIgPSBTdHJpbmcobnVtYmVyKTtcclxuICAgICAgICBpZiAoIHIubGVuZ3RoID09PSAxICkge1xyXG4gICAgICAgICAgICByID0gJzAnICsgcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHI7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIG1vZGlmeVRvSlNPTihvYmope1xyXG4gICAgICAgIGlmKG9iaiAhPT0gbnVsbCl7XHJcbiAgICAgICAgICAgIG9iai50b0pTT04gPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VVRDRnVsbFllYXIoKSArIFxyXG4gICAgICAgICAgICAgICAgICAgICctJyArIHBhZCh0aGlzLmdldE1vbnRoKCkgKyAxKSArIC8vIFRoZSBnZXRNb250aCgpIG1ldGhvZCByZXR1cm5zIHRoZSBtb250aCBpbiB0aGUgc3BlY2lmaWVkIGRhdGUgYWNjb3JkaW5nIHRvIGxvY2FsIHRpbWUsIGFzIGEgemVyby1iYXNlZCB2YWx1ZSAod2hlcmUgemVybyBpbmRpY2F0ZXMgdGhlIGZpcnN0IG1vbnRoIG9mIHRoZSB5ZWFyKS5cclxuICAgICAgICAgICAgICAgICAgICAnLScgKyBwYWQodGhpcy5nZXREYXRlKCkpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgJHNjb3BlLnNlbGVjdGVkID0geyB2YWx1ZSA6ICcnfTsgLy8gYW4gZW1wdHkgb2JqZWN0IGZvciB0ZW1wb3Jhcnkgc3RvcmluZyB0aGUgaW5wdXQgdmFsdWVzXHJcbiAgICBcclxuICAgICRzY29wZS5zYXZlRGF0ZUl0ZW0gPSBmdW5jdGlvbihvYmosIHByb3BlcnR5LCBwYXRjaFJlc291cmNlKXtcclxuICAgICAgICBtb2RpZnlUb0pTT04ob2JqW3Byb3BlcnR5XSk7XHJcbiAgICAgICAgUmVzb3VyY2VTZXJ2aWNlLnNhdmVJdGVtKG9iaiwgcHJvcGVydHksIHBhdGNoUmVzb3VyY2UpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgJHNjb3BlLmFkZERhdGVJdGVtID0gZnVuY3Rpb24ob2JqLCBwcm9wZXJ0eSwgc2VsZWN0ZWQsIHBhdGNoUmVzb3VyY2Upe1xyXG4gICAgICAgIGlmKHNlbGVjdGVkLnZhbHVlICE9PSAnJyl7XHJcbiAgICAgICAgICAgIG1vZGlmeVRvSlNPTihzZWxlY3RlZC52YWx1ZSk7XHJcbiAgICAgICAgICAgIFJlc291cmNlU2VydmljZS5hZGRJdGVtKG9iaiwgcHJvcGVydHksIHNlbGVjdGVkLCBwYXRjaFJlc291cmNlKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0VtcHR5IGRhdGUgc2VsZWN0ZWQnKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnQW1wZXJzYW5kQXBwJykuY29udHJvbGxlcignQXRvbWljVHlwZUFoZWFkQ29udHJvbGxlcicsIGZ1bmN0aW9uKCRzY29wZSwgUmVzdGFuZ3VsYXIsIFJlc291cmNlU2VydmljZSl7XHJcbiAgICBcclxuICAgIC8qXHJcbiAgICAgKiBPYmplY3QgdG8gdGVtcG9yYXJ5IHN0b3JlIHZhbHVlL3Jlc291cmNlSWQgdG8gYWRkIHRvIGxpc3RcclxuICAgICAqIFZhbHVlL3Jlc291cmNlSWQgaXMgc3RvcmVkIGFzIHByb3BlcnR5IG9mICdzZWxlY3RlZCcgb2JqLiBUaGlzIGlzIG5lZWRlZCB0byBwYXNzIGl0IGFyb3VuZCBieSByZWZlcmVuY2VcclxuICAgICAqL1xyXG4gICAgJHNjb3BlLnNlbGVjdGVkID0ge307XHJcbiAgICBcclxuICAgICRzY29wZS5oYXNOb1Jlc3VsdHMgPSBmYWxzZTtcclxuICAgIFxyXG4gICAgLypcclxuICAgICAqIFR5cGVhaGVhZCBvYmplY3QgaXMgZGVjbGFyZWQgaW4gaW50ZXJmYWNlLmNvbnRyb2xsZXIuanNcclxuICAgICAqIFRoZXJlYnkgdHlwZWFoZWFkIGlzIGNhbGxlZCBvbmx5IG9uY2UgZm9yIGV2ZXJ5IHJlc291cmNlVHlwZSBwZXIgaW50ZXJmYWNlXHJcbiAgICAgKi9cclxuICAgIC8vICRzY29wZS50eXBlYWhlYWQgPSB7fTtcclxuICAgIFxyXG4gICAgLypcclxuICAgICAqIFR5cGVhaGVhZCBmdW5jdGlvbmFsaXR5XHJcbiAgICAgKiAkc2NvcGUudHlwZWFoZWFkIGlzIGluaXRpYXRlZCBpbiBJbnRlcmZhY2VDb250cm9sbGVyIHRvIGJlIGFibGUgdG8gcmV1c2UgdHlwZWFoZWFkIGRhdGFcclxuICAgICAqL1xyXG4gICAgJHNjb3BlLmdldFR5cGVhaGVhZCA9IGZ1bmN0aW9uKHJlc291cmNlVHlwZSwgZm9yY2VHZXRDYWxsKXtcclxuICAgICAgICBmb3JjZUdldENhbGwgPSB0eXBlb2YgZm9yY2VHZXRDYWxsICE9PSAndW5kZWZpbmVkJyA/IGZvcmNlR2V0Q2FsbCA6IGZhbHNlO1xyXG5cclxuICAgICAgICAvLyBPbmx5IGlmIG5vdCB5ZXQgc2V0XHJcbiAgICAgICAgaWYodHlwZW9mICRzY29wZS50eXBlYWhlYWRbcmVzb3VyY2VUeXBlXSA9PT0gJ3VuZGVmaW5lZCcgfHwgZm9yY2VHZXRDYWxsKXtcclxuICAgICAgICAgICAgJHNjb3BlLnR5cGVhaGVhZFtyZXNvdXJjZVR5cGVdID0gUmVzdGFuZ3VsYXIuYWxsKCdyZXNvdXJjZS8nICsgcmVzb3VyY2VUeXBlKS5nZXRMaXN0KCkuJG9iamVjdDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAkc2NvcGUudHlwZWFoZWFkT25TZWxlY3QgPSBmdW5jdGlvbiAoJGl0ZW0sICRtb2RlbCwgJGxhYmVsLCByZXNvdXJjZSwgaWZjLCBwYXRjaFJlc291cmNlKXtcclxuICAgICAgICBpZih0eXBlb2YgJGl0ZW0uX2lkXyA9PT0gJ3VuZGVmaW5lZCcpIGNvbnNvbGUubG9nKCdSZXNvdXJjZSBpZCB1bmRlZmluZWQnKTtcclxuICAgICAgICBlbHNlIGlmKCRpdGVtLl9pZF8gPT09ICcnKSBjb25zb2xlLmxvZygnRW1wdHkgcmVzb3VyY2UgaWQgcHJvdmlkZWQnKTtcclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICBpZihBcnJheS5pc0FycmF5KHJlc291cmNlW2lmY10pKXtcclxuICAgICAgICAgICAgICAgIC8vIEFkYXB0IGluIGpzIG1vZGVsXHJcbiAgICAgICAgICAgICAgICByZXNvdXJjZVtpZmNdLnB1c2goYW5ndWxhci5jb3B5KCRpdGVtKSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIENvbnN0cnVjdCBwYXRjaChlcylcclxuICAgICAgICAgICAgICAgIHBhdGNoID0gUmVzb3VyY2VTZXJ2aWNlLmNyZWF0ZVBhdGNoKCdhZGQnLCByZXNvdXJjZSwgcGF0Y2hSZXNvdXJjZSwgaWZjLCAkaXRlbS5faWRfKTtcclxuICAgICAgICAgICAgICAgIFJlc291cmNlU2VydmljZS5hZGRQYXRjaGVzKHBhdGNoUmVzb3VyY2UsIFtwYXRjaF0pO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1lbHNlIGlmKHJlc291cmNlW2lmY10gPT09IG51bGwpe1xyXG4gICAgICAgICAgICAgICAgLy8gQWRhcHQganMgbW9kZWxcclxuICAgICAgICAgICAgICAgIHJlc291cmNlW2lmY10gPSBhbmd1bGFyLmNvcHkoJGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBDb25zdHJ1Y3QgcGF0Y2goZXMpXHJcbiAgICAgICAgICAgICAgICBwYXRjaCA9IFJlc291cmNlU2VydmljZS5jcmVhdGVQYXRjaCgncmVwbGFjZScsIHJlc291cmNlLCBwYXRjaFJlc291cmNlLCBpZmMsICRpdGVtLl9pZF8pO1xyXG4gICAgICAgICAgICAgICAgUmVzb3VyY2VTZXJ2aWNlLmFkZFBhdGNoZXMocGF0Y2hSZXNvdXJjZSwgW3BhdGNoXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBjb25zb2xlLmxvZygnRXJyb3I6IFByb3BlcnR5IGFscmVhZHkgc2V0IGFuZC9vciBub3QgZGVmaW5lZCcpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgJHNjb3BlLmhhc05vUmVzdWx0cyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBFbXB0eSBzZWxlY3RlZCBpbnB1dFxyXG4gICAgICAgICRzY29wZS5zZWxlY3RlZC52YWx1ZSA9ICcnO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgJHNjb3BlLnR5cGVBaGVhZENyZWF0ZSA9IGZ1bmN0aW9uIChyZXNvdXJjZSwgaWZjLCBzZWxlY3RlZCwgcGF0Y2hSZXNvdXJjZSwgcmVzb3VyY2VUeXBlKXtcclxuICAgICAgICBpZihBcnJheS5pc0FycmF5KHJlc291cmNlW2lmY10pKSB7IFxyXG4gICAgICAgICAgICBSZXNvdXJjZVNlcnZpY2UuYWRkSXRlbShyZXNvdXJjZSwgaWZjLCBzZWxlY3RlZCwgcGF0Y2hSZXNvdXJjZSkudGhlbihcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmdldFR5cGVhaGVhZChyZXNvdXJjZVR5cGUsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSBpZihyZXNvdXJjZVtpZmNdID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJlc291cmNlW2lmY10gPSBzZWxlY3RlZC52YWx1ZTtcclxuICAgICAgICAgICAgUmVzb3VyY2VTZXJ2aWNlLnNhdmVJdGVtKHJlc291cmNlLCBpZmMsIHBhdGNoUmVzb3VyY2UpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvcjogUHJvcGVydHkgYWxyZWFkeSBzZXQgYW5kL29yIG5vdCBkZWZpbmVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufSk7IiwiYW5ndWxhci5tb2R1bGUoJ0FtcGVyc2FuZEFwcCcpLmNvbnRyb2xsZXIoJ0F0b21pY1VwbG9hZEZpbGVDb250cm9sbGVyJywgZnVuY3Rpb24oJHNjb3BlLCBGaWxlVXBsb2FkZXIsIE5vdGlmaWNhdGlvblNlcnZpY2Upe1xyXG4gICAgXHJcbiAgICAvLyBGaWxlIHVwbG9hZGVyIHN0dWZmXHJcbiAgICAkc2NvcGUuRmlsZVVwbG9hZGVyID0gbmV3IEZpbGVVcGxvYWRlcih7XHJcbiAgICAgICAgYWxpYXMgOiAnZmlsZScsIC8vIGZpZWxkbmFtZSBhcyB1c2VkIGluICRfRklMRVNbJ2ZpbGUnXVxyXG4gICAgICAgIGZvcm1EYXRhIDogW10sXHJcbiAgICAgICAgcmVtb3ZlQWZ0ZXJVcGxvYWQgOiB0cnVlLFxyXG4gICAgICAgIGF1dG9VcGxvYWQgOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgJHNjb3BlLkZpbGVVcGxvYWRlci5vblN1Y2Nlc3NJdGVtID0gZnVuY3Rpb24oZmlsZUl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpe1xyXG4gICAgICAgIE5vdGlmaWNhdGlvblNlcnZpY2UudXBkYXRlTm90aWZpY2F0aW9ucyhyZXNwb25zZS5ub3RpZmljYXRpb25zKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBBZGQgcmVzcG9uc2UgY29udGVudCAobmV3bHkgY3JlYXRlZCBGaWxlT2JqZWN0KSB0byBpZmMgbGlzdCBpbiByZXNvdXJjZVxyXG4gICAgICAgIGZpbGVJdGVtLnJlc291cmNlW2ZpbGVJdGVtLmlmY10ucHVzaChyZXNwb25zZS5jb250ZW50KTtcclxuICAgIH07XHJcbiAgICBcclxuICAgICRzY29wZS5GaWxlVXBsb2FkZXIub25FcnJvckl0ZW0gPSBmdW5jdGlvbihpdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKXtcclxuICAgICAgICBOb3RpZmljYXRpb25TZXJ2aWNlLmFkZEVycm9yKHJlc3BvbnNlLmVycm9yLm1lc3NhZ2UsIHJlc3BvbnNlLmVycm9yLmNvZGUsIHRydWUpO1xyXG4gICAgfTtcclxufSk7IiwiYW5ndWxhci5tb2R1bGUoJ0FtcGVyc2FuZEFwcCcpLmNvbnRyb2xsZXIoJ0JveENvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUsIFJlc291cmNlU2VydmljZSl7XHJcbiAgICBcclxuICAgIC8vIEZ1bmN0aW9uIHRvIGNyZWF0ZSBhIG5ldyByZXNvdXJjZSAoZG9lcyBhIFBPU1QpXHJcbiAgICAkc2NvcGUuY3JlYXRlUmVzb3VyY2UgPSBSZXNvdXJjZVNlcnZpY2UuY3JlYXRlUmVzb3VyY2U7IC8vIGZ1bmN0aW9uKHJlc291cmNlLCBpZmMsIGNhbGxpbmdPYmosIHByZXBlbmQpXHJcbiAgICBcclxuICAgIC8vIEZ1bmN0aW9uIHRvIHNhdmUgY2VydGFpbiBhdHRyaWJ1dGVzIGNoYW5nZXMgb2YgYSByZXNvdXJjZSAoZG9lcyBhIFBBVENIKVxyXG4gICAgJHNjb3BlLnNhdmUgPSBSZXNvdXJjZVNlcnZpY2Uuc2F2ZVJlc291cmNlOyAvLyBmdW5jdGlvbihyZXNvdXJjZSlcclxuICAgIFxyXG4gICAgLy8gRnVuY3Rpb24gdG8gY2FuY2VsIHVuc2F2ZWQgZWRpdHMgKGRvZXMgYSBHRVQpXHJcbiAgICAkc2NvcGUuY2FuY2VsID0gUmVzb3VyY2VTZXJ2aWNlLmNhbmNlbFJlc291cmNlOyAvLyBmdW5jdGlvbihyZXNvdXJjZSlcclxuICAgIFxyXG4gICAgLy8gRnVuY3Rpb24gdG8gcmVtb3ZlIGEgcmVzb3VyY2UgZnJvbSBhbiBpbnRlcmZhY2UgKGxpc3QpXHJcbiAgICAkc2NvcGUucmVtb3ZlID0gUmVzb3VyY2VTZXJ2aWNlLnJlbW92ZVJlc291cmNlOyAvLyBmdW5jdGlvbihpZmMsIHJlc291cmNlLCBwYXRjaFJlc291cmNlKVxyXG4gICAgXHJcbiAgICAvLyBGdW5jdGlvbiB0byBkZWxldGUgYSByZXNvdXJjZVxyXG4gICAgJHNjb3BlLmRlbGV0ZSA9IFJlc291cmNlU2VydmljZS5kZWxldGVSZXNvdXJjZTsgLy8gZnVuY3Rpb24oaWZjLCByZXNvdXJjZSlcclxufSk7IiwiYW5ndWxhci5tb2R1bGUoJ0FtcGVyc2FuZEFwcCcpLmNvbnRyb2xsZXIoJ0ludGVyZmFjZUNvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUsICRsb2NhdGlvbiwgUmVzb3VyY2VTZXJ2aWNlKXtcclxuICAgIC8qXHJcbiAgICAgKiBBbiBlbXB0eSBvYmplY3QgZm9yIHR5cGVhaGVhZCBmdW5jdGlvbmFsaXR5LlxyXG4gICAgICogRGVmaW5lZCBoZXJlIHNvIGl0IGNhbiBiZSByZXVzZWQgaW4gYW4gaW50ZXJmYWNlXHJcbiAgICAgKiBQcmV2ZW50cyBtdWx0aXBsZSBjYWxscyBmb3IgdGhlIHNhbWUgcmVzb3VyY2VUeXBlXHJcbiAgICAgKi9cclxuICAgICRzY29wZS50eXBlYWhlYWQgPSB7fTtcclxuICAgIFxyXG4gICAgLy8gRGV0ZWN0cyBsb2NhdGlvbiBjaGFuZ2VzIGFuZCBjaGVja3MgaWYgdGhlcmUgYXJlIHVuc2F2ZWQgY2hhbmdlc1xyXG4gICAgJHNjb3BlLiRvbihcIiRsb2NhdGlvbkNoYW5nZVN0YXJ0XCIsIGZ1bmN0aW9uKGV2ZW50LCBuZXh0LCBjdXJyZW50KXtcclxuICAgICAgICBpZihSZXNvdXJjZVNlcnZpY2UuY2hlY2tSZXF1aXJlZCgpKXtcclxuICAgICAgICAgICAgY29uZmlybWVkID0gY29uZmlybShcIllvdSBoYXZlIHVuc2F2ZWQgZWRpdHMuIERvIHlvdSB3aXNoIHRvIGxlYXZlP1wiKTtcclxuICAgICAgICAgICAgaWYgKGV2ZW50ICYmICFjb25maXJtZWQpIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGVsc2UgaWYoZXZlbnQgJiYgY29uZmlybWVkKSBSZXNvdXJjZVNlcnZpY2UuZW1wdHlVcGRhdGVkUmVzb3VyY2VzKCk7XHJcbiAgICAgICAgICAgIGVsc2UgY29uc29sZS5sb2coJ1NvbWV0aW5nIHdlbnQgd3JvbmcuIENhbm5vdCBkZXRlcm1pbmUgYWN0aW9uIGFmdGVyIGxvY2F0aW9uQ2hhbmdlU3RhcnQnKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gRnVuY3Rpb24gdG8gY2hhbmdlIGxvY2F0aW9uIHRvIGNyZWF0ZSBhIG5ldyByZXNvdXJjZVxyXG4gICAgJHNjb3BlLm5ld1Jlc291cmNlID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAkbG9jYXRpb24udXJsKCcvJyArIGlmY05hbWUgKyAnP25ldycpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgLy8gRnVuY3Rpb24gKHJlZmVyZW5jZSkgdG8gY2hlY2sgaWYgdGhlcmUgYXJlIHBlbmRpbmcgcHJvbWlzZXMgZm9yIGEgcmVzb3VyY2VcclxuICAgICRzY29wZS5wZW5kaW5nUHJvbWlzZXMgPSBSZXNvdXJjZVNlcnZpY2UucGVuZGluZ1Byb21pc2VzO1xyXG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnQW1wZXJzYW5kQXBwJykuc2VydmljZSgnUmVzb3VyY2VTZXJ2aWNlJywgZnVuY3Rpb24oJGxvY2FsU3RvcmFnZSwgJHRpbWVvdXQsICRsb2NhdGlvbiwgUmVzdGFuZ3VsYXIsIE5vdGlmaWNhdGlvblNlcnZpY2Upe1xyXG4gICAgLy8gaHR0cDovL2Jsb2cudGhvdWdodHJhbS5pby9hbmd1bGFyLzIwMTUvMDcvMDcvc2VydmljZS12cy1mYWN0b3J5LW9uY2UtYW5kLWZvci1hbGwuaHRtbFxyXG4gICAgXHJcbiAgICBsZXQgdXBkYXRlZFJlc291cmNlcyA9IFtdOyAvLyBjb250YWlucyBsaXN0IHdpdGggdXBkYXRlZCByZXNvdXJjZSBvYmplY3RzIGluIHRoaXMgaW50ZXJmYWNlLiBVc2VkIHRvIGNoZWNrIGlmIHRoZXJlIGFyZSB1bmNvbW1taXR0ZWQgY2hhbmdlcyAocGF0Y2hlcyBpbiBjYWNoZSlcclxuICAgIFxyXG4gICAgbGV0IFJlc291cmNlU2VydmljZSA9IHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQgcmVzb3VyY2UgZGF0YSBnaXZlbiBhIGNlcnRhaW4gaW50ZXJmYWNlIChpZmMpXHJcbiAgICAgICAgICogXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHJlc291cmNlXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGlmY1xyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjYWxsaW5nT2JqIHdpbGwgYmUgdXNlZCBmb3IgbG9hZGluZyBpbmRpY2F0b3JcclxuICAgICAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXRSZXNvdXJjZSA6IGZ1bmN0aW9uKHJlc291cmNlLCBpZmMsIGNhbGxpbmdPYmope1xyXG4gICAgICAgICAgICBwcm9taXNlID0gUmVzdGFuZ3VsYXJcclxuICAgICAgICAgICAgLm9uZShyZXNvdXJjZS5fcGF0aF8gKyAnLycgKyBpZmMpXHJcbiAgICAgICAgICAgIC5nZXQoKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGRhdGEucGxhaW4oKTtcclxuICAgICAgICAgICAgICAgIH1jYXRjaChlcnJvcil7fVxyXG4gICAgICAgICAgICAgICAgaWYoJC5pc0VtcHR5T2JqZWN0KGRhdGEpKSBOb3RpZmljYXRpb25TZXJ2aWNlLmFkZEluZm8oJ05vIHJlc3VsdHMgZm91bmQnKTtcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYocmVzb3VyY2VbaWZjXSA9PT0gbnVsbCB8fCBBcnJheS5pc0FycmF5KHJlc291cmNlW2lmY10pKSByZXNvdXJjZVtpZmNdID0gZGF0YTtcclxuICAgICAgICAgICAgICAgIGVsc2UgYW5ndWxhci5leHRlbmQocmVzb3VyY2VbaWZjXSwgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIFJlc291cmNlU2VydmljZS5pbml0UmVzb3VyY2VNZXRhRGF0YShyZXNvdXJjZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc291cmNlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIEFkZCBwcm9taXNlIHRvIGxvYWRpbmcgbGlzdFxyXG4gICAgICAgICAgICBpZighQXJyYXkuaXNBcnJheShjYWxsaW5nT2JqLl9sb2FkaW5nXykpIGNhbGxpbmdPYmouX2xvYWRpbmdfID0gW107XHJcbiAgICAgICAgICAgIGNhbGxpbmdPYmouX2xvYWRpbmdfLnB1c2gocHJvbWlzZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBQYXRjaCB0aGUgZ2l2ZW4gcmVzb3VyY2UgYnkgY2FsbGluZyB0aGUgQVBJIGFuZCBzZW5kaW5nIHRoZSBsaXN0IG9mIHN0b3JlZCBwYXRjaGVzIFxyXG4gICAgICAgICAqIFxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSByZXNvdXJjZVxyXG4gICAgICAgICAqIEByZXR1cm5zIHtQcm9taXNlfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHNhdmVSZXNvdXJjZSA6IGZ1bmN0aW9uKHJlc291cmNlKXtcclxuICAgICAgICAgICAgcHJvbWlzZSA9IFJlc3Rhbmd1bGFyXHJcbiAgICAgICAgICAgIC5vbmUocmVzb3VyY2UuX3BhdGhfKVxyXG4gICAgICAgICAgICAucGF0Y2gocmVzb3VyY2UuX3BhdGNoZXNDYWNoZV8sIHt9KVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhID0gZGF0YS5wbGFpbigpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgcmVzb3VyY2UgZGF0YVxyXG4gICAgICAgICAgICAgICAgaWYocmVzb3VyY2UuX2lzUm9vdF8pIHJlc291cmNlLmdldCgpO1xyXG4gICAgICAgICAgICAgICAgZWxzZSByZXNvdXJjZSA9IGFuZ3VsYXIuZXh0ZW5kKHJlc291cmNlLCBkYXRhLmNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdmlzdWFsIGZlZWRiYWNrIChub3RpZmljYXRpb25zIGFuZCBidXR0b25zKVxyXG4gICAgICAgICAgICAgICAgUmVzb3VyY2VTZXJ2aWNlLnByb2Nlc3NSZXNwb25zZShyZXNvdXJjZSwgZGF0YSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc291cmNlO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCBwcm9taXNlIHRvIGxvYWRpbmcgbGlzdFxyXG4gICAgICAgICAgICBpZighQXJyYXkuaXNBcnJheShyZXNvdXJjZS5fbG9hZGluZ18pKSByZXNvdXJjZS5fbG9hZGluZ18gPSBbXTtcclxuICAgICAgICAgICAgcmVzb3VyY2UuX2xvYWRpbmdfLnB1c2gocHJvbWlzZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENhbmNlbCB1bnNhdmVkIGVkaXRzIGFuZCBnZXQgcmVzb3VyY2UgZGF0YVxyXG4gICAgICAgICAqIFxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSByZXNvdXJjZVxyXG4gICAgICAgICAqIEByZXR1cm5zIHtQcm9taXNlfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNhbmNlbFJlc291cmNlIDogZnVuY3Rpb24ocmVzb3VyY2Upe1xyXG4gICAgICAgICAgICBwcm9taXNlID0gUmVzdGFuZ3VsYXJcclxuICAgICAgICAgICAgLm9uZShyZXNvdXJjZS5fcGF0aF8pXHJcbiAgICAgICAgICAgIC5nZXQoKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICAgICAgICAgIGRhdGEgPSBkYXRhLnBsYWluKCk7XHJcbiAgICAgICAgICAgICAgICBpZigkLmlzRW1wdHlPYmplY3QoZGF0YSkpIE5vdGlmaWNhdGlvblNlcnZpY2UuYWRkSW5mbygnTm8gcmVzdWx0cyBmb3VuZCcpO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBhbmd1bGFyLmV4dGVuZChyZXNvdXJjZSwgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB2aXN1YWwgZmVlZGJhY2sgKG5vdGlmaWNhdGlvbnMgYW5kIGJ1dHRvbnMpXHJcbiAgICAgICAgICAgICAgICBOb3RpZmljYXRpb25TZXJ2aWNlLmdldE5vdGlmaWNhdGlvbnMoKTtcclxuICAgICAgICAgICAgICAgIFJlc291cmNlU2VydmljZS5pbml0UmVzb3VyY2VNZXRhRGF0YShyZXNvdXJjZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc291cmNlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIEFkZCBwcm9taXNlIHRvIGxvYWRpbmcgbGlzdFxyXG4gICAgICAgICAgICBpZighQXJyYXkuaXNBcnJheShyZXNvdXJjZS5fbG9hZGluZ18pKSByZXNvdXJjZS5fbG9hZGluZ18gPSBbXTtcclxuICAgICAgICAgICAgcmVzb3VyY2UuX2xvYWRpbmdfLnB1c2gocHJvbWlzZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZSAoUE9TVCkgYSBuZXcgcmVzb3VyY2UgdG8gYSBjZXJ0YWluIGludGVyZmFjZSBsaXN0XHJcbiAgICAgICAgICogXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHJlc291cmNlXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGlmY1xyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjYWxsaW5nT2JqIHdpbGwgYmUgdXNlZCBmb3IgbG9hZGluZyBpbmRpY2F0b3JcclxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2x9IHByZXBlbmRcclxuICAgICAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cclxuICAgICAgICAgKi9cclxuICAgICAgICBjcmVhdGVSZXNvdXJjZSA6IGZ1bmN0aW9uKHJlc291cmNlLCBpZmMsIGNhbGxpbmdPYmosIHByZXBlbmQpe1xyXG4gICAgICAgICAgICBpZihwcmVwZW5kID09PSAndW5kZWZpbmVkJykgcHJlcGVuZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcHJvbWlzZSA9IFJlc3Rhbmd1bGFyXHJcbiAgICAgICAgICAgIC5vbmUocmVzb3VyY2UuX3BhdGhfKS5hbGwoaWZjKVxyXG4gICAgICAgICAgICAucG9zdCh7fSwge30pXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgICAgICAgZGF0YSA9IGRhdGEucGxhaW4oKTtcclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB2aXN1YWwgZmVlZGJhY2sgKG5vdGlmaWNhdGlvbnMgYW5kIGJ1dHRvbnMpXHJcbiAgICAgICAgICAgICAgICBSZXNvdXJjZVNlcnZpY2UucHJvY2Vzc1Jlc3BvbnNlKGNhbGxpbmdPYmosIGRhdGEpO1xyXG5cclxuICAgICAgICAgICAgICAgIG5ld1Jlc291cmNlID0gZGF0YS5jb250ZW50O1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBBZGQgbmV3IHJlc291cmNlIHRvIGlmY1xyXG4gICAgICAgICAgICAgICAgaWYoQXJyYXkuaXNBcnJheShyZXNvdXJjZVtpZmNdKSl7IC8vIG5vbi11bmkgPSBsaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocHJlcGVuZCkgcmVzb3VyY2VbaWZjXS51bnNoaWZ0KG5ld1Jlc291cmNlKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHJlc291cmNlW2lmY10ucHVzaChuZXdSZXNvdXJjZSk7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXsgLy8gdW5pID0gb2JqZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VbaWZjXSA9IG5ld1Jlc291cmNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZihyZXNvdXJjZS5faXNSb290XyAmJiByZXNvdXJjZS5faWRfID09ICdfTkVXJykgJGxvY2F0aW9uLnVybCgnLycgKyBpZmMgKyAnLycrIG5ld1Jlc291cmNlLl9pZF8sIGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3UmVzb3VyY2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gQWRkIHByb21pc2UgdG8gbG9hZGluZyBsaXN0XHJcbiAgICAgICAgICAgIGlmKCFBcnJheS5pc0FycmF5KGNhbGxpbmdPYmouX2xvYWRpbmdfKSkgY2FsbGluZ09iai5fbG9hZGluZ18gPSBbXTtcclxuICAgICAgICAgICAgY2FsbGluZ09iai5fbG9hZGluZ18ucHVzaChwcm9taXNlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVtb3ZlIGEgcmVzb3VyY2UgZnJvbSBhIGNlcnRhaW4gaW50ZXJmYWNlIGxpc3RcclxuICAgICAgICAgKiBcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFyZW50XHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGlmY1xyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSByZXNvdXJjZVxyXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbH0gcGF0Y2hSZXNvdXJjZVxyXG4gICAgICAgICAqIEByZXR1cm5zIHtQcm9taXNlfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHJlbW92ZVJlc291cmNlIDogZnVuY3Rpb24ocGFyZW50LCBpZmMsIHJlc291cmNlLCBwYXRjaFJlc291cmNlKXtcclxuICAgICAgICAgICAgLy8gQWRhcHQganMgbW9kZWxcclxuICAgICAgICAgICAgaWYoQXJyYXkuaXNBcnJheShwYXJlbnRbaWZjXSkpIHBhcmVudFtpZmNdLnNwbGljZShwYXJlbnRbaWZjXS5pbmRleE9mKHJlc291cmNlKSwgMSk7IC8vIG5vbi11bmkgPSBsaXN0XHJcbiAgICAgICAgICAgIGVsc2UgcGFyZW50W2lmY10gPSBudWxsOyAvLyB1bmkgPSBvYmplY3RcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIENvbnN0cnVjdCBwYXRjaChlcylcclxuICAgICAgICAgICAgcGF0Y2ggPSBSZXNvdXJjZVNlcnZpY2UuY3JlYXRlUGF0Y2goJ3JlbW92ZScsIHJlc291cmNlLCBwYXRjaFJlc291cmNlKTtcclxuICAgICAgICAgICAgcmV0dXJuIFJlc291cmNlU2VydmljZS5hZGRQYXRjaGVzKHBhdGNoUmVzb3VyY2UsIFtwYXRjaF0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGVsZXRlIGEgcmVzb3VyY2VcclxuICAgICAgICAgKiBcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFyZW50XHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGlmY1xyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSByZXNvdXJjZSB0byBkZWxldGVcclxuICAgICAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cclxuICAgICAgICAgKi9cclxuICAgICAgICBkZWxldGVSZXNvdXJjZSA6IGZ1bmN0aW9uKHBhcmVudCwgaWZjLCByZXNvdXJjZSl7XHJcbiAgICAgICAgICAgIGlmKGNvbmZpcm0oJ0FyZSB5b3Ugc3VyZT8nKSl7XHJcbiAgICAgICAgICAgICAgICBwcm9taXNlID0gUmVzdGFuZ3VsYXJcclxuICAgICAgICAgICAgICAgIC5vbmUocmVzb3VyY2UuX3BhdGhfKVxyXG4gICAgICAgICAgICAgICAgLnJlbW92ZSh7fSlcclxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBkYXRhLnBsYWluKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIHZpc3VhbCBmZWVkYmFjayAobm90aWZpY2F0aW9ucyBhbmQgYnV0dG9ucylcclxuICAgICAgICAgICAgICAgICAgICBOb3RpZmljYXRpb25TZXJ2aWNlLnVwZGF0ZU5vdGlmaWNhdGlvbnMoZGF0YS5ub3RpZmljYXRpb25zKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgcmVzb3VyY2UgZnJvbSBpZmNcclxuICAgICAgICAgICAgICAgICAgICBpZihBcnJheS5pc0FycmF5KHBhcmVudFtpZmNdKSkgcGFyZW50W2lmY10uc3BsaWNlKHBhcmVudFtpZmNdLmluZGV4T2YocmVzb3VyY2UpLCAxKTsgLy8gbm9uLXVuaSA9IGxpc3RcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHBhcmVudFtpZmNdID0gbnVsbDsgLy8gdW5pID0gb2JqZWN0XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJlbnQ7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBBZGQgcHJvbWlzZSB0byBsb2FkaW5nIGxpc3RcclxuICAgICAgICAgICAgICAgIGlmKCFBcnJheS5pc0FycmF5KHJlc291cmNlLl9sb2FkaW5nXykpIHJlc291cmNlLl9sb2FkaW5nXyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgcmVzb3VyY2UuX2xvYWRpbmdfLnB1c2gocHJvbWlzZSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2F2ZS9wYXRjaCBhIGNoYW5nZWQgYXR0cmlidXRlXHJcbiAgICAgICAgICogXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHJlc291cmNlXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGlmY1xyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXRjaFJlc291cmNlXHJcbiAgICAgICAgICogQHJldHVybnMge1Byb21pc2V9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc2F2ZUl0ZW0gOiBmdW5jdGlvbihyZXNvdXJjZSwgaWZjLCBwYXRjaFJlc291cmNlKXtcclxuICAgICAgICAgICAgLy8gQ29uc3RydWN0IHBhdGNoKGVzKVxyXG4gICAgICAgICAgICBpZih0eXBlb2YgcmVzb3VyY2VbaWZjXSA9PT0gJ3VuZGVmaW5lZCcgfHwgcmVzb3VyY2VbaWZjXSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gbnVsbDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gcmVzb3VyY2VbaWZjXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwYXRjaCA9IFJlc291cmNlU2VydmljZS5jcmVhdGVQYXRjaCgncmVwbGFjZScsIHJlc291cmNlLCBwYXRjaFJlc291cmNlLCBpZmMsIHZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFJlZ2lzdGVyIHBhdGNoXHJcbiAgICAgICAgICAgIHJldHVybiBSZXNvdXJjZVNlcnZpY2UuYWRkUGF0Y2hlcyhwYXRjaFJlc291cmNlLCBbcGF0Y2hdKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFkZCBhbiBpdGVtIHRvIGFuIGludGVyZmFjZSBsaXN0XHJcbiAgICAgICAgICogXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHJlc291cmNlXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGlmY1xyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzZWxlY3RlZCBpdGVtIHRvIGFkZCB0byB0aGUgbGlzdFxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXRjaFJlc291cmNlXHJcbiAgICAgICAgICogQHJldHVybnMge1Byb21pc2V9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgYWRkSXRlbSA6IGZ1bmN0aW9uKHJlc291cmNlLCBpZmMsIHNlbGVjdGVkLCBwYXRjaFJlc291cmNlKXtcclxuICAgICAgICAgICAgaWYodHlwZW9mIHNlbGVjdGVkLnZhbHVlID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnVmFsdWUgdW5kZWZpbmVkJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KCdWYWx1ZSB1bmRlZmluZWQnKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmKHNlbGVjdGVkLnZhbHVlID09PSAnJykge1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnRW1wdHkgdmFsdWUgc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoJ0VtcHR5IHZhbHVlIHNlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZighQXJyYXkuaXNBcnJheShyZXNvdXJjZVtpZmNdKSkge1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnRXJyb3I6IHRyeWluZyB0byBhZGQgaXRlbSB0byBub24tYXJyYXknKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoJ0Vycm9yOiB0cnlpbmcgdG8gYWRkIGl0ZW0gdG8gbm9uLWFycmF5Jyk7XHJcbiAgICAgICAgICAgIH0gZWxzZXtcclxuICAgICAgICAgICAgICAgIC8vIEFkYXB0IGluIGpzIG1vZGVsXHJcbiAgICAgICAgICAgICAgICByZXNvdXJjZVtpZmNdLnB1c2goc2VsZWN0ZWQudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBDb25zdHJ1Y3QgcGF0Y2goZXMpXHJcbiAgICAgICAgICAgICAgICBwYXRjaCA9IFJlc291cmNlU2VydmljZS5jcmVhdGVQYXRjaCgnYWRkJywgcmVzb3VyY2UsIHBhdGNoUmVzb3VyY2UsIGlmYywgc2VsZWN0ZWQudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFJlc291cmNlU2VydmljZS5hZGRQYXRjaGVzKHBhdGNoUmVzb3VyY2UsIFtwYXRjaF0pLnRoZW4oZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVzZXQgc2VsZWN0ZWQgdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUoc2VsZWN0ZWQudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlbW92ZSBhbiBpdGVtIGZyb20gYW4gaW50ZXJmYWNlIGxpc3RcclxuICAgICAgICAgKiBcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gcmVzb3VyY2VcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWZjXHJcbiAgICAgICAgICogQHBhcmFtIHtpbnR9IGluZGV4XHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHBhdGNoUmVzb3VyY2VcclxuICAgICAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cclxuICAgICAgICAgKi9cclxuICAgICAgICByZW1vdmVJdGVtIDogZnVuY3Rpb24ocmVzb3VyY2UsIGlmYywgaW5kZXgsIHBhdGNoUmVzb3VyY2Upe1xyXG4gICAgICAgICAgICAvLyBDb25zdHJ1Y3QgcGF0Y2goZXMpXHJcbiAgICAgICAgICAgIHZhbHVlID0gcmVzb3VyY2VbaWZjXVtpbmRleF07XHJcbiAgICAgICAgICAgIHBhdGNoID0gUmVzb3VyY2VTZXJ2aWNlLmNyZWF0ZVBhdGNoKCdyZW1vdmUnLCByZXNvdXJjZSwgcGF0Y2hSZXNvdXJjZSwgaWZjLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBBZGFwdCBqcyBtb2RlbFxyXG4gICAgICAgICAgICByZXNvdXJjZVtpZmNdLnNwbGljZShpbmRleCwgMSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gUmVzb3VyY2VTZXJ2aWNlLmFkZFBhdGNoZXMocGF0Y2hSZXNvdXJjZSwgW3BhdGNoXSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDb25zdHJ1Y3QgcGF0Y2ggb2JqZWN0ICh3aXRoIGF0dHJpYnV0ZXMgJ29wJywgJ3BhdGgnIGFuZCAndmFsdWUnKVxyXG4gICAgICAgICAqIFxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcGVyYXRpb24gY2hvb3NlIGZyb20gJ2FkZCcsICdyZW1vdmUnIG9yICdyZXBsYWNlJ1xyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSByZXNvdXJjZVxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXRjaFJlc291cmNlXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGlmY1xyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxyXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY3JlYXRlUGF0Y2ggOiBmdW5jdGlvbihvcGVyYXRpb24sIHJlc291cmNlLCBwYXRjaFJlc291cmNlLCBpZmMsIHZhbHVlKXtcclxuICAgICAgICAgICAgaWYodHlwZW9mIHBhdGNoUmVzb3VyY2UgPT09ICd1bmRlZmluZWQnKSBwYXRjaFJlc291cmNlID0gcmVzb3VyY2U7XHJcbiAgICAgICAgICAgIHBhdGhMZW5ndGggPSBwYXRjaFJlc291cmNlLl9wYXRoXy5sZW5ndGg7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBwYXRoID0gcmVzb3VyY2UuX3BhdGhfLnN1YnN0cmluZyhwYXRoTGVuZ3RoKTtcclxuICAgICAgICAgICAgaWYodHlwZW9mIGlmYyAhPT0gJ3VuZGVmaW5lZCcpIHBhdGggPSBwYXRoICsgJy8nICsgaWZjO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYodHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJykgcmV0dXJuIHsgb3AgOiBvcGVyYXRpb24sIHBhdGggOiBwYXRofTtcclxuICAgICAgICAgICAgZWxzZSByZXR1cm4geyBvcCA6IG9wZXJhdGlvbiwgcGF0aCA6IHBhdGgsIHZhbHVlIDogdmFsdWV9O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQWRkIGxpc3Qgb2YgcGF0Y2hlcyBmb3IgZ2l2ZW4gcmVzb3VyY2UgYW5kIGNhbGwgQVBJICh3aGVuIGF1dG8tc2F2ZSBpcyBvbilcclxuICAgICAgICAgKiBcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gcmVzb3VyY2VcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdFtdfSBwYXRjaGVzXHJcbiAgICAgICAgICogQHJldHVybnMge1Byb21pc2V9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgYWRkUGF0Y2hlcyA6IGZ1bmN0aW9uKHJlc291cmNlLCBwYXRjaGVzKXtcclxuICAgICAgICAgICAgLy8gQWRkIG5ldyBwYXRjaGVzIHRvIHJlc291cmNlXHJcbiAgICAgICAgICAgIGlmKCFBcnJheS5pc0FycmF5KHJlc291cmNlLl9wYXRjaGVzQ2FjaGVfKSkgcmVzb3VyY2UuX3BhdGNoZXNDYWNoZV8gPSBbXTtcclxuICAgICAgICAgICAgcmVzb3VyY2UuX3BhdGNoZXNDYWNoZV8gPSByZXNvdXJjZS5fcGF0Y2hlc0NhY2hlXy5jb25jYXQocGF0Y2hlcyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBBZGQgcmVzb3VyY2UgdG8gdXBkYXRlZFJlc291cmNlc1xyXG4gICAgICAgICAgICBpZih1cGRhdGVkUmVzb3VyY2VzLmluZGV4T2YocmVzb3VyY2UpID09PSAtMSkgdXBkYXRlZFJlc291cmNlcy5wdXNoKHJlc291cmNlKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFNhdmUgaWYgYXV0b1NhdmUgaXMgZW5hYmxlZFxyXG4gICAgICAgICAgICBpZigkbG9jYWxTdG9yYWdlLnN3aXRjaEF1dG9TYXZlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUmVzb3VyY2VTZXJ2aWNlLnNhdmVSZXNvdXJjZShyZXNvdXJjZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdmlzdWFsIGZlZWRiYWNrXHJcbiAgICAgICAgICAgICAgICBSZXNvdXJjZVNlcnZpY2Uuc2V0UmVzb3VyY2VTdGF0dXMocmVzb3VyY2UsICd3YXJuaW5nJyk7XHJcbiAgICAgICAgICAgICAgICByZXNvdXJjZS5fc2hvd0J1dHRvbnNfID0geydzYXZlJyA6IHRydWUsICdjYW5jZWwnIDogdHJ1ZX07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJHEucmVzb2x2ZShyZXNvdXJjZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXR1cm5zIGlmIHRoZXJlIGFyZSB1bnNhdmVkIGNoYW5nZXMgKGkuZS4gcGF0Y2hlcyB0aGF0IGFyZSBub3QgeWV0IHNlbnQgdG8gdGhlIEFQSSlcclxuICAgICAgICAgKiBcclxuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbH1cclxuICAgICAgICAgKi9cclxuICAgICAgICBjaGVja1JlcXVpcmVkIDogZnVuY3Rpb24oKXsgXHJcbiAgICAgICAgICAgIHVwZGF0ZWRSZXNvdXJjZXMucmVkdWNlKGZ1bmN0aW9uKHByZXYsIGl0ZW0sIGluZGV4LCBhcnIpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByZXYgfHwgaXRlbS5fcGF0Y2hlc0NhY2hlXy5sZW5ndGg7XHJcbiAgICAgICAgICAgIH0sIGZhbHNlKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENsZWFyIGxpc3Qgb2YgdXBkYXRlZCByZXNvdXJjZXNcclxuICAgICAgICAgKi9cclxuICAgICAgICBlbXB0eVVwZGF0ZWRSZXNvdXJjZXMgOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB1cGRhdGVkUmVzb3VyY2VzID0gW107XHJcbiAgICAgICAgfSxcclxuICAgICAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJbml0L3Jlc2V0IHJlc291cmNlIG1ldGEgZGF0YVxyXG4gICAgICAgICAqIFxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSByZXNvdXJjZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGluaXRSZXNvdXJjZU1ldGFEYXRhIDogZnVuY3Rpb24ocmVzb3VyY2Upe1xyXG4gICAgICAgICAgICByZXNvdXJjZS5fc2hvd0J1dHRvbnNfID0geydzYXZlJyA6IGZhbHNlLCAnY2FuY2VsJyA6IGZhbHNlfTtcclxuICAgICAgICAgICAgcmVzb3VyY2UuX3BhdGNoZXNDYWNoZV8gPSBbXTtcclxuICAgICAgICAgICAgUmVzb3VyY2VTZXJ2aWNlLnNldFJlc291cmNlU3RhdHVzKHJlc291cmNlLCAnZGVmYXVsdCcpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUHJvY2VzcyByZXNwb25zZTogaS5lLiBzZXQgcmVzb3VyY2UgYnV0dG9ucyBhbmQgc3RhdHVzXHJcbiAgICAgICAgICogXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHJlc291cmNlXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHJlc3BvbnNlIGZyb20gQVBJXHJcbiAgICAgICAgICogQHJldHVybnMge09iamVjdH1cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm9jZXNzUmVzcG9uc2UgOiBmdW5jdGlvbihyZXNvdXJjZSwgcmVzcG9uc2Upe1xyXG4gICAgICAgICAgICBOb3RpZmljYXRpb25TZXJ2aWNlLnVwZGF0ZU5vdGlmaWNhdGlvbnMocmVzcG9uc2Uubm90aWZpY2F0aW9ucyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZihyZXNwb25zZS5pbnZhcmlhbnRSdWxlc0hvbGQpe1xyXG4gICAgICAgICAgICAgICAgcmVzb3VyY2UuX3Nob3dCdXR0b25zXyA9IHsnc2F2ZScgOiBmYWxzZSwgJ2NhbmNlbCcgOiBmYWxzZX07XHJcbiAgICAgICAgICAgICAgICByZXNvdXJjZS5fcGF0Y2hlc0NhY2hlXyA9IFtdOyAvLyBlbXB0eSBwYXRjaGVzIGNhY2hlXHJcbiAgICAgICAgICAgICAgICBSZXNvdXJjZVNlcnZpY2Uuc2V0UmVzb3VyY2VTdGF0dXMocmVzb3VyY2UsICdzdWNjZXNzJyk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIEFmdGVyIDMgc2Vjb25kcywgcmVzZXQgc3RhdHVzIHRvIGRlZmF1bHRcclxuICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgUmVzb3VyY2VTZXJ2aWNlLnNldFJlc291cmNlU3RhdHVzKHJlc291cmNlLCAnZGVmYXVsdCcpO1xyXG4gICAgICAgICAgICAgICAgfSwgMzAwMCk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgcmVzb3VyY2UuX3Nob3dCdXR0b25zXyA9IHsnc2F2ZScgOiBmYWxzZSwgJ2NhbmNlbCcgOiB0cnVlfTtcclxuICAgICAgICAgICAgICAgIFJlc291cmNlU2VydmljZS5zZXRSZXNvdXJjZVN0YXR1cyhyZXNvdXJjZSwgJ2RhbmdlcicpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmVzb3VyY2U7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTZXQgcmVzb3VyY2Ugc3RhdHVzIG1ldGEgZGF0YVxyXG4gICAgICAgICAqIFxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSByZXNvdXJjZVxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdGF0dXMgY2hvb3NlIGZyb20gJ3dhcm5pbmcnLCAnZGFuZ2VyJywgJ3N1Y2Nlc3MnIG9yICdkZWZhdWx0J1xyXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc2V0UmVzb3VyY2VTdGF0dXMgOiBmdW5jdGlvbihyZXNvdXJjZSwgc3RhdHVzKXtcclxuICAgICAgICAgICAgLy8gUmVzZXQgYWxsIHN0YXR1cyBwcm9wZXJ0aWVzXHJcbiAgICAgICAgICAgIHJlc291cmNlLl9zdGF0dXNfID0geyAnd2FybmluZycgOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkYW5nZXInICA6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RlZmF1bHQnIDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc3VjY2VzcycgOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC8vIFNldCBzdGF0dXMgcHJvcGVydHlcclxuICAgICAgICAgICAgcmVzb3VyY2UuX3N0YXR1c19bc3RhdHVzXSA9IHRydWU7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gcmVzb3VyY2U7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXR1cm5zIGlmIHJlc291cmNlIGhhcyBwZW5kaW5nIHByb21pc2VzXHJcbiAgICAgICAgICogXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHJlc291cmNlXHJcbiAgICAgICAgICogQHJldHVybnMge2Jvb2x9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcGVuZGluZ1Byb21pc2VzIDogZnVuY3Rpb24ocmVzb3VyY2Upe1xyXG4gICAgICAgICAgICBpZighQXJyYXkuaXNBcnJheShyZXNvdXJjZS5fbG9hZGluZ18pKSByZXR1cm4gZmFsc2U7IC8vIGVtcHR5IGFycmF5IGNvbnRhaW5zIG5vIHBlbmRpbmcgcHJvbWlzZXNcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiByZXNvdXJjZS5fbG9hZGluZ18uc29tZShmdW5jdGlvbih2YWwpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbC4kJHN0YXRlLnN0YXR1cyA9PT0gMDsgLy8gcHJvbWlzZSBzdGF0dXM6IDAgLT4gcGVuZGluZywgMSAtPiByZXNvbHZlZCwgMiAtPiByZWplY3RlZFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICByZXR1cm4gUmVzb3VyY2VTZXJ2aWNlO1xyXG4gICAgXHJcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdBbXBlcnNhbmRBcHAnKS5jb250cm9sbGVyKCdOYXZpZ2F0aW9uQmFyQ29udHJvbGxlcicsIGZ1bmN0aW9uICgkc2NvcGUsICRyb3V0ZSwgUmVzdGFuZ3VsYXIsICRsb2NhbFN0b3JhZ2UsICRzZXNzaW9uU3RvcmFnZSwgJHRpbWVvdXQsICRsb2NhdGlvbiwgTm90aWZpY2F0aW9uU2VydmljZSwgUm9sZVNlcnZpY2UsIE5hdmlnYXRpb25CYXJTZXJ2aWNlKSB7XHJcbiAgICBcclxuICAgICRzY29wZS4kc3RvcmFnZSA9ICRsb2NhbFN0b3JhZ2U7XHJcbiAgICAkc2NvcGUuJHNlc3Npb25TdG9yYWdlID0gJHNlc3Npb25TdG9yYWdlO1xyXG4gICAgJHNjb3BlLmRlZmF1bHRTZXR0aW5ncyA9IE5hdmlnYXRpb25CYXJTZXJ2aWNlLmRlZmF1bHRTZXR0aW5ncztcclxuICAgICRzY29wZS5sb2FkaW5nTmF2QmFyID0gW107XHJcbiAgICAkc2NvcGUubmF2YmFyID0gTmF2aWdhdGlvbkJhclNlcnZpY2UubmF2YmFyO1xyXG4gICAgXHJcbiAgICAkc2NvcGUucmVsb2FkID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAkc2NvcGUubG9hZGluZ05hdkJhciA9IFtdO1xyXG4gICAgICAgICRzY29wZS5sb2FkaW5nTmF2QmFyLnB1c2goTmF2aWdhdGlvbkJhclNlcnZpY2UucmVmcmVzaE5hdkJhcigpKTtcclxuICAgICAgICAkcm91dGUucmVsb2FkKCk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5jaGVja0FsbFJ1bGVzID0gTm90aWZpY2F0aW9uU2VydmljZS5jaGVja0FsbFJ1bGVzO1xyXG5cclxuICAgICRzY29wZS5jcmVhdGVOZXdSZXNvdXJjZSA9IGZ1bmN0aW9uKHJlc291cmNlVHlwZSwgb3BlbldpdGhJZmMpe1xyXG4gICAgICAgIFJlc3Rhbmd1bGFyLm9uZSgncmVzb3VyY2UnKS5hbGwocmVzb3VyY2VUeXBlKVxyXG4gICAgICAgIC5wb3N0KHt9LCB7fSlcclxuICAgICAgICAudGhlbihcclxuICAgICAgICAgICAgZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICAgICAgICAvLyBKdW1wcyB0byBpbnRlcmZhY2UgYW5kIHJlcXVlc3RzIG5ld2x5IGNyZWF0ZWQgcmVzb3VyY2VcclxuICAgICAgICAgICAgICAgICRsb2NhdGlvbi51cmwob3BlbldpdGhJZmMgKyAnLycgKyBkYXRhLl9pZF8pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgICRzY29wZS5yZXNldFNldHRpbmdzID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAvLyBhbGwgb2ZmXHJcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKCRzY29wZS4kc3RvcmFnZS5ub3RpZmljYXRpb25QcmVmcywgXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgb2JqKXtcclxuICAgICAgICAgICAgICAgIG9ialtpbmRleF0gPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgJHNjb3BlLiRzdG9yYWdlLnN3aXRjaEF1dG9TYXZlID0gZmFsc2U7XHJcbiAgICAgICAgXHJcbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIC8vIHJlc2V0IHRvIGRlZmF1bHQgICAgICAgIFxyXG4gICAgICAgICAgICAkc2NvcGUucmVzZXROb3RpZmljYXRpb25TZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAkc2NvcGUucmVzZXRTd2l0Y2hBdXRvU2F2ZSgpO1xyXG4gICAgICAgIH0sIDUwMCk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAkc2NvcGUucmVzZXROb3RpZmljYXRpb25TZXR0aW5ncyA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJHNjb3BlLiRzdG9yYWdlLm5vdGlmaWNhdGlvblByZWZzID0gYW5ndWxhci5leHRlbmQoJHNjb3BlLiRzdG9yYWdlLm5vdGlmaWNhdGlvblByZWZzLCAkc2NvcGUuZGVmYXVsdFNldHRpbmdzLm5vdGlmaWNhdGlvbnMpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgJHNjb3BlLnJlc2V0U3dpdGNoQXV0b1NhdmUgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICRzY29wZS4kc3RvcmFnZS5zd2l0Y2hBdXRvU2F2ZSA9ICRzY29wZS5kZWZhdWx0U2V0dGluZ3Muc3dpdGNoQXV0b1NhdmU7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAkc2NvcGUubG9hZGluZ05hdkJhci5wdXNoKE5hdmlnYXRpb25CYXJTZXJ2aWNlLnJlZnJlc2hOYXZCYXIoKSk7XHJcbn0pLmRpcmVjdGl2ZSgnbXlOYXZiYXJSZXNpemUnLCBmdW5jdGlvbiAoJHdpbmRvdywgJHRpbWVvdXQsIE5hdmlnYXRpb25CYXJTZXJ2aWNlKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50KSB7XHJcbiAgICAgICAgdmFyIHcgPSBhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIHJlc2l6ZU5hdmJhciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgLy8gbW92aW5nIGlmYyBpdGVtcyBmcm9tIGRyb3Bkb3duLW1lbnUgdG8gbmF2YmFyIGl0c2VsZlxyXG4gICAgICAgICAgICAgICAgd2hpbGUoJCgnI25hdmJhci1pbnRlcmZhY2VzJykud2lkdGgoKSA8ICgkKCcjbmF2YmFyLXdyYXBwZXInKS53aWR0aCgpIC0gJCgnI25hdmJhci1vcHRpb25zJykud2lkdGgoKSkgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI25hdmJhci1pbnRlcmZhY2VzLWRyb3Bkb3duLW1lbnUnKS5jaGlsZHJlbigpLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICQoXCIjbmF2YmFyLWludGVyZmFjZXMtZHJvcGRvd24tbWVudVwiKS5jaGlsZHJlbigpLmZpcnN0KCkuYXBwZW5kVG8oXCIjbmF2YmFyLWludGVyZmFjZXNcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIG1vdmluZyBpZmMgaXRlbXMgZnJvbSBuYXZiYXIgdG8gZHJvcGRvd24tbWVudVxyXG4gICAgICAgICAgICAgICAgd2hpbGUoJCgnI25hdmJhci1pbnRlcmZhY2VzJykud2lkdGgoKSA+ICgkKCcjbmF2YmFyLXdyYXBwZXInKS53aWR0aCgpIC0gJCgnI25hdmJhci1vcHRpb25zJykud2lkdGgoKSkpe1xyXG4gICAgICAgICAgICAgICAgICAgICQoXCIjbmF2YmFyLWludGVyZmFjZXNcIikuY2hpbGRyZW4oKS5sYXN0KCkucHJlcGVuZFRvKFwiI25hdmJhci1pbnRlcmZhY2VzLWRyb3Bkb3duLW1lbnVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc2hvdy9oaWRlIGRyb3Bkb3duIG1lbnUgZm9yIG1vcmUgaW50ZXJmYWNlcyAobXVzdCBiZSBpbnNpZGUgbG9vcCwgYmVjYXVzZSBpdCBhZmZlY3RzIHRoZSB3aWR0aCBvZiB0aGUgbmF2YmFyXHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI25hdmJhci1pbnRlcmZhY2VzLWRyb3Bkb3duJykudG9nZ2xlQ2xhc3MoJ2hpZGRlbicsICQoJyNuYXZiYXItaW50ZXJmYWNlcy1kcm9wZG93bi1tZW51JykuY2hpbGRyZW4oKS5sZW5ndGggPD0gMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIHNob3cvaGlkZSBkcm9wZG93biBtZW51IHdoZW4gcG9zc2libGVcclxuICAgICAgICAgICAgICAgICQoJyNuYXZiYXItaW50ZXJmYWNlcy1kcm9wZG93bicpLnRvZ2dsZUNsYXNzKCdoaWRkZW4nLCAkKCcjbmF2YmFyLWludGVyZmFjZXMtZHJvcGRvd24tbWVudScpLmNoaWxkcmVuKCkubGVuZ3RoIDw9IDApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIHdhdGNoIG5hdmJhclxyXG4gICAgICAgIHNjb3BlLiR3YXRjaCgnTmF2aWdhdGlvbkJhclNlcnZpY2UubmF2YmFyJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJlc2l6ZU5hdmJhcigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIHdoZW4gd2luZG93IHNpemUgZ2V0cyBjaGFuZ2VkXHJcbiAgICAgICAgdy5iaW5kKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7ICAgICAgICBcclxuICAgICAgICAgICAgcmVzaXplTmF2YmFyKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gd2hlbiBwYWdlIGxvYWRzXHJcbiAgICAgICAgcmVzaXplTmF2YmFyKCk7XHJcbiAgICB9O1xyXG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnQW1wZXJzYW5kQXBwJykuc2VydmljZSgnTmF2aWdhdGlvbkJhclNlcnZpY2UnLCBmdW5jdGlvbihSZXN0YW5ndWxhciwgJGxvY2FsU3RvcmFnZSwgJHNlc3Npb25TdG9yYWdlLCBOb3RpZmljYXRpb25TZXJ2aWNlKXtcclxuICAgIGxldCBuYXZiYXIgPSB7fTtcclxuICAgIGxldCBkZWZhdWx0U2V0dGluZ3MgPSB7fTtcclxuXHJcbiAgICBsZXQgc2VydmljZSA9IHtcclxuICAgICAgICBuYXZiYXIgOiBuYXZiYXIsXHJcbiAgICAgICAgZGVmYXVsdFNldHRpbmdzIDogZGVmYXVsdFNldHRpbmdzLFxyXG5cclxuICAgICAgICByZWZyZXNoTmF2QmFyIDogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyXHJcbiAgICAgICAgICAgIC5vbmUoJ2FwcC9uYXZiYXInKVxyXG4gICAgICAgICAgICAuZ2V0KClcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICAgICAgICBkYXRhID0gZGF0YS5wbGFpbigpO1xyXG5cclxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKG5hdmJhciwgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAkc2Vzc2lvblN0b3JhZ2Uuc2Vzc2lvbiA9IGRhdGEuc2Vzc2lvbjtcclxuICAgICAgICAgICAgICAgICRzZXNzaW9uU3RvcmFnZS5zZXNzaW9uUm9sZXMgPSBkYXRhLnNlc3Npb25Sb2xlcztcclxuICAgICAgICAgICAgICAgICRzZXNzaW9uU3RvcmFnZS5zZXNzaW9uVmFycyA9IGRhdGEuc2Vzc2lvblZhcnM7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChkZWZhdWx0U2V0dGluZ3MsIGRhdGEuZGVmYXVsdFNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gRGVmYXVsdCBzZXR0aW5ncyBmb3Igbm90aWZpY2F0aW9uUHJlZnNcclxuICAgICAgICAgICAgICAgIGlmKCRsb2NhbFN0b3JhZ2Uubm90aWZpY2F0aW9uUHJlZnMgPT09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlc2V0Tm90aWZpY2F0aW9uU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIERlZmF1bHQgc2V0dGluZyBmb3Igc3dpdGNoQXV0b1NhdmVcclxuICAgICAgICAgICAgICAgIGlmKCRsb2NhbFN0b3JhZ2Uuc3dpdGNoQXV0b1NhdmUgPT09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlc2V0U3dpdGNoQXV0b1NhdmUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIG5vdGlmaWNhdGlvbnNcclxuICAgICAgICAgICAgICAgIE5vdGlmaWNhdGlvblNlcnZpY2UudXBkYXRlTm90aWZpY2F0aW9ucyhkYXRhLm5vdGlmaWNhdGlvbnMpO1xyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbihlcnJvcil7XHJcbiAgICAgICAgICAgICAgICAvLyBvbiBlcnJvclxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICByZXR1cm4gc2VydmljZTtcclxufSk7IiwiYW5ndWxhci5tb2R1bGUoJ0FtcGVyc2FuZEFwcCcpLnNlcnZpY2UoJ1JvbGVTZXJ2aWNlJywgZnVuY3Rpb24oJHNlc3Npb25TdG9yYWdlLCBSZXN0YW5ndWxhcil7XHJcbiAgICBcclxuICAgIC8qXHJcbiAgICAgKiBBdmFpbGFibGUgcm9sZXMgYXJlIHJlZ2lzdGVyZWQgaW4gJHNlc3Npb25TdG9yYWdlLnNlc3Npb25Sb2xlc1xyXG4gICAgICogQSByb2xlIGhhcyB0aGUgZm9sbG93aW5nIGF0dHJpYnV0ZXM6IGlkLCBsYWJlbCwgYWN0aXZlXHJcbiAgICAgKi9cclxuICAgIFxyXG4gICAgUm9sZVNlcnZpY2UgPSB7XHJcbiAgICAgICAgc2VsZWN0Um9sZSA6IGZ1bmN0aW9uKHJvbGVJZCl7XHJcbiAgICAgICAgICAgIFJvbGVTZXJ2aWNlLnRvZ2dsZVJvbGUocm9sZUlkLCB0cnVlKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIFxyXG4gICAgICAgIHNlbGVjdFJvbGVCeUxhYmVsIDogZnVuY3Rpb24gKHJvbGVMYWJlbCl7XHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCgkc2Vzc2lvblN0b3JhZ2Uuc2Vzc2lvblJvbGVzLCBmdW5jdGlvbihyb2xlKSB7XHJcbiAgICAgICAgICAgICAgICBpZihyb2xlLmxhYmVsID09IHJvbGVMYWJlbCkgcmV0dXJuIFJvbGVTZXJ2aWNlLnNlbGVjdFJvbGUocm9sZS5pZCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXHJcbiAgICAgICAgdG9nZ2xlUm9sZSA6IGZ1bmN0aW9uKHJvbGVJZCwgc2V0KXtcclxuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKCRzZXNzaW9uU3RvcmFnZS5zZXNzaW9uUm9sZXMsIGZ1bmN0aW9uKHJvbGUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyb2xlLmlkID09IHJvbGVJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHNldCA9PT0gdW5kZWZpbmVkKSByb2xlLmFjdGl2ZSA9ICFyb2xlLmFjdGl2ZTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHJvbGUuYWN0aXZlID0gc2V0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIFxyXG4gICAgICAgIGdldEFjdGl2ZVJvbGVJZHMgOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB2YXIgcm9sZUlkcyA9IFtdO1xyXG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goJHNlc3Npb25TdG9yYWdlLnNlc3Npb25Sb2xlcywgZnVuY3Rpb24ocm9sZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJvbGUuYWN0aXZlID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm9sZUlkcy5wdXNoKHJvbGUuaWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHJvbGVJZHM7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBcclxuICAgICAgICBkZWFjdGl2YXRlQWxsUm9sZXMgOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goJHNlc3Npb25TdG9yYWdlLnNlc3Npb25Sb2xlcywgZnVuY3Rpb24ocm9sZSkge1xyXG4gICAgICAgICAgICAgICAgcm9sZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBcclxuICAgICAgICBzZXRBY3RpdmVSb2xlcyA6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHJldHVybiBSZXN0YW5ndWxhci5hbGwoJ2FwcC9yb2xlcycpLnBhdGNoKCRzZXNzaW9uU3RvcmFnZS5zZXNzaW9uUm9sZXMpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIHJldHVybiBSb2xlU2VydmljZTtcclxufSk7IiwiYW5ndWxhci5tb2R1bGUoJ0FtcGVyc2FuZEFwcCcpLmNvbnRyb2xsZXIoJ1JvbGVNZW51Q29udHJvbGxlcicsIGZ1bmN0aW9uICgkc2NvcGUsIFJvbGVTZXJ2aWNlLCBOYXZpZ2F0aW9uQmFyU2VydmljZSkge1xyXG4gICAgJHNjb3BlLnRvZ2dsZVJvbGUgPSBmdW5jdGlvbihyb2xlSWQsIHNldCl7XHJcbiAgICAgICAgUm9sZVNlcnZpY2UudG9nZ2xlUm9sZShyb2xlSWQsIHNldCk7XHJcbiAgICAgICAgTmF2aWdhdGlvbkJhclNlcnZpY2UucHJvbWlzZXMucHVzaChcclxuICAgICAgICAgICAgUm9sZVNlcnZpY2Uuc2V0QWN0aXZlUm9sZXMoKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICAgICAgICAgIE5hdmlnYXRpb25CYXJTZXJ2aWNlLnJlZnJlc2hOYXZCYXIoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgfTtcclxufSk7IiwiYW5ndWxhci5tb2R1bGUoJ0FtcGVyc2FuZEFwcCcpLnNlcnZpY2UoJ05vdGlmaWNhdGlvblNlcnZpY2UnLCBmdW5jdGlvbigkbG9jYWxTdG9yYWdlLCAkc2Vzc2lvblN0b3JhZ2UsICR0aW1lb3V0LCBSZXN0YW5ndWxhcil7XHJcbiAgICAvLyBJbml0aWFsaXplIG5vdGlmaWNhdGlvbnMgY29udGFpbmVyXHJcbiAgICBsZXQgbm90aWZpY2F0aW9ucyA9IHtcclxuICAgICAgICAnc2lnbmFscycgOiBbXSxcclxuICAgICAgICAnaW52YXJpYW50cycgOiBbXSxcclxuICAgICAgICAnaW5mb3MnIDogW10sXHJcbiAgICAgICAgJ3N1Y2Nlc3NlcycgOiBbXSxcclxuICAgICAgICAnd2FybmluZ3MnIDogW10sXHJcbiAgICAgICAgJ2Vycm9ycycgOiBbXVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgbGV0IE5vdGlmaWNhdGlvblNlcnZpY2UgPSB7XHJcbiAgICAgICAgbm90aWZpY2F0aW9ucyA6IG5vdGlmaWNhdGlvbnMsXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gRnVuY3Rpb24gdG8gZ2V0IG5vdGlmaWNhdGlvbnMgYWdhaW5cclxuICAgICAgICBnZXROb3RpZmljYXRpb25zIDogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyXHJcbiAgICAgICAgICAgIC5vbmUoJ2FwcC9ub3RpZmljYXRpb25zJylcclxuICAgICAgICAgICAgLmdldCgpXHJcbiAgICAgICAgICAgIC50aGVuKFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGRhdGEucGxhaW4oKTtcclxuICAgICAgICAgICAgICAgICAgICBOb3RpZmljYXRpb25TZXJ2aWNlLnVwZGF0ZU5vdGlmaWNhdGlvbnMoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICBOb3RpZmljYXRpb25TZXJ2aWNlLmFkZEVycm9yKCdTb21ldGhpbmcgd2VudCB3cm9uZyB3aGlsZSBnZXR0aW5nIG5vdGlmaWNhdGlvbnMnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBjaGVja0FsbFJ1bGVzIDogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgcmV0dXJuIFJlc3Rhbmd1bGFyXHJcbiAgICAgICAgICAgIC5vbmUoJ2FkbWluL3J1bGVlbmdpbmUvZXZhbHVhdGUvYWxsJylcclxuICAgICAgICAgICAgLmdldCgpXHJcbiAgICAgICAgICAgIC50aGVuKFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGRhdGEucGxhaW4oKTtcclxuICAgICAgICAgICAgICAgICAgICBOb3RpZmljYXRpb25TZXJ2aWNlLmFkZFN1Y2Nlc3MoJ0V2YWx1YXRlZCBhbGwgcnVsZXMuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgTm90aWZpY2F0aW9uU2VydmljZS51cGRhdGVOb3RpZmljYXRpb25zKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfSxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIE5vdGlmaWNhdGlvblNlcnZpY2UuYWRkRXJyb3IoJ1NvbWV0aGluZyB3ZW50IHdyb25nIHdoaWxlIGV2YWx1YXRpbmcgYWxsIHJ1bGVzJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBcclxuICAgICAgICAvLyBGdW5jdGlvbiB0byB1cGRhdGUgbm90aWZpY2F0aW9ucyBhZnRlciBhcGkgcmVzcG9uc2VcclxuICAgICAgICB1cGRhdGVOb3RpZmljYXRpb25zIDogZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICAgIGlmKGRhdGEgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gT3ZlcndyaXRlXHJcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvbnMuc2lnbmFscyA9IGRhdGEuc2lnbmFscztcclxuICAgICAgICAgICAgbm90aWZpY2F0aW9ucy5pbnZhcmlhbnRzID0gZGF0YS5pbnZhcmlhbnRzO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gTWVyZ2VcclxuICAgICAgICAgICAgbm90aWZpY2F0aW9ucy5pbmZvcyA9IG5vdGlmaWNhdGlvbnMuaW5mb3MuY29uY2F0KGRhdGEuaW5mb3MpO1xyXG4gICAgICAgICAgICBub3RpZmljYXRpb25zLnN1Y2Nlc3NlcyA9IG5vdGlmaWNhdGlvbnMuc3VjY2Vzc2VzLmNvbmNhdChkYXRhLnN1Y2Nlc3Nlcyk7XHJcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvbnMud2FybmluZ3MgPSBub3RpZmljYXRpb25zLndhcm5pbmdzLmNvbmNhdChkYXRhLndhcm5pbmdzKTtcclxuICAgICAgICAgICAgbm90aWZpY2F0aW9ucy5lcnJvcnMgPSBub3RpZmljYXRpb25zLmVycm9ycy5jb25jYXQoZGF0YS5lcnJvcnMpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYoJGxvY2FsU3RvcmFnZS5ub3RpZmljYXRpb25QcmVmcy5zd2l0Y2hBdXRvSGlkZVN1Y2Nlc3Nlcyl7XHJcbiAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25zLnN1Y2Nlc3NlcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgfSwgMzAwMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIFxyXG4gICAgICAgIGFkZFN1Y2Nlc3MgOiBmdW5jdGlvbihtZXNzYWdlKXtcclxuICAgICAgICAgICAgbm90aWZpY2F0aW9ucy5zdWNjZXNzZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAnbWVzc2FnZScgOiBtZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgJ2NvdW50JyA6IDFcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBUT0RPOiBtb3ZlIHRpbWVvdXQgZnVuY3Rpb24gaGVyZSBmb3IgYXV0byBoaWRlIHN1Y2Nlc3Nlc1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXHJcbiAgICAgICAgYWRkRXJyb3IgOiBmdW5jdGlvbihtZXNzYWdlLCBjb2RlLCBwZXJzaXN0ZW50LCBkZXRhaWxzKXtcclxuICAgICAgICAgICAgY29kZSA9IHR5cGVvZiBjb2RlICE9PSB1bmRlZmluZWQgPyBjb2RlIDogbnVsbDtcclxuICAgICAgICAgICAgcGVyc2lzdGVudCA9IHR5cGVvZiBwZXJzaXN0ZW50ICE9PSB1bmRlZmluZWQgPyBwZXJzaXN0ZW50IDogZmFsc2U7XHJcbiAgICAgICAgICAgIGRldGFpbHMgPSB0eXBlb2YgZGV0YWlscyAhPT0gdW5kZWZpbmVkID8gZGV0YWlscyA6IGZhbHNlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbGV0IGFscmVhZHlFeGlzdHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgbGV0IGFyciA9IG5vdGlmaWNhdGlvbnMuZXJyb3JzO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFycltpXS5tZXNzYWdlID09IG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBhcnJbaV0uY291bnQgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICBhcnJbaV0uY29kZSA9IGNvZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJyW2ldLnBlcnNpc3RlbnQgPSBwZXJzaXN0ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGFycltpXS5kZXRhaWxzID0gZGV0YWlscztcclxuICAgICAgICAgICAgICAgICAgICBhbHJlYWR5RXhpc3RzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZighYWxyZWFkeUV4aXN0cykgbm90aWZpY2F0aW9ucy5lcnJvcnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAnbWVzc2FnZScgOiBtZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgJ2NvZGUnIDogY29kZSxcclxuICAgICAgICAgICAgICAgICdjb3VudCcgOiAxLFxyXG4gICAgICAgICAgICAgICAgJ3BlcnNpc3RlbnQnIDogcGVyc2lzdGVudCxcclxuICAgICAgICAgICAgICAgICdkZXRhaWxzJyA6IGRldGFpbHNcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBcclxuICAgICAgICBhZGRXYXJuaW5nIDogZnVuY3Rpb24obWVzc2FnZSl7XHJcbiAgICAgICAgICAgIGxldCBhbHJlYWR5RXhpc3RzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGxldCBhcnIgPSBub3RpZmljYXRpb25zLndhcm5pbmdzO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFycltpXS5tZXNzYWdlID09IG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBhcnJbaV0uY291bnQgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICBhbHJlYWR5RXhpc3RzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZighYWxyZWFkeUV4aXN0cykgbm90aWZpY2F0aW9ucy53YXJuaW5ncy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICdtZXNzYWdlJyA6IG1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICAnY291bnQnIDogMVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIFxyXG4gICAgICAgIGFkZEluZm8gOiBmdW5jdGlvbihtZXNzYWdlKXtcclxuICAgICAgICAgICAgbGV0IGFscmVhZHlFeGlzdHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgbGV0IGFyciA9IG5vdGlmaWNhdGlvbnMuaW5mb3M7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXJyW2ldLm1lc3NhZ2UgPT0gbWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFycltpXS5jb3VudCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGFscmVhZHlFeGlzdHMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKCFhbHJlYWR5RXhpc3RzKSBub3RpZmljYXRpb25zLmluZm9zLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgJ21lc3NhZ2UnIDogbWVzc2FnZSxcclxuICAgICAgICAgICAgICAgICdjb3VudCcgOiAxXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIHJldHVybiBOb3RpZmljYXRpb25TZXJ2aWNlO1xyXG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnQW1wZXJzYW5kQXBwJykuY29udHJvbGxlcignTm90aWZpY2F0aW9uQ2VudGVyQ29udHJvbGxlcicsIGZ1bmN0aW9uICgkc2NvcGUsICRyb3V0ZSwgUmVzdGFuZ3VsYXIsICRsb2NhbFN0b3JhZ2UsIE5vdGlmaWNhdGlvblNlcnZpY2UpIHtcclxuICAgIFxyXG4gICAgJHNjb3BlLmxvY2FsU3RvcmFnZSA9ICRsb2NhbFN0b3JhZ2U7XHJcbiAgICAkc2NvcGUubm90aWZpY2F0aW9ucyA9IE5vdGlmaWNhdGlvblNlcnZpY2Uubm90aWZpY2F0aW9ucztcclxuICAgIFxyXG4gICAgLy8gSGlkZSBzdWNjZXNzLSwgZXJyb3ItLCB3YXJuaW5ncy0sIGluZm8tIGFuZCBpbnZhcmlhbnQgdmlvbGF0aW9uIG1lc3NhZ2VzIChub3Qgc2lnbmFscykgdXBvbiByb3V0ZSBjaGFuZ2VcclxuICAgICRzY29wZS4kb24oXCIkcm91dGVDaGFuZ2VTdWNjZXNzXCIsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJHNjb3BlLm5vdGlmaWNhdGlvbnMuc3VjY2Vzc2VzID0gW107XHJcbiAgICAgICAgJHNjb3BlLm5vdGlmaWNhdGlvbnMuZXJyb3JzID0gJHNjb3BlLm5vdGlmaWNhdGlvbnMuZXJyb3JzLmZpbHRlcihmdW5jdGlvbiAoZXJyb3Ipe1xyXG4gICAgICAgICAgICBpZihlcnJvci5wZXJzaXN0ZW50KXtcclxuICAgICAgICAgICAgICAgIGVycm9yLnBlcnNpc3RlbnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICRzY29wZS5ub3RpZmljYXRpb25zLndhcm5pbmdzID0gW107XHJcbiAgICAgICAgJHNjb3BlLm5vdGlmaWNhdGlvbnMuaW5mb3MgPSBbXTtcclxuICAgICAgICAkc2NvcGUubm90aWZpY2F0aW9ucy5pbnZhcmlhbnRzID0gW107XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gRnVuY3Rpb24gdG8gY2xvc2Ugbm90aWZpY2F0aW9uc1xyXG4gICAgJHNjb3BlLmNsb3NlQWxlcnQgPSBmdW5jdGlvbihhbGVydHMsIGluZGV4KSB7XHJcbiAgICAgICAgYWxlcnRzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICB9O1xyXG4gICAgXHJcbn0pO1xyXG4iXX0=
